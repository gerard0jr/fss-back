(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){},263:function(e,t,a){},5521:function(e,t,a){e.exports=a(5813)},5526:function(e,t,a){},5527:function(e,t,a){},5528:function(e,t,a){},5684:function(e,t,a){},5812:function(e,t,a){},5813:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),o=a.n(l),c=(a(5526),a(27)),i=a(28),s=a(30),u=a(29),m=a(31),d=(a(5527),a(5817)),g=a(5815),p=a(1),h=a(264),E=function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:10},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,marginLeft:"57px"},bigAvatar:{margin:10,width:60,height:60},flexGrow:{flexGrow:1},salesMenuRoot:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,textAlign:"left"},container:{display:"flex",flexWrap:"wrap"}}},f=a(20),b=a(43),v=a(23),C=a(118),w=a.n(C),y=a(8),N=a.n(y),P=(a(5528),a(18)),S=Object(f.withStyles)(E,{withTheme:!0})(function(e){var t=e.classes,a=e.open,l=e.handleDrawerOpen,o=e.photoURL,c=e.role,i=e.toHome,s=e.handleLocation,u=e.closeSession,m=Object(n.useState)(null),d=Object(v.a)(m,2),g=d[0],h=d[1],E=function(){return h(null)};return r.a.createElement(p.a,{position:"fixed",className:N()(t.appBar,Object(b.a)({},t.appBarShift,a))},r.a.createElement(p.M,{className:"navbar-distribution",disableGutters:!a},r.a.createElement("div",{className:"left-items"},r.a.createElement(p.p,{color:"inherit","aria-label":"Open drawer",onClick:l,className:N()(t.menuButton,Object(b.a)({},t.hide,a))},r.a.createElement(w.a,null)),r.a.createElement("img",{onClick:i,style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),r.a.createElement("div",{onClick:function(e){return h(e.currentTarget)},className:"profile-circled"},r.a.createElement(p.d,{className:"chip-color",clickable:!0,avatar:r.a.createElement(p.b,{alt:"profile-mini-pic",src:o}),label:c}))),r.a.createElement(p.y,{anchorEl:g,open:Boolean(g),onClose:E},r.a.createElement(p.z,{onClick:function(){E(),s("profile")}},r.a.createElement(p.p,null,r.a.createElement(P.a,null)),"Perfil"),r.a.createElement(p.z,{onClick:function(){E(),u()}},r.a.createElement(p.p,null,r.a.createElement(P.i,null)),"Cerrar sesi\xf3n")))}),L=Object(f.withStyles)(E,{withTheme:!0})(function(e){var t,a,n=e.open,l=e.direction,o=e.handleDrawerClose,c=e.classes,i=e.location,s=e.handleLocation;return r.a.createElement(p.l,{variant:"permanent",className:N()(c.drawer,(t={},Object(b.a)(t,c.drawerOpen,n),Object(b.a)(t,c.drawerClose,!n),t)),classes:{paper:N()((a={},Object(b.a)(a,c.drawerOpen,n),Object(b.a)(a,c.drawerClose,!n),a))},open:n},r.a.createElement("div",{className:c.toolbar},r.a.createElement(p.p,{onClick:o},"right"===l?r.a.createElement(P.e,null):r.a.createElement(P.d,null))),r.a.createElement(p.k,null),r.a.createElement(p.u,{component:"nav"},r.a.createElement(p.v,{selected:"root"===i,onClick:function(){return s("root")},button:!0},n?r.a.createElement(p.w,null,r.a.createElement(P.l,null)):r.a.createElement(p.N,{title:"Resumen",placement:"right-start"},r.a.createElement(p.w,null,r.a.createElement(P.l,null))),r.a.createElement(p.x,{primary:"Resumen"})),r.a.createElement(p.v,{selected:"ventas"===i,onClick:function(){return s("ventas")},button:!0},n?r.a.createElement(p.w,null,r.a.createElement(P.b,null)):r.a.createElement(p.N,{title:"Ventas",placement:"right-start"},r.a.createElement(p.w,null,r.a.createElement(P.b,null))),r.a.createElement(p.x,{primary:"Ventas"}))),r.a.createElement(p.k,null),r.a.createElement(p.u,{component:"nav"},r.a.createElement(p.v,{selected:"profile"===i,onClick:function(){return s("profile")},button:!0},n?r.a.createElement(p.w,null,r.a.createElement(P.j,null)):r.a.createElement(p.N,{title:"Perfil",placement:"right-start"},r.a.createElement(p.w,null,r.a.createElement(P.j,null))),r.a.createElement(p.x,{primary:"Perfil"}))))}),D=(a(5684),a(165));D.initializeApp({apiKey:"AIzaSyDiJ--AaTzWP3NdW1j6Zo4wvB17x1Cr2nk",authDomain:"fss-react.firebaseapp.com",databaseURL:"https://fss-react.firebaseio.com",projectId:"fss-react",storageBucket:"fss-react.appspot.com",messagingSenderId:"18829816109"});var O=D,x=a(22),k=a.n(x),j="https://crm-fss.herokuapp.com/auth",G=function(e){return k.a.post("".concat(j,"/signup"),e,{}).then(function(e){return e.data}).catch(function(e){return e.response})},I=function(e){return k.a.post("".concat(j,"/login"),e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return e.response})},A=function(){return k.a.get("".concat(j,"/logout")).then(function(e){return e.data}).catch(function(e){return e.response})},B=function(e,t){return k.a.post("".concat(j,"/updateUser/").concat(e),t,{}).then(function(e){return e.data}).catch(function(e){return e.response})},q=a(5818),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,direction:"left",location:"root",user:{},message:String,progress:0},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e})},a.handleChange=function(e){var t=a.state.user;switch(e.target.id){case"name":t.name=e.target.value;break;case"email":t.email=e.target.value;break;default:return}a.setState({user:t})},a.uploadPhoto=function(e){var t=a.state.user,n=e.target.files[0],r=O.storage().ref("profilePics/".concat(t.name,"-").concat(t._id)).child(n.name).put(n);r.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;t=Math.floor(t),a.setState({progress:t})}),r.then(function(e){return e.ref.getDownloadURL()}).then(function(e){t.photoURL=e,localStorage.setItem("user",JSON.stringify(t)),a.props.updateUser(t),a.setState({user:t,progress:0,open:!0,message:"Foto de perfil actualizada"})})},a.clickInput=function(){document.getElementById("photoUpload").click()},a.closeSession=function(){return A().then(function(e){var t=a.props.history;return localStorage.removeItem("user"),t.push("/login")}).catch(function(e){return e})},a.close=function(){return a.setState({open:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,a=e.user,n=e.message,l=e.progress,o=this.handleChange,c=this.close,i=this.uploadPhoto,s=this.clickInput,u=this.closeSession;return r.a.createElement("div",null,r.a.createElement(p.A,{className:"paper-profile"},r.a.createElement("h2",null,"Perfil de ",a.name),a.photoURL?l>0?r.a.createElement(p.e,{variant:"determinate",value:l}):r.a.createElement("div",{onClick:s,style:{backgroundImage:"url(".concat(a.photoURL,")")},className:"profile-picture"},r.a.createElement("span",null,r.a.createElement(P.c,null),r.a.createElement("p",null,"Editar"))):r.a.createElement(p.e,null),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.L,{InputLabelProps:{shrink:!0},disabled:!0,id:"email",label:"Email",value:a.email,onChange:o,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.L,{InputLabelProps:{shrink:!0},id:"name",label:"Nombre",value:a.name,onChange:o,margin:"normal"})),r.a.createElement("input",{onChange:i,type:"file",name:"photoURL",id:"photoUpload",style:{display:"none"},accept:"image/png, image/jpeg"})),r.a.createElement(p.c,{style:{margin:"2rem 0"},onClick:u,variant:"contained",color:"secondary"},"Cerrar sesi\xf3n",r.a.createElement(P.i,{style:{marginLeft:"0.5rem"}}))),r.a.createElement(p.C,{open:t,message:n,close:c}))}}]),t}(n.Component),z=Object(q.a)(R),U=(a(73),a(91)),M=a(168),F=a(167),_=a.n(F),J=function(e){var t=e.dialog,a=e.closeDialog,n=e.handleChange,l=e.lead,o=e.clearLead,c=e.submitLead,i=e.updateLead,s=e.dialogNew,u=e.closeDrawer;return r.a.createElement(p.g,{open:s||t,onClose:a,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,s?"Nuevo Deal":"Editar deal ".concat(l.prefix,"-").concat(l.seller,"-").concat(l.number," de ").concat(l.clientName?l.clientName.bussinessName:"")),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"contactName",name:"contactName",label:"Nombre del contacto",value:l.contactName,onBlur:n}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"contactPosition",name:"contactPosition",label:"Puesto del contacto",value:l.contactPosition,onBlur:n}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"contactPhone",name:"contactPhone",label:"Tel\xe9fono",value:l.contactPhone,onBlur:n}),r.a.createElement(p.L,{required:!0,className:"text-field",type:"email",id:"contactEmail",name:"contactEmail",label:"Email",value:l.contactEmail,onBlur:n}),r.a.createElement(p.L,{className:"text-field",type:"text",id:"commentText",name:"commentText",label:"Comentarios",value:l.commentText,onBlur:n})))),s?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:o,variant:"outlined"},"Limpiar"),r.a.createElement(p.c,{disabled:!l.clientName,onClick:c,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:function(){a(),u()}},"Cancelar"),r.a.createElement(p.c,{onClick:function(){i(l._id)},color:"primary",variant:"contained"},"Actualizar")))},T="https://crm-fss.herokuapp.com/leads",W=function(e){return k.a.get("".concat(T,"/getAll/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})},H=function(e,t){return k.a.post("".concat(T,"/newLead/").concat(e),t,{}).then(function(e){return e}).catch(function(e){return e.response})},Q=function(e){var t=e.id;return k.a.post("".concat(T,"/removeLead/").concat(t)).then(function(e){return e}).catch(function(e){return e.response})},V=function(e,t){return k.a.post("".concat(T,"/removeUserLead/").concat(e),t).then(function(e){return e}).catch(function(e){return e.response})},Y=function(e,t){return k.a.post("".concat(T,"/updateLead/").concat(e),t).then(function(e){return e}).catch(function(e){return e.response})},$=function(e){var t=e.lead,a=e.updateLeadState,l=Object(n.useState)(null),o=Object(v.a)(l,2),c=o[0],i=o[1],s=Object(n.useState)(null),u=Object(v.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(!1),h=Object(v.a)(g,2),E=h[0],f=h[1],b=Object(n.useState)(!1),C=Object(v.a)(b,2),w=C[0],y=C[1],N=Object(n.useState)(!1),S=Object(v.a)(N,2),L=S[0],D=S[1],x=function(){return y(!w)},j=function(){return D(!L)},G=function(e){return"file0"===e.target.name?i(e.target.files[0]):d(e.target.files[0])},I=function(e){(function(e){return k.a.get("".concat(T,"/deleteFile0/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})})(e).then(function(e){return a(e.data)}).catch(function(e){return e})},A=function(e){(function(e){return k.a.get("".concat(T,"/deleteFile1/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})})(e).then(function(e){return a(e.data)}).catch(function(e){return e})};return r.a.createElement("div",{className:"general-container"},r.a.createElement("div",{className:"file-layout"},r.a.createElement("div",{className:"file-input"},r.a.createElement("p",{className:"small-font"},"Primer archivo"),t.fileURL0?r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.fileURL0,className:"success-upload"},t.file0Name),r.a.createElement(p.p,{onClick:x,"aria-label":"Delete"},r.a.createElement(P.g,null))):r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:G,type:"file",name:"file0",id:"first"}),r.a.createElement("button",{id:"file0",onClick:function(){var e;null!==c&&((e=O.storage().ref("documents/".concat(t.prefix,"-").concat(t.seller,"-").concat(t.number,"/firstFile")).child(c.name).put(c)).on("state_changed",function(e){f(!0)}),e.then(function(e){return e.ref.getDownloadURL()}).then(function(e){(function(e,t,a){var n={link:e,name:a};return k.a.post("".concat(T,"/file0Upload/").concat(t),n).then(function(e){return e}).catch(function(e){return e.response})})({link:e},t._id,c.name).then(function(e){a(e.data),f(!1)}).catch(function(e){return e})}))}},"Subir"))),r.a.createElement("div",{className:"file-input"},r.a.createElement("p",{className:"small-font"},"Segundo archivo"),t.fileURL1?r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.fileURL1,className:"success-upload"},t.file1Name),r.a.createElement(p.p,{onClick:j,"aria-label":"Delete"},r.a.createElement(P.g,null))):r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:G,type:"file",name:"file1",id:"first"}),r.a.createElement("button",{id:"file1",onClick:function(){var e;null!==m&&((e=O.storage().ref("documents/".concat(t.prefix,"-").concat(t.seller,"-").concat(t.number,"/secondFile")).child(m.name).put(m)).on("state_changed",function(e){f(!0)}),e.then(function(e){return e.ref.getDownloadURL()}).then(function(e){(function(e,t,a){var n={link:e,name:a};return k.a.post("".concat(T,"/file1Upload/").concat(t),n).then(function(e){return e}).catch(function(e){return e.response})})({link:e},t._id,m.name).then(function(e){a(e.data),f(!1)}).catch(function(e){return e})}))}},"Subir")))),r.a.createElement("div",{className:"progress"},E?r.a.createElement(p.t,null):""),r.a.createElement(p.g,{open:w,onClose:x},r.a.createElement(p.j,null,'\xbfDeseas eliminar "Primer archivo"?'),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:x,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){I(t._id),x()},color:"secondary",autoFocus:!0},"Eliminar"))),r.a.createElement(p.g,{open:L,onClose:j},r.a.createElement(p.j,null,'\xbfDeseas eliminar "Segundo archivo"?'),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:j,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){A(t._id),j()},color:"secondary",autoFocus:!0},"Eliminar"))))},X="https://crm-fss.herokuapp.com/quotations",Z=function(e){var t=e.open,a=e.message,n=e.close;return r.a.createElement(p.C,{color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:6e3,onClose:n,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},a),action:[r.a.createElement(p.p,{key:"close","aria-label":"Close",color:"inherit",onClick:n},r.a.createElement(P.f,null))]})},K=a(268),ee=a.n(K),te=a(61),ae=a.n(te);a(255);var ne=function(e){var t=e.drawer,a=e.closeDrawer,l=(e.leads,e.lead),o=e.deleteLead,c=e.handleChange,i=e.quotations,s=e.getQuotations,u=e.handleDateChange,m=(e.loading,e.updateLead),d=e.dialog,g=e.closeDialog,h=e.openDialog,E=e.updateLeadState,f=Object(n.useState)(!1),b=Object(v.a)(f,2),C=b[0],w=b[1],y=function(){return w(!C)},N=Object(n.useState)(!1),P=Object(v.a)(N,2),S=P[0],L=P[1],D=function(){return L(!S)},O=Object(n.useState)({}),x=Object(v.a)(O,2),j=x[0],G=x[1],I=function(e){j[e.target.name]=e.target.value,G(j)},A=function(e){(function(e,t){return k.a.post("".concat(X,"/submitQuotation/").concat(e),t).then(function(e){return e}).catch(function(e){return e})})(e,j).then(function(t){T("Cotizaci\xf3n creada"),s(e)}).catch(function(e){return e})},B=Object(n.useState)(!1),q=Object(v.a)(B,2),R=q[0],z=q[1],U=Object(n.useState)(""),M=Object(v.a)(U,2),F=M[0],_=M[1],T=function(e){_(e),z(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.l,{anchor:"right",open:t,onClose:a},r.a.createElement("div",{className:"drawer-layout"},r.a.createElement("h2",null,"Deal ","".concat(l.prefix,"-").concat(l.seller,"-").concat(l.number)),r.a.createElement(p.n,null,r.a.createElement(p.B,{className:"drawer-status",value:l.status,onChange:u(l._id,l,l.status),inputProps:{name:"status",id:"status"}},r.a.createElement(p.z,{value:"Propuesta"},"Propuesta"),r.a.createElement(p.z,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),r.a.createElement(p.z,{value:"Confirmaci\xf3n de pedido"},"Confirmaci\xf3n de pedido (Ganada)"),r.a.createElement(p.z,{value:"Perdida"},"Perdida"),r.a.createElement(p.z,{value:"Primer Cobro"},"Primer cobro"))),r.a.createElement(p.k,{variant:"middle"}),r.a.createElement("h3",{style:{color:"rgb(115, 115, 115)"}},l.clientName?l.clientName.bussinessName:""),r.a.createElement("div",{className:"drawer-two-columns"},r.a.createElement("div",{className:"left-column"},r.a.createElement("p",{className:"small-font"},"Contacto:"),r.a.createElement("p",{className:"blue-font"},l.contactName?l.contactName:"Ninguno",r.a.createElement("small",{style:{color:"gray"}}," (",l.contactPosition?l.contactPosition:"-",")")),r.a.createElement("p",{className:"small-font"},"Tel\xe9fono:"),r.a.createElement("p",{className:"blue-font"},l.contactPhone?l.contactPhone:"-"),r.a.createElement("p",{className:"small-font"},"Email:"),r.a.createElement("p",{className:"blue-font"},l.contactEmail?l.contactEmail:"Sin email"),r.a.createElement("p",{className:"small-font"},"Direcci\xf3n:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.bussinessAddress?l.clientName.bussinessAddress:"Sin direcci\xf3n"):"Sin direcci\xf3n"),r.a.createElement("div",{className:"right-column"},r.a.createElement("p",{className:"small-font"},"Giro:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.bussinessRole?l.clientName.bussinessRole:"Sin giro"):"Sin giro",r.a.createElement("p",{className:"small-font"},"Industria:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.industry?l.clientName.industry:"Sin industria"):"Sin industria",r.a.createElement("p",{className:"small-font"},"Origen:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.origin?l.clientName.origin:"Sin origen"):"Sin origen",r.a.createElement("p",{className:"small-font"},"Empleados:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.bussinessEmployees?l.clientName.bussinessEmployees:"Sin empleados"):"Sin empleados")),r.a.createElement(p.k,{variant:"middle"}),r.a.createElement("div",{className:""},r.a.createElement("p",{className:"small-font"},"Comentarios"),r.a.createElement("p",{className:"blue-font"},l.commentText),r.a.createElement(p.k,null),r.a.createElement("p",{className:"small-font"},"Cotizaciones"),r.a.createElement(p.A,null,r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,null,"ID"),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},"Fecha"),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},"PO"),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},"Factura"),r.a.createElement(p.G,null,"Descripci\xf3n"),r.a.createElement(p.G,null,"Monto mensual"))),r.a.createElement(p.F,null,i.length?i.map(function(e){return r.a.createElement(p.J,{key:e._id},r.a.createElement(p.G,{component:"th",scope:"row"},e.quotPrefix),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},ae()(e.createdAt).format("d/MMMM/Y")),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},e.quotPO?e.quotPO:"Sin orden de compra"),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},e.quotBill?e.quotBill:"Sin factura"),r.a.createElement(p.G,null,e.quotDescription?e.quotDescription:"Sin descripci\xf3n"),r.a.createElement(p.G,null,e.quotAmount?r.a.createElement(ee.a,{quantity:e.quotAmount}):"$0"))}):r.a.createElement(p.J,null,r.a.createElement(p.G,{component:"th",scope:"row"},"Sin cotizaciones"))))),r.a.createElement(p.c,{onClick:D,style:{margin:"1rem"},variant:"contained"},"Crear cotizaci\xf3n"),r.a.createElement(p.k,null),r.a.createElement("p",{className:"small-font"},"Archivos"),r.a.createElement($,{updateLeadState:E,lead:l})),r.a.createElement("div",{className:"button-container"},r.a.createElement(p.c,{variant:"contained",onClick:a},"Cerrar"),r.a.createElement(p.c,{onClick:y,variant:"contained",color:"secondary"},"Borrar"),r.a.createElement(p.c,{onClick:function(){h(l,"update")},variant:"contained",color:"primary"},"Editar"))),r.a.createElement(p.g,{open:C,onClose:y},r.a.createElement(p.j,null,"Eliminar ",l.bussinessName),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:y,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){o(l._id),y(),a()},color:"secondary",autoFocus:!0},"Eliminar"))),r.a.createElement(J,{closeDrawer:a,dialog:d,closeDialog:g,handleChange:c,lead:l,updateLead:m}),r.a.createElement(p.g,{open:S,onClose:D},r.a.createElement(p.j,null,"Nueva cotizaci\xf3n para ","".concat(l.prefix,"-").concat(l.seller,"-").concat(l.number)," ",r.a.createElement("small",{style:{color:"rgb(115, 115, 115)"}},"(",l.clientName?l.clientName.bussinessName:"",")")),r.a.createElement(p.i,null,r.a.createElement(p.L,{autoFocus:!0,margin:"dense",id:"quotPO",name:"quotPO",label:"Orden de compra",type:"number",onChange:I,fullWidth:!0}),r.a.createElement(p.L,{autoFocus:!0,margin:"dense",id:"quotBill",name:"quotBill",label:"Factura",type:"number",onChange:I,fullWidth:!0}),r.a.createElement(p.L,{autoFocus:!0,margin:"dense",id:"quotDescription",name:"quotDescription",label:"Descripci\xf3n",type:"text",onChange:I,fullWidth:!0}),r.a.createElement(p.n,{style:{marginTop:"1rem"}},r.a.createElement(p.s,{htmlFor:"adornment-amount"},"Monto mensual"),r.a.createElement(p.q,{type:"number",id:"quotAmount",name:"quotAmount",onChange:I,startAdornment:r.a.createElement(p.r,{position:"start"},"$")}))),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:D,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){D(),A(l._id)},color:"primary",autoFocus:!0},"Crear")))),r.a.createElement(Z,{close:function(){return z(!1)},message:F,open:R}))},re=function(e){var t=e.leads,a=e.rowsPerPage,l=e.page,o=e.handleChangePage,c=e.handleChangeRowsPerPage,i=e.deleteLead,s=e.dialog,u=e.closeDialog,m=e.handleChange,d=e.lead,g=e.openDialog,h=e.updateLead,E=e.handleDateChange,f=e.loading,b=e.openDrawer,C=e.closeDrawer,w=e.drawer,y=e.updateLeadState,N=Object(n.useState)(""),S=Object(v.a)(N,2),L=S[0],D=S[1],O=Object(n.useState)([]),x=Object(v.a)(O,2),j=x[0],G=x[1],I=function(e){(function(e){return k.a.get("".concat(X,"/getQuotations/").concat(e)).then(function(e){return e}).catch(function(e){return e})})(e).then(function(e){return G(e.data.quotations)}).catch(function(e){return e})};return r.a.createElement("div",null,r.a.createElement(p.A,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"Deals"),r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return D(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(P.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Ver/Editar"),r.a.createElement(p.G,null,"ID"),r.a.createElement(p.G,null,"Empresa"),r.a.createElement(p.G,null,"Contacto"),r.a.createElement(p.G,null,"Tel\xe9fono"),r.a.createElement(p.G,null,"Email"),r.a.createElement(p.G,null,"Estatus"),r.a.createElement(p.G,null,"Reuni\xf3n"),r.a.createElement(p.G,{style:{width:"200px",padding:"0 45px"}}))),r.a.createElement(p.F,null,t.length?t.filter(function(e){return e.prefix.concat("-",e.seller,"-",e.number).includes(L.toUpperCase())||e.bussinessName.toLowerCase().includes(L.toLowerCase())}).map(function(e,t){return t<10*l+10&&t>=10*l?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){b(e),I(e._id)},variant:"extended",color:"primary",size:"small"},r.a.createElement(P.h,{fontSize:"small"}))),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),r.a.createElement(p.G,{component:"th",scope:"row"},e.clientName?e.clientName.bussinessName:null),r.a.createElement(p.G,null,e.contactName),r.a.createElement(p.G,null,r.a.createElement("a",{style:{color:"#1976d2"},href:"tel:+".concat(e.contactPhone)},e.contactPhone)),r.a.createElement(p.G,null,r.a.createElement("a",{style:{color:"#1976d2"},href:"mailto:".concat(e.contactEmail)},e.contactEmail)),r.a.createElement(p.G,null,r.a.createElement(p.n,null,r.a.createElement(p.B,{value:e.status,onChange:E(e._id,e,e.status),inputProps:{name:"status",id:"status"}},r.a.createElement(p.z,{value:"Propuesta"},"Propuesta"),r.a.createElement(p.z,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),r.a.createElement(p.z,{value:"Confirmaci\xf3n de pedido"},"Confirmaci\xf3n de pedido (Ganada)"),r.a.createElement(p.z,{value:"Perdida"},"Perdida"),r.a.createElement(p.z,{value:"Primer Cobro"},"Primer cobro")))),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},r.a.createElement(U.b,{utils:M.a,locale:_.a,views:["year"]},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(U.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.meetingDate,onChange:E(e._id,e,null),format:"dd/MM/yyyy"})))),r.a.createElement(p.G,{style:{width:"200px",padding:"5px"}},r.a.createElement(U.b,{utils:M.a,locale:_.a},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(U.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.meetingDate,onChange:E(e._id,e,null)}))))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},f?"Cargando...":"No hay leads"),r.a.createElement(p.G,{component:"th",scope:"row"},f?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:t?t.length:0,rowsPerPage:a,page:l,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:o,onChangeRowsPerPage:c})),r.a.createElement(ne,{drawer:w,closeDrawer:C,leads:t,deleteLead:i,handleChange:m,lead:d,updateLead:h,handleDateChange:E,loading:f,dialog:s,closeDialog:u,openDialog:g,updateLeadState:y,quotations:j,getQuotations:I}))},le=function(e){var t=e.handleChange,a=e.lead,n=e.leads,l=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.rowsPerPage,i=e.page,s=e.submitLead,u=e.clearLead,m=e.deleteLead,d=e.openDialog,g=e.closeDialog,h=e.dialog,E=e.dialogNew,f=e.updateLead,b=e.handleDateChange,v=e.loading,C=e.openDrawer,w=e.closeDrawer,y=e.drawer,N=e.updateLeadState;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(re,{handleChangePage:l,handleChangeRowsPerPage:o,page:i,rowsPerPage:c,leads:n,deleteLead:m,dialog:h,openDialog:d,closeDialog:g,handleChange:t,lead:a,clearLead:u,submitLead:s,updateLead:f,handleDateChange:b,loading:v,openDrawer:C,closeDrawer:w,drawer:y,updateLeadState:N}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nuevo Deal")),r.a.createElement(J,{dialogNew:E,closeDialog:g,handleChange:t,lead:a,clearLead:u,submitLead:s}))},oe=function(e){var t=e.dialog,a=e.closeDialog,n=e.handleChange,l=e.dialogNew,o=e.client,c=void 0===o?{}:o,i=e.submitClient,s=e.deleteClient;return r.a.createElement(p.g,{open:l||t,onClose:a,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,l?"Agregar cliente":"Editar ".concat(c.bussinessName)),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessName",label:"Nombre de la empresa",value:c.bussinessName,onChange:n}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessAddress",label:"Direcci\xf3n",value:c.bussinessAddress,onChange:n})),r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessRole",label:"Giro",value:c.bussinessRole,onChange:n}),r.a.createElement(p.L,{className:"text-field",type:"text",id:"industry",label:"Industria",value:c.industry,onChange:n}),r.a.createElement(p.n,{className:"text-field"},r.a.createElement(p.s,{shrink:!0,htmlFor:"origin"},"Origen"),r.a.createElement(p.B,{required:!0,value:c.origin,onChange:n,inputProps:{name:"Origen",id:"origin"}},r.a.createElement(p.z,{value:"",disabled:!0},r.a.createElement("em",null,"Selecciona  ")),r.a.createElement(p.z,{value:"Nacional"},"Nacional"),r.a.createElement(p.z,{value:"Extranjero"},"Extranjero"))),r.a.createElement(p.L,{required:!0,type:"number",className:"text-field",id:"bussinessEmployees",label:"No. de empleados",value:c.bussinessEmployees,onChange:n})))),l?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:i,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:function(){return s(c._id)},color:"secondary",variant:"contained"},"Borrar"),r.a.createElement(p.c,{onClick:function(){return i("update")},color:"primary",variant:"contained"},"Actualizar")))},ce=function(e){var t=e.rowsPerPage,a=e.page,l=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.dialog,i=e.closeDialog,s=e.handleChange,u=e.openDialog,m=e.loading,d=e.client,g=e.clients,h=void 0===g?[]:g,E=e.submitClient,f=e.deleteClient,b=Object(n.useState)(""),C=Object(v.a)(b,2),w=C[0],y=C[1];return r.a.createElement("div",null,r.a.createElement(p.A,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"Clientes"),r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return y(e.target.value)},value:w,id:"search-on-table",label:"Folio/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(P.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Ver/Editar"),r.a.createElement(p.G,null,"ID"),r.a.createElement(p.G,null,"Nombre"),r.a.createElement(p.G,null,"Direcci\xf3n"),r.a.createElement(p.G,null,"Giro"),r.a.createElement(p.G,null,"Industria"),r.a.createElement(p.G,null,"Origen"),r.a.createElement(p.G,null,"Empleados"))),r.a.createElement(p.F,null,h.length?h.map(function(e,t){return t<10*a+10&&t>=10*a&&e.active?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){return u(e,"update")},variant:"extended",color:"primary",size:"small"},r.a.createElement(P.h,{fontSize:"small"}))),r.a.createElement(p.G,null,"ID"),r.a.createElement(p.G,{component:"th",scope:"row"},e.bussinessName),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},e.bussinessAddress),r.a.createElement(p.G,null,e.bussinessRole),r.a.createElement(p.G,null,e.industry),r.a.createElement(p.G,null,e.origin),r.a.createElement(p.G,null,e.bussinessEmployees)):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},m?"Cargando...":"No hay clientes"),r.a.createElement(p.G,{component:"th",scope:"row"},m?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:h?h.length:0,rowsPerPage:t,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:l,onChangeRowsPerPage:o})),r.a.createElement(oe,{dialog:c,closeDialog:i,handleChange:s,client:d,submitClient:E,deleteClient:f}))},ie="https://crm-fss.herokuapp.com/clients",se=function(e){return k.a.post("".concat(ie,"/updateClient/").concat(e._id),e).then(function(e){return e}).catch(function(e){return e})},ue=function(e){return k.a.post("".concat(ie,"/newClient"),e).then(function(e){return e}).catch(function(e){return e})},me=function(){return k.a.get("".concat(ie,"/allClients")).then(function(e){return e}).catch(function(e){return e})},de=function(e){return k.a.post("".concat(ie,"/deleteClient/").concat(e)).then(function(e){return e}).catch(function(e){return e})},ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},client:{},clients:[],loading:!0,page:0,rowsPerPage:10,message:String,dialog:!1,dialogNew:!1,open:!1},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){return a.getClients()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.handleChange=function(e){var t=a.state.client;if("Origen"===e.target.name)return t.origin=e.target.value,a.setState({client:t});t[e.target.id]=e.target.value,a.setState({client:t})},a.getClients=function(){return me().then(function(e){return a.setState({clients:e.data.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},a.submitClient=function(e){var t=a.state.client;if("update"===e)return se(t).then(function(e){return a.setState({dialog:!1,open:!0,message:"Cliente actualizado"},a.getClients)}).catch(function(e){return console.log(e)});ue(t).then(function(e){return a.setState({dialogNew:!1,open:!0,message:"Cliente agregado"},a.getClients)}).catch(function(e){return console.log(e)})},a.deleteClient=function(e){de(e).then(function(e){return a.setState({dialog:!1,open:!0,message:"Cliente eliminado"},a.getClients)}).catch(function(e){return e})},a.close=function(){return a.setState({open:!1})},a.openDialog=function(e,t){"update"===t?a.setState({dialog:!0,client:e}):a.setState({dialogNew:!0,client:{}})},a.closeDialog=function(){return a.setState({dialog:!1,dialogNew:!1},a.getClients)},a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({rowsPerPage:e.target.value})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.page,n=e.rowsPerPage,l=e.message,o=e.dialog,c=e.dialogNew,i=e.open,s=e.clients,u=e.client,m=this.close,d=this.openDialog,g=this.closeDialog,h=this.handleChangePage,E=this.handleChangeRowsPerPage,f=this.submitClient,b=this.handleChange,v=this.deleteClient;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(ce,{handleChangePage:h,handleChangeRowsPerPage:E,page:a,rowsPerPage:n,dialog:o,loading:t,clients:s,client:u,handleChange:b,submitClient:f,openDialog:d,closeDialog:g,deleteClient:v}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nuevo cliente")),r.a.createElement(oe,{client:u,dialogNew:c,closeDialog:g,handleChange:b,submitClient:f}),r.a.createElement(Z,{close:m,message:l,open:i}))}}]),t}(n.Component),pe=function(e){var t=e.value,a=e.handleChange,n=e.lead,l=e.leads,o=e.handleChangePage,c=e.handleChangeRowsPerPage,i=e.handleClose,s=e.rowsPerPage,u=e.page,m=e.submitLead,d=e.getLeads,g=e.clearLead,p=e.deleteLead,h=e.openDialog,E=e.closeDialog,f=e.dialog,b=e.updateLead,v=e.dialogNew,C=e.handleDateChange,w=(e.quotations,e.quotation,e.loading),y=e.openDrawer,N=e.closeDrawer,P=e.drawer,S=e.updateLeadState;return r.a.createElement("div",{className:"tab-content"},0===t?r.a.createElement(le,{handleChange:a,handleChangePage:o,handleChangeRowsPerPage:c,page:u,rowsPerPage:s,lead:n,leads:l,handleClose:i,submitLead:m,getLeads:d,clearLead:g,deleteLead:p,openDialog:h,closeDialog:E,dialog:f,dialogNew:v,updateLead:b,handleDateChange:C,loading:w,openDrawer:y,closeDrawer:N,drawer:P,updateLeadState:S}):1===t?r.a.createElement(ge,null):"otro")},he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,lead:{},leads:[],quotation:{},quotations:[],user:{},page:0,rowsPerPage:10,message:String,open:!1,dialog:!1,dialogNew:!1,loading:!0,drawer:!1},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){return a.getLeads()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.handleChange=function(e){var t=a.state.lead;return"Origen"===e.target.name?(t.origin=e.target.value,a.setState({lead:t})):"clientName"===e.target.name?(t.clientName=e.target.value,a.setState({lead:t})):(t[e.target.name]=e.target.value,void a.setState({lead:t}))},a.handleDateChange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(l){var o=t;if(null!==r){var c=t;return c.quotDate=l,a.setState({quotation:c},function(){return a.updateQuot(e)})}return null===n?(o.meetingDate=l,a.setState({lead:o},function(){return a.updateLead(e)})):"status"===l.target.name?(o.status=l.target.value,a.setState({lead:o},function(){a.updateLead(e),a.getLeads()})):void 0}},a.getLeads=function(){var e=a.state.user;W(e._id).then(function(e){return a.setState({leads:e.data.leads.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},a.submitLead=function(){var e=a.state,t=e.user,n=e.lead,r=e.leads,l=void 0===r?[]:r;n.commentPostedBy=t._id,n.prefix="LD",n.seller=t.name[0].toUpperCase()+t.name[1].toUpperCase(),n.number=l.length>0?l[0].number+1:1,H(t._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),a.getLeads(t._id),a.setState({dialogNew:!1,open:!0,message:"Lead creado"},a.clearLead)}).catch(function(e){return console.log(e)})},a.updateLead=function(e){var t=a.state.lead;Y(e,t).then(function(e){a.setState({dialog:!1,open:!0,message:"Actualizado correctamente"})}).catch(function(e){return console.log(e)})},a.clearLead=function(){var e=a.state.lead;Object.keys(e).map(function(t){return e[t]=""}),a.setState({lead:e})},a.deleteLead=function(e){var t=a.state.user,n={id:e};Q(n).then(function(e){return e}).catch(function(e){return console.log(e)}),V(t._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),a.getLeads(),a.setState({dialog:!1,open:!0,message:"Lead eliminado"})}).catch(function(e){return console.log(e)})},a.handleTabs=function(e,t){return a.setState({value:t})},a.close=function(){return a.setState({open:!1})},a.openDialog=function(e,t){"update"===t?a.setState({dialog:!0,lead:e}):"updateQuot"===t?a.setState({dialog:!0,quotation:e}):a.setState({dialogNew:!0,lead:{}})},a.closeDialog=function(){a.setState({dialog:!1,dialogNew:!1},a.getLeads)},a.openDrawer=function(e){return a.setState({drawer:!0,lead:e})},a.closeDrawer=function(){return a.setState({drawer:!1,lead:{}})},a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({rowsPerPage:e.target.value})},a.updateLeadState=function(e){a.setState({lead:e},function(){return a.getLeads()})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.value,n=t.message,l=t.page,o=t.rowsPerPage,c=t.lead,i=t.user,s=t.open,u=t.leads,m=t.dialog,d=t.dialogNew,g=t.client,h=t.quotations,E=t.loading,f=t.drawer,b=t.quotation,v=this.handleTabs,C=this.handleChange,w=this.handleChangePage,y=this.handleChangeRowsPerPage,N=this.close,P=this.submitLead,S=this.getLeads,L=this.clearLead,D=this.deleteLead,O=this.closeDialog,x=this.openDialog,k=this.updateLead,j=this.handleDateChange,G=this.openDrawer,I=this.closeDrawer,A=this.updateLeadState;return r.a.createElement("div",{className:e.salesMenuRoot},r.a.createElement(p.a,{position:"static",color:"default"},r.a.createElement(p.K,{value:a,onChange:v,indicatorColor:"primary",textColor:"primary"},r.a.createElement(p.D,{onClick:S,label:"Oportunidad de venta"}),r.a.createElement(p.D,{label:"Administrar clientes"}),r.a.createElement(p.D,{label:"Formalizar cuentas"}),r.a.createElement(p.D,{label:"Supervisar implementaci\xf3n del servicio"}),r.a.createElement(p.D,{label:"Quejas/Sugerencias"}))),r.a.createElement(pe,{value:a,handleChange:C,handleChangePage:w,handleChangeRowsPerPage:y,page:l,rowsPerPage:o,lead:c,leads:u,user:i,submitLead:P,getLeads:S,clearLead:L,deleteLead:D,dialog:m,openDialog:x,closeDialog:O,dialogNew:d,updateLead:k,handleDateChange:j,client:g,quotations:h,quotation:b,loading:E,openDrawer:G,closeDrawer:I,drawer:f,updateLeadState:A}),r.a.createElement(Z,{close:N,message:n,open:s}))}}]),t}(n.Component),Ee=Object(f.withStyles)(E)(he);a(109);a(255);var fe=function(e){var t=e.leads,a=e.page,l=e.rowsPerPage,o=e.handleChangePage,c=e.loading,i=e.orderById,s=Object(n.useState)([]),u=Object(v.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(""),h=Object(v.a)(g,2),E=h[0],f=h[1];return Object(n.useEffect)(function(){d(t)}),r.a.createElement("div",{style:{marginTop:"1em"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return f(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(P.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,null," ",r.a.createElement("span",{className:"order-cell",onClick:i},"ID")),r.a.createElement(p.G,null,"Empresa"),r.a.createElement(p.G,null,"Estatus"),r.a.createElement(p.G,null,"Reuni\xf3n"))),r.a.createElement(p.F,null,m.length?m.filter(function(e){return e.prefix.concat("-",e.seller,"-",e.number).includes(E.toUpperCase())||e.bussinessName.toLowerCase().includes(E.toLowerCase())}).map(function(e,t){return t<5*a+5&&t>=5*a?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,null,"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),r.a.createElement(p.G,null,e.bussinessName),r.a.createElement(p.G,null,e.status),r.a.createElement(p.N,{disableFocusListener:!0,title:ae()(e.meetingDate).format("d/MMMM/Y h:m a"),placement:"right"},r.a.createElement(p.G,null,ae()(e.meetingDate).fromNow()))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},c?"Cargando...":"No hay leads"),r.a.createElement(p.G,{component:"th",scope:"row"},c?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):"")))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:t?t.length:0,rowsPerPage:l,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:o}))},be=a(169),ve=a(270),Ce=a.n(ve);be.b.addAdapter(Ce.a);var we=function(e){var t=e.propuesta,a=e.negociacion,n=e.confirmacion,l=e.perdida,o=e.ganada;return r.a.createElement("div",null,r.a.createElement(be.a,{data:[["Propuesta",t],["Negociaci\xf3n",a],["Confirmaci\xf3n de pedido (Ganada)",n],["Perdida",l],["Primer cobro",o]],messages:{empty:"No hay datos"}}))},ye=function(e){var t=e.leads,a=e.page,n=e.rowsPerPage,l=e.handleChangePage,o=e.loading,c=e.orderById,i=e.summaryData;return r.a.createElement("div",{className:"cards"},r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Leads"),r.a.createElement(fe,{leads:t,loading:o,page:a,rowsPerPage:n,handleChangePage:l,orderById:c})),r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"General"),r.a.createElement("div",{className:"general-info"},r.a.createElement(we,i))))},Ne=function(){return k.a.get("".concat("https://crm-fss.herokuapp.com/general","/getSellers")).then(function(e){return e}).catch(function(e){return e})},Pe=function(e){var t=e.sellers;return r.a.createElement("div",{className:"cards employees-resume"},r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Vendedores"),r.a.createElement(p.u,{className:"employees-detail"},t?t.map(function(e,t){return r.a.createElement(p.v,{key:t},r.a.createElement(p.b,{alt:"profile-mini-pic",src:e.photoURL}),r.a.createElement(p.x,{primary:e.name,secondary:"Leads:".concat(e.leads.length," , Cotizaciones: 0")}))}):r.a.createElement("div",{className:"employees-detail"},"No hay vendedores"))))},Se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},loading:!0,leads:[],page:0,rowsPerPage:5,summaryData:{},sellers:[]},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){a.getLeads(),a.getEmployees()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.getSummaryData=function(){var e=a.state.leads,t={propuesta:e.reduce(function(e,t){return"Propuesta"===t.status&&e++,e},0),negociacion:e.reduce(function(e,t){return"Negociaci\xf3n"===t.status&&e++,e},0),confirmacion:e.reduce(function(e,t){return"Confirmaci\xf3n de pedido"===t.status&&e++,e},0),perdida:e.reduce(function(e,t){return"Perdida"===t.status&&e++,e},0),ganada:e.reduce(function(e,t){return"Primer Cobro"===t.status&&e++,e},0)};a.setState({summaryData:t})},a.getLeads=function(){var e=a.state.user;W(e._id).then(function(e){return a.setState({leads:e.data.leads,loading:!1},a.getSummaryData)}).catch(function(e){return console.log(e)})},a.getEmployees=function(){Ne().then(function(e){return a.setState({sellers:e.data})}).catch(function(e){return console.log(e)})},a.handleChangePage=function(e,t){return a.setState({page:t})},a.orderById=function(){var e=a.state.leads;e=e.reverse(),a.setState({leads:e})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.leads,n=e.page,l=e.rowsPerPage,o=e.summaryData,c=e.sellers,i=this.handleChangePage,s=this.orderById;return r.a.createElement("div",{className:"dashboard-layout"},r.a.createElement(ye,{leads:a,loading:t,page:n,rowsPerPage:l,handleChangePage:i,orderById:s,summaryData:o}),r.a.createElement(p.k,{style:{marginTop:"1rem"}}),r.a.createElement("small",null,"Administraci\xf3n"),r.a.createElement(Pe,{sellers:c}))}}]),t}(n.Component),Le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,direction:"left",location:"root",user:{},message:String},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e})},a.handleDrawerOpen=function(){return a.setState({open:!0,direction:"left"})},a.handleDrawerClose=function(){return a.setState({open:!1,direction:"right"})},a.handleLocation=function(e){return a.setState({location:e})},a.toHome=function(){return a.setState({location:"root"})},a.updateUser=function(e){B(e._id,e),a.setState({user:e})},a.closeSession=function(){return A().then(function(e){var t=a.props.history;return localStorage.removeItem("user"),t.push("/login")}).catch(function(e){return e})},a.close=function(){return a.setState({open:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,a=e.direction,n=e.location,l=e.user,o=this.handleDrawerClose,c=this.handleDrawerOpen,i=this.handleLocation,s=this.updateUser,u=this.toHome,m=this.closeSession,d=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:"root"},r.a.createElement(p.f,null),r.a.createElement(S,Object.assign({handleDrawerOpen:c,toHome:u,open:t,classes:d,closeSession:m,handleLocation:i},l)),r.a.createElement(L,{handleDrawerClose:o,location:n,open:t,direction:a,classes:d,handleLocation:i}),r.a.createElement("main",{onClick:o,className:d.content},r.a.createElement("div",{className:d.toolbar}),"root"===n?r.a.createElement(Se,null):"ventas"===n?r.a.createElement(Ee,null):"profile"===n?r.a.createElement(z,{updateUser:s}):"Not root")))}}]),t}(n.Component),De=Object(f.withStyles)(E,{withTheme:!0})(Le),Oe=(a(263),a(5812),a(111)),xe=a.n(Oe),ke=a(59),je=a.n(ke),Ge=a(42),Ie=a.n(Ge),Ae=a(5814),Be=function(){return r.a.createElement(xe.a,{position:"static"},r.a.createElement(je.a,{className:"grow"},r.a.createElement(Ae.a,{to:"/login"},r.a.createElement("img",{style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),r.a.createElement(Ie.a,{color:"inherit"},r.a.createElement(Ae.a,{style:{color:"white"},to:"/login"},"Iniciar sesi\xf3n"))))},qe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},message:String,open:!1,showPassword:!1},a.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return a.setState({user:{},isAuth:!1});a.props.history.push("/home")},a.handleChange=function(e){var t=a.state.user;t[e.target.id]=e.target.value,a.setState({user:t})},a.handleSubmit=function(){var e=a.state.user;I(e).then(function(e){return 500===e.status?a.setState({open:!0,message:e.data.message}):404===e.status?a.setState({open:!0,message:"Nombre de usuario o contrase\xf1a incorrectos"}):(localStorage.setItem("user",JSON.stringify(e)),a.setState({open:!0,message:"Inicio de sesi\xf3n correcto, \xa1Bienvenido(a)!"}),void a.props.history.push("/home"))}).catch(function(e){return a.setState({open:!0,message:e})})},a.close=function(){return a.setState({open:!1})},a.togglePassword=function(){return a.setState({showPassword:!a.state.showPassword})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.message,n=e.open,l=e.showPassword,o=this.handleChange,c=this.handleSubmit,i=this.close,s=this.togglePassword;return r.a.createElement("div",null,r.a.createElement(Be,null),r.a.createElement("div",{className:"landing-image"}),r.a.createElement(p.A,{className:"paper-signup"},r.a.createElement("h2",null,"Ingresa a tu cuenta"),r.a.createElement("img",{style:{filter:"invert(100%)",width:"200px"},src:"/logo.png",alt:"fss-logo"}),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.L,{id:"email",label:"Email",value:t.email,onChange:o,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.L,{id:"password",type:l?"text":"password",label:"Contrase\xf1a",value:t.password,onChange:o,margin:"normal",InputProps:{endAdornment:r.a.createElement(p.r,{position:"end"},r.a.createElement(p.p,{"aria-label":"Toggle password visibility",onClick:s},l?r.a.createElement(P.n,null):r.a.createElement(P.m,null)))}})),r.a.createElement(p.c,{onClick:c,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Iniciar sesi\xf3n")),r.a.createElement("small",null,"\xbfNo tienes una cuenta? ",r.a.createElement(Ae.a,{to:"/signup"},"Crea una aqu\xed"))),r.a.createElement(Z,{close:i,message:a,open:n}))}}]),t}(n.Component),Re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},message:String,open:!1,error:!1,errorPass:!1,disabledMail:!0,disabledPass:!0,showPassword:!1},a.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return a.setState({user:{},isAuth:!1});a.props.history.push("/app")},a.handleChange=function(e){var t=a.state.user;t[e.target.id]=e.target.value,a.setState({user:t})},a.handleSubmit=function(){if(document.getElementById("password").value.length<6)return a.setState({disabledPass:!0,open:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});var e=a.state.user;G(e).then(function(e){if(500===e.status)return a.setState({open:!0,message:"Ya existe un usuario con este correo"});localStorage.setItem("user",JSON.stringify(e)),a.setState({open:!0,message:"Registro correcto, \xa1Bienvenido(a)!"}),a.props.history.push("/home")}).catch(function(e){return a.setState({open:!0,message:e})})},a.close=function(){return a.setState({open:!1})},a.checkPassword=function(e){return function(e){return a.state.user.password===e.target.value?a.setState({disabledPass:!1,errorPass:!1}):(a.setState({disabledPass:!0,errorPass:!0}),!1)}},a.checkEmail=function(e){return function(e){if(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.target.value).toLowerCase()))return a.setState({disabledMail:!1,error:!1});a.setState({disabledMail:!0,error:!0})}},a.togglePassword=function(){return a.setState({showPassword:!a.state.showPassword})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.message,n=e.open,l=e.error,o=e.disabledMail,c=e.disabledPass,i=e.errorPass,s=e.showPassword,u=this.handleChange,m=this.handleSubmit,d=this.close,g=this.checkEmail,h=this.checkPassword,E=this.togglePassword;return r.a.createElement("div",null,r.a.createElement(Be,null),r.a.createElement("div",{className:"landing-image"}),r.a.createElement(p.A,{className:"paper-signup"},r.a.createElement("h2",null,"Registro de usuario"),r.a.createElement("img",{style:{filter:"invert(100%)",width:"200px"},src:"/logo.png",alt:"fss-logo"}),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.L,{id:"name",label:"Nombre",value:t.name,onChange:u,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.L,{id:"email",label:"Email",value:t.email,onChange:u,onBlur:g(),margin:"normal"})),r.a.createElement("div",null,l?r.a.createElement("small",{style:{color:"red"}},"Ingresa un correo v\xe1lido"):""),r.a.createElement("div",null,r.a.createElement(p.L,{id:"password",type:s?"text":"password",label:"Contrase\xf1a",value:t.password,onChange:u,margin:"normal",InputProps:{endAdornment:r.a.createElement(p.r,{position:"end"},r.a.createElement(p.p,{"aria-label":"Toggle password visibility",onClick:E},s?r.a.createElement(P.n,null):r.a.createElement(P.m,null)))}})," ",r.a.createElement("br",null),r.a.createElement("small",{style:{fontSize:"0.7rem",color:"rgb(0, 82, 136)",marginTop:"-5px;"}},"M\xednimo 6 caracteres")),r.a.createElement("div",null,r.a.createElement(p.L,{id:"repeat-password",label:"Repite tu contrase\xf1a",type:s?"text":"password",onChange:h(),onBlur:h(),margin:"normal"})),r.a.createElement("div",null,i?r.a.createElement("small",{style:{color:"red"}},"La contrase\xf1a no coincide"):""),r.a.createElement(p.c,{disabled:o||c,onClick:m,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Registrarme")),r.a.createElement("small",null,"\xbfYa tienes una cuenta? ",r.a.createElement(Ae.a,{to:"login"},"Inicia sesi\xf3n"))),r.a.createElement(Z,{close:d,message:a,open:n}))}}]),t}(n.Component),ze=function(){return r.a.createElement(d.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:qe}),r.a.createElement(g.a,{path:"/login",component:qe}),r.a.createElement(g.a,{path:"/home",component:De}),r.a.createElement(g.a,{path:"/signup",component:Re}))},Ue=Object(f.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#1976d2"},secondary:{main:"#c62828"}}}),Me=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(f.MuiThemeProvider,{theme:Ue},r.a.createElement("div",{className:"App"},r.a.createElement(ze,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=a(5816);o.a.render(r.a.createElement(function(){return r.a.createElement(Fe.a,null,r.a.createElement(Me,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},73:function(e,t,a){}},[[5521,1,2]]]);
//# sourceMappingURL=main.68d8bd7e.chunk.js.map