(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{234:function(e,a,t){},5498:function(e,a,t){e.exports=t(5748)},5503:function(e,a,t){},5504:function(e,a,t){},5505:function(e,a,t){},5660:function(e,a,t){},5747:function(e,a,t){},5748:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(20),o=t.n(r),c=(t(5503),t(29)),i=t(30),s=t(32),u=t(31),m=t(33),d=(t(5504),t(5753)),g=t(5750),p=t(1),h=t(235),E=t(34),f=function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:10},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(E.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},e.breakpoints.up("sm"),{width:9*e.spacing.unit+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,marginLeft:"73px"},bigAvatar:{margin:10,width:60,height:60},flexGrow:{flexGrow:1},salesMenuRoot:{marginTop:"-20px",flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,textAlign:"left"},container:{display:"flex",flexWrap:"wrap"}}},C=t(18),v=t(107),b=t.n(v),w=t(8),y=t.n(w),N=(t(5505),Object(C.withStyles)(f,{withTheme:!0})(function(e){var a=e.classes,t=e.open,n=e.handleDrawerOpen,r=e.photoURL,o=e.role,c=e.toHome;return l.a.createElement(p.a,{position:"fixed",className:y()(a.appBar,Object(E.a)({},a.appBarShift,t))},l.a.createElement(p.I,{className:"navbar-distribution",disableGutters:!t},l.a.createElement("div",{className:"left-items"},l.a.createElement(p.p,{color:"inherit","aria-label":"Open drawer",onClick:n,className:y()(a.menuButton,Object(E.a)({},a.hide,t))},l.a.createElement(b.a,null)),l.a.createElement("img",{onClick:c,style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),l.a.createElement("div",{className:"profile-circled"},l.a.createElement(p.d,{className:"chip-color",clickable:!0,avatar:l.a.createElement(p.b,{alt:"profile-mini-pic",src:r}),label:o}))))})),P=t(21),L=Object(C.withStyles)(f,{withTheme:!0})(function(e){var a,t,n=e.open,r=e.direction,o=e.handleDrawerClose,c=e.classes,i=e.location,s=e.handleLocation;return l.a.createElement(p.l,{variant:"permanent",className:y()(c.drawer,(a={},Object(E.a)(a,c.drawerOpen,n),Object(E.a)(a,c.drawerClose,!n),a)),classes:{paper:y()((t={},Object(E.a)(t,c.drawerOpen,n),Object(E.a)(t,c.drawerClose,!n),t))},open:n},l.a.createElement("div",{className:c.toolbar},l.a.createElement(p.p,{onClick:o},"right"===r?l.a.createElement(P.d,null):l.a.createElement(P.c,null))),l.a.createElement(p.k,null),l.a.createElement(p.r,{component:"nav"},l.a.createElement(p.s,{selected:"root"===i,onClick:function(){return s("root")},button:!0},n?l.a.createElement(p.t,null,l.a.createElement(P.i,null)):l.a.createElement(p.J,{title:"Resumen",placement:"right-start"},l.a.createElement(p.t,null,l.a.createElement(P.i,null))),l.a.createElement(p.u,{primary:"Resumen"})),l.a.createElement(p.s,{selected:"ventas"===i,onClick:function(){return s("ventas")},button:!0},n?l.a.createElement(p.t,null,l.a.createElement(P.a,null)):l.a.createElement(p.J,{title:"Ventas",placement:"right-start"},l.a.createElement(p.t,null,l.a.createElement(P.a,null))),l.a.createElement(p.u,{primary:"Ventas"}))),l.a.createElement(p.k,null),l.a.createElement(p.r,{component:"nav"},l.a.createElement(p.s,{selected:"profile"===i,onClick:function(){return s("profile")},button:!0},n?l.a.createElement(p.t,null,l.a.createElement(P.h,null)):l.a.createElement(p.J,{title:"Perfil",placement:"right-start"},l.a.createElement(p.t,null,l.a.createElement(P.h,null))),l.a.createElement(p.u,{primary:"Perfil"}))))}),S=(t(5660),t(155));S.initializeApp({apiKey:"AIzaSyDiJ--AaTzWP3NdW1j6Zo4wvB17x1Cr2nk",authDomain:"fss-react.firebaseapp.com",databaseURL:"https://fss-react.firebaseio.com",projectId:"fss-react",storageBucket:"fss-react.appspot.com",messagingSenderId:"18829816109"});var D=S,x=t(36),k=t.n(x),O="https://crm-fss.herokuapp.com/auth",j=function(e){return k.a.post("".concat(O,"/signup"),e,{}).then(function(e){return e.data}).catch(function(e){return e.response})},R=function(e){return k.a.post("".concat(O,"/login"),e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return e.response})},I=function(){return k.a.get("".concat(O,"/logout")).then(function(e){return e.data}).catch(function(e){return e.response})},H=function(e,a){return k.a.post("".concat(O,"/updateUser/").concat(e),a,{}).then(function(e){return e.data}).catch(function(e){return e.response})},A=t(5752),q=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={open:!1,direction:"left",location:"root",user:{},message:String,progress:0},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e})},t.handleChange=function(e){var a=t.state.user;switch(e.target.id){case"name":a.name=e.target.value;break;case"email":a.email=e.target.value;break;default:return}t.setState({user:a})},t.uploadPhoto=function(e){var a=t.state.user,n=e.target.files[0],l=D.storage().ref("profilePics/".concat(a.name,"-").concat(a._id)).child(n.name).put(n);l.on("state_changed",function(e){var a=e.bytesTransferred/e.totalBytes*100;a=Math.floor(a),t.setState({progress:a})}),l.then(function(e){return e.ref.getDownloadURL()}).then(function(e){a.photoURL=e,localStorage.setItem("user",JSON.stringify(a)),t.props.updateUser(a),t.setState({user:a,progress:0,open:!0,message:"Foto de perfil actualizada"})})},t.clickInput=function(){document.getElementById("photoUpload").click()},t.closeSession=function(){return I().then(function(e){var a=t.props.history;return localStorage.removeItem("user"),a.push("/login")}).catch(function(e){return e})},t.close=function(){return t.setState({open:!1})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.open,t=e.user,n=e.message,r=e.progress,o=this.handleChange,c=this.close,i=this.uploadPhoto,s=this.clickInput,u=this.closeSession;return l.a.createElement("div",null,l.a.createElement(p.w,{className:"paper-profile"},l.a.createElement("h2",null,"Perfil de ",t.name),t.photoURL?r>0?l.a.createElement(p.e,{variant:"determinate",value:r}):l.a.createElement("div",{onClick:s,style:{backgroundImage:"url(".concat(t.photoURL,")")},className:"profile-picture"},l.a.createElement("span",null,l.a.createElement(P.b,null),l.a.createElement("p",null,"Editar"))):l.a.createElement(p.e,null),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(p.H,{InputLabelProps:{shrink:!0},disabled:!0,id:"email",label:"Email",value:t.email,onChange:o,margin:"normal"})),l.a.createElement("div",null,l.a.createElement(p.H,{InputLabelProps:{shrink:!0},id:"name",label:"Nombre",value:t.name,onChange:o,margin:"normal"})),l.a.createElement("input",{onChange:i,type:"file",name:"photoURL",id:"photoUpload",style:{display:"none"}})),l.a.createElement(p.c,{style:{margin:"2rem 0"},onClick:u,variant:"contained",color:"secondary"},"Cerrar sesi\xf3n",l.a.createElement(P.g,{style:{marginLeft:"0.5rem"}}))),l.a.createElement(p.y,{open:a,message:n,close:c}))}}]),a}(n.Component),z=Object(A.a)(q),B=(t(80),t(40)),T=t(68),U=t(67),_=t.n(U),J=t(240),F=function(e){var a=e.dialog,t=e.closeDialog,n=e.handleChange,r=e.lead,o=e.clearLead,c=e.submitLead,i=e.updateLead,s=e.dialogNew,u=e.closeDrawer;return l.a.createElement(p.g,{open:s||a,onClose:t,"aria-labelledby":"new-form"},l.a.createElement(p.j,null,s?"Nuevo Lead":"Editar ".concat(r.bussinessName)),l.a.createElement(p.i,null,l.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},l.a.createElement("div",null,l.a.createElement(p.H,{required:!0,className:"text-field",id:"bussinessName",label:"Nombre de la empresa",value:r.bussinessName,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"bussinessRole",label:"Giro de la empresa",value:r.bussinessRole,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"bussinessAddress",label:"Direcci\xf3n",value:r.bussinessAddress,onChange:n})),l.a.createElement("div",null,l.a.createElement(p.H,{required:!0,className:"text-field",id:"industry",label:"Industria",value:r.industry,onChange:n}),l.a.createElement(p.n,{className:"text-field"},l.a.createElement(p.q,{shrink:!0,htmlFor:"origin"},"Origen"),l.a.createElement(p.x,{required:!0,value:r.origin,onChange:n,inputProps:{name:"Origen",id:"origin"}},l.a.createElement(p.v,{value:"",disabled:!0},l.a.createElement("em",null,"Selecciona  ")),l.a.createElement(p.v,{value:"Nacional"},"Nacional"),l.a.createElement(p.v,{value:"Extranjero"},"Extranjero"))),l.a.createElement(p.H,{required:!0,type:"number",className:"text-field",id:"bussinessEmployees",label:"No. de empleados",value:r.bussinessEmployees,onChange:n})),l.a.createElement("div",null,l.a.createElement(p.H,{required:!0,className:"text-field",id:"contactName",label:"Nombre del contacto",value:r.contactName,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"contactPosition",label:"Puesto del contacto",value:r.contactPosition,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"contactPhone",label:"Tel\xe9fono",value:r.contactPhone,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",type:"email",id:"contactEmail",label:"Email",value:r.contactEmail,onChange:n}),l.a.createElement(p.H,{className:"text-field",type:"text",id:"commentText",label:"Comentarios",value:r.commentText,onChange:n})))),s?l.a.createElement(p.h,null,l.a.createElement(p.c,{onClick:t},"Cancelar"),l.a.createElement(p.c,{onClick:o,variant:"outlined"},"Limpiar"),l.a.createElement(p.c,{onClick:c,color:"primary",variant:"contained"},"Agregar")):l.a.createElement(p.h,null,l.a.createElement(p.c,{onClick:function(){t(),u()}},"Cancelar"),l.a.createElement(p.c,{onClick:function(){i(r._id)},color:"primary",variant:"contained"},"Actualizar")))},G=function(e){var a=e.drawer,t=e.closeDrawer,r=(e.leads,e.lead),o=e.deleteLead,c=e.handleChange,i=(e.handleDateChange,e.loading,e.updateLead),s=e.dialog,u=e.closeDialog,m=e.openDialog,d=Object(n.useState)(!1),g=Object(J.a)(d,2),h=g[0],E=g[1],f=function(){return E(!h)};return l.a.createElement(p.l,{anchor:"right",open:a,onClose:t},l.a.createElement("div",{className:"drawer-layout"},l.a.createElement("h2",null,"Detalles de ",r.bussinessName),l.a.createElement("p",{className:"drawer-status"},r.status),l.a.createElement(p.k,{variant:"middle"}),l.a.createElement("div",{className:"drawer-two-columns"},l.a.createElement("div",{className:"left-column"},l.a.createElement("p",{className:"small-font"},"Contacto:"),l.a.createElement("p",{className:"blue-font"},r.contactName?r.contactName:"Ninguno",l.a.createElement("small",{style:{color:"gray"}}," (",r.contactPosition?r.contactPosition:"-",")")),l.a.createElement("p",{className:"small-font"},"Tel\xe9fono:"),l.a.createElement("p",{className:"blue-font"},r.contactPhone?r.contactPhone:"-"),l.a.createElement("p",{className:"small-font"},"Email:"),l.a.createElement("p",{className:"blue-font"},r.contactEmail?r.contactEmail:"Sin email"),l.a.createElement("p",{className:"small-font"},"Direcci\xf3n:"),l.a.createElement("p",{className:"blue-font"},r.bussinessAddress?r.bussinessAddress:"Sin direcci\xf3n")),l.a.createElement("div",{className:"right-column"},l.a.createElement("p",{className:"small-font"},"Giro:"),l.a.createElement("p",{className:"blue-font"},r.bussinessRole?r.bussinessRole:"Sin giro"),l.a.createElement("p",{className:"small-font"},"Industria:"),l.a.createElement("p",{className:"blue-font"},r.industry?r.industry:"Sin industria"),l.a.createElement("p",{className:"small-font"},"Origen:"),l.a.createElement("p",{className:"blue-font"},r.origin?r.origin:"Sin origen"),l.a.createElement("p",{className:"small-font"},"Empleados:"),l.a.createElement("p",{className:"blue-font"},r.bussinessEmployees?r.bussinessEmployees:"Sin empleados"))),l.a.createElement(p.k,{variant:"middle"}),l.a.createElement("div",{className:""},l.a.createElement("p",{className:"small-font"},"Comentarios:"),l.a.createElement("p",{className:"blue-font"},r.commentText),l.a.createElement(p.k,null),l.a.createElement("p",{className:"small-font"},"Archivos:")),l.a.createElement("div",{className:"button-container"},l.a.createElement(p.c,{onClick:t},"Cerrar"),l.a.createElement(p.c,{onClick:f,variant:"contained",color:"secondary"},"Borrar"),l.a.createElement(p.c,{onClick:function(){m(r,"update")},variant:"contained",color:"primary"},"Editar"))),l.a.createElement(p.g,{open:h,onClose:f},l.a.createElement(p.j,null,"Eliminar ",r.bussinessName),l.a.createElement(p.h,null,l.a.createElement(p.c,{onClick:f,color:"primary"},"Cancelar"),l.a.createElement(p.c,{onClick:function(){o(r._id),f(),t()},color:"secondary",autoFocus:!0},"Eliminar"))),l.a.createElement(F,{closeDrawer:t,dialog:s,closeDialog:u,handleChange:c,lead:r,updateLead:i}))},M=function(e){var a=e.leads,t=e.rowsPerPage,n=e.page,r=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.deleteLead,i=e.dialog,s=e.closeDialog,u=e.handleChange,m=e.lead,d=(e.clearLead,e.submitLead,e.openDialog),g=e.updateLead,h=e.handleDateChange,E=e.loading,f=e.openDrawer,C=e.closeDrawer,v=e.drawer;return l.a.createElement("div",null,l.a.createElement(p.w,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},l.a.createElement("div",{style:{overflowX:"auto"}},l.a.createElement(p.A,null,l.a.createElement(p.D,null,l.a.createElement(p.F,null,l.a.createElement(p.C,{style:{width:"40px",padding:"8px"}},"Ver/Editar"),l.a.createElement(p.C,null,"ID"),l.a.createElement(p.C,null,"Empresa"),l.a.createElement(p.C,null,"Contacto"),l.a.createElement(p.C,null,"Tel\xe9fono"),l.a.createElement(p.C,null,"Email"),l.a.createElement(p.C,null,"Estatus"),l.a.createElement(p.C,null,"Reuni\xf3n"),l.a.createElement(p.C,{style:{width:"200px",padding:"0 45px"}}))),l.a.createElement(p.B,null,a.length?a.map(function(e,a){return a<10*n+10&&a>=10*n?l.a.createElement(p.F,{key:a},l.a.createElement(p.C,{style:{width:"40px",padding:"8px",textAlign:"center"}},l.a.createElement(p.m,{onClick:function(){return f(e)},variant:"extended",color:"primary",size:"small"},l.a.createElement(P.f,{fontSize:"small"}))),l.a.createElement(p.C,{style:{width:"200px",padding:"8px"}},"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),l.a.createElement(p.C,{component:"th",scope:"row"},e.bussinessName),l.a.createElement(p.C,null,e.contactName),l.a.createElement(p.C,null,l.a.createElement("a",{style:{color:"#1976d2"},href:"tel:+".concat(e.contactPhone)},e.contactPhone)),l.a.createElement(p.C,null,l.a.createElement("a",{style:{color:"#1976d2"},href:"mailto:".concat(e.contactEmail)},e.contactEmail)),l.a.createElement(p.C,null,l.a.createElement(p.n,null,l.a.createElement(p.x,{value:e.status,onChange:h(e._id,e,e.status),inputProps:{name:"status",id:"status"}},l.a.createElement(p.v,{value:"Propuesta"},"Propuesta"),l.a.createElement(p.v,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),l.a.createElement(p.v,{value:"Confirmaci\xf3n de pedido"},"Confirmaci\xf3n de pedido (Ganada)"),l.a.createElement(p.v,{value:"Perdida"},"Perdida"),l.a.createElement(p.v,{value:"Primer cobro"},"Primer cobro")))),l.a.createElement(p.C,{style:{width:"200px",padding:"8px"}},l.a.createElement(B.b,{utils:T.a,locale:_.a,views:["year"]},l.a.createElement(p.o,{container:!0,justify:"space-around"},l.a.createElement(B.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.meetingDate,onChange:h(e._id,e,null),format:"dd/MM/yyyy"})))),l.a.createElement(p.C,{style:{width:"200px",padding:"5px"}},l.a.createElement(B.b,{utils:T.a,locale:_.a},l.a.createElement(p.o,{container:!0,justify:"space-around"},l.a.createElement(B.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.meetingDate,onChange:h(e._id,e,null)}))))):""}):l.a.createElement(p.F,null,l.a.createElement(p.C,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},E?"Cargando...":"No hay leads"),l.a.createElement(p.C,{component:"th",scope:"row"},E?l.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),l.a.createElement(p.E,{rowsPerPageOptions:[5],component:"Table",count:a?a.length:0,rowsPerPage:t,page:n,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:r,onChangeRowsPerPage:o})),l.a.createElement(G,{drawer:v,closeDrawer:C,leads:a,deleteLead:c,handleChange:u,lead:m,updateLead:g,handleDateChange:h,loading:E,dialog:i,closeDialog:s,openDialog:d}))},W=function(e){var a=e.handleChange,t=e.lead,n=e.leads,r=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.rowsPerPage,i=e.page,s=e.submitLead,u=e.clearLead,m=e.deleteLead,d=e.openDialog,g=e.closeDialog,h=e.dialog,E=e.dialogNew,f=e.updateLead,C=e.handleDateChange,v=e.loading,b=e.openDrawer,w=e.closeDrawer,y=e.drawer;return l.a.createElement("div",{style:{margin:"1em 0"}},l.a.createElement("h4",null,"Leads"),l.a.createElement(M,{handleChangePage:r,handleChangeRowsPerPage:o,page:i,rowsPerPage:c,leads:n,deleteLead:m,dialog:h,openDialog:d,closeDialog:g,handleChange:a,lead:t,clearLead:u,submitLead:s,updateLead:f,handleDateChange:C,loading:v,openDrawer:b,closeDrawer:w,drawer:y}),l.a.createElement("div",null,l.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nuevo Lead")),l.a.createElement(F,{dialogNew:E,closeDialog:g,handleChange:a,lead:t,clearLead:u,submitLead:s}))},V=function(e){var a=e.dialog,t=e.closeDialog,n=e.handleChange,r=e.client,o=void 0===r?{}:r,c=e.clearLead,i=e.submitLead,s=e.updateLead,u=e.deleteLead,m=e.dialogNew;return l.a.createElement(p.g,{open:m||a,onClose:t,"aria-labelledby":"new-form"},l.a.createElement(p.j,null,m?"Nuevo Lead":"Editar ".concat(o.bussinessName)),l.a.createElement(p.i,null,l.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},l.a.createElement("div",null,l.a.createElement(p.H,{required:!0,className:"text-field",id:"bussinessName",label:"Nombre de la empresa",value:o.bussinessName,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"bussinessRole",label:"Giro de la empresa",value:o.bussinessRole,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"bussinessAddress",label:"Direcci\xf3n",value:o.bussinessAddress,onChange:n})),l.a.createElement("div",null,l.a.createElement(p.H,{required:!0,className:"text-field",id:"industry",label:"Industria",value:o.industry,onChange:n}),l.a.createElement(p.n,{className:"text-field"},l.a.createElement(p.q,{shrink:!0,htmlFor:"origin"},"Origen"),l.a.createElement(p.x,{required:!0,value:o.origin,onChange:n,inputProps:{name:"Origen",id:"origin"}},l.a.createElement(p.v,{value:"",disabled:!0},l.a.createElement("em",null,"Selecciona  ")),l.a.createElement(p.v,{value:"Nacional"},"Nacional"),l.a.createElement(p.v,{value:"Extranjero"},"Extranjero"))),l.a.createElement(p.H,{required:!0,type:"number",className:"text-field",id:"bussinessEmployees",label:"No. de empleados",value:o.bussinessEmployees,onChange:n})),l.a.createElement("div",null,l.a.createElement(p.H,{required:!0,className:"text-field",id:"contactName",label:"Nombre del contacto",value:o.contactName,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"contactPosition",label:"Puesto del contacto",value:o.contactPosition,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",id:"contactPhone",label:"Tel\xe9fono",value:o.contactPhone,onChange:n}),l.a.createElement(p.H,{required:!0,className:"text-field",type:"email",id:"contactEmail",label:"Email",value:o.contactEmail,onChange:n}),l.a.createElement(p.H,{className:"text-field",type:"text",id:"commentText",label:"Comentarios",value:o.commentText,onChange:n})))),m?l.a.createElement(p.h,null,l.a.createElement(p.c,{onClick:t},"Cancelar"),l.a.createElement(p.c,{onClick:c,variant:"outlined"},"Limpiar"),l.a.createElement(p.c,{onClick:i,color:"primary",variant:"contained"},"Agregar")):l.a.createElement(p.h,null,l.a.createElement(p.c,{onClick:t},"Cancelar"),l.a.createElement(p.c,{onClick:function(){return u(o._id)},color:"secondary",variant:"contained"},"Borrar"),l.a.createElement(p.c,{onClick:function(){return s(o._id)},color:"primary",variant:"contained"},"Actualizar")))},X=function(e){var a=e.rowsPerPage,t=e.page,n=e.handleChangePage,r=e.handleChangeRowsPerPage,o=e.deleteLead,c=e.dialog,i=e.closeDialog,s=e.handleChange,u=e.client,m=void 0===u?{}:u,d=e.clearLead,g=e.submitLead,h=e.openDialog,E=e.updateLead,f=e.handleDateChange,C=e.clients;return console.log(C),l.a.createElement("div",null,l.a.createElement(p.w,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},l.a.createElement("div",{style:{overflowX:"auto"}},l.a.createElement(p.A,null,l.a.createElement(p.D,null,l.a.createElement(p.F,null,l.a.createElement(p.C,null,"Folio"),l.a.createElement(p.C,null,"Empresa"),l.a.createElement(p.C,null,"Direcci\xf3n"),l.a.createElement(p.C,null,"Contacto"),l.a.createElement(p.C,null,"Reuni\xf3n"),l.a.createElement(p.C,null),l.a.createElement(p.C,null,"Tipo de requerimiento"),l.a.createElement(p.C,null,"Editar"))),l.a.createElement(p.B,null,C?C.map(function(e,a){return a<10*t+10&&a>=10*t?l.a.createElement(p.F,{key:a},l.a.createElement(p.C,null,e.folio),l.a.createElement(p.C,{component:"th",scope:"row"},e.clientName),l.a.createElement(p.C,{style:{width:"200px",padding:"8px"}},e.clientAddress),l.a.createElement(p.C,null,e.clientContact),l.a.createElement(p.C,{style:{width:"200px",padding:"8px"}},l.a.createElement(B.b,{utils:T.a,locale:_.a,views:["year"]},l.a.createElement(p.o,{container:!0,justify:"space-around"},l.a.createElement(B.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.meetingDate,onChange:f(e._id,e,null,"client"),format:"dd/MM/yyyy"})))),l.a.createElement(p.C,{style:{width:"200px",padding:"5px"}},l.a.createElement(B.b,{utils:T.a,locale:_.a},l.a.createElement(p.o,{container:!0,justify:"space-around"},l.a.createElement(B.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.meetingDate,onChange:f(e._id,e,null,"client")})))),l.a.createElement(p.C,null,e.reqType),l.a.createElement(p.C,null,l.a.createElement(P.f,{onClick:function(){return h(e,"clientUpdate")},style:{fontSize:"17px",cursor:"pointer"}}))):""}):l.a.createElement(p.F,null,l.a.createElement(p.C,{component:"th",scope:"row"},"No hay cotizaciones"),l.a.createElement(p.C,{component:"th",scope:"row"},l.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}})))))),l.a.createElement(p.E,{rowsPerPageOptions:[5],component:"Table",count:C?C.length:0,rowsPerPage:a,page:t,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:n,onChangeRowsPerPage:r})),l.a.createElement(V,{dialog:c,closeDialog:i,handleChange:s,client:m,deleteLead:o,clearLead:d,submitLead:g,updateLead:E}))},K=function(e){var a=e.handleChange,t=e.client,n=e.clients,r=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.rowsPerPage,i=e.page,s=e.submitLead,u=e.clearLead,m=e.deleteLead,d=e.openDialog,g=e.closeDialog,h=e.dialog,E=e.dialogNew,f=e.updateLead,C=e.handleDateChange;return l.a.createElement("div",{style:{margin:"1em 0"}},l.a.createElement("h4",null,"Cotizaciones"),l.a.createElement(X,{handleChangePage:r,handleChangeRowsPerPage:o,page:i,rowsPerPage:c,clients:n,deleteLead:m,dialog:h,openDialog:d,closeDialog:g,handleChange:a,client:t,clearLead:u,submitLead:s,updateLead:f,handleDateChange:C}),l.a.createElement("div",null,l.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nueva cotizaci\xf3n")),l.a.createElement(V,{dialogNew:E,closeDialog:g,handleChange:a,client:t,clearLead:u,submitLead:s}))},Q=function(e){var a=e.value,t=e.handleChange,n=e.lead,r=e.leads,o=e.handleChangePage,c=e.handleChangeRowsPerPage,i=e.handleClose,s=e.rowsPerPage,u=e.page,m=e.submitLead,d=e.getLeads,g=e.clearLead,p=e.deleteLead,h=e.openDialog,E=e.closeDialog,f=e.dialog,C=e.updateLead,v=e.dialogNew,b=e.handleDateChange,w=e.client,y=e.clients,N=e.loading,P=e.openDrawer,L=e.closeDrawer,S=e.drawer;return l.a.createElement("div",{className:"tab-content"},0===a?l.a.createElement(W,{handleChange:t,handleChangePage:o,handleChangeRowsPerPage:c,page:u,rowsPerPage:s,lead:n,leads:r,handleClose:i,submitLead:m,getLeads:d,clearLead:g,deleteLead:p,openDialog:h,closeDialog:E,dialog:f,dialogNew:v,updateLead:C,handleDateChange:b,loading:N,openDrawer:P,closeDrawer:L,drawer:S}):1===a?l.a.createElement(K,{handleChange:t,handleChangePage:o,handleChangeRowsPerPage:c,page:u,rowsPerPage:s,lead:w,leads:y,handleClose:i,submitLead:m,getLeads:d,clearLead:g,deleteLead:p,openDialog:h,closeDialog:E,dialog:f,dialogNew:v,updateLead:C,handleDateChange:b}):"otro")},Z="https://crm-fss.herokuapp.com/leads",$=function(e){return k.a.get("".concat(Z,"/getAll/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})},Y=function(e,a){return k.a.post("".concat(Z,"/newLead/").concat(e),a,{}).then(function(e){return e}).catch(function(e){return e.response})},ee=function(e){var a=e.id;return k.a.post("".concat(Z,"/removeLead/").concat(a)).then(function(e){return e}).catch(function(e){return e.response})},ae=function(e,a){return k.a.post("".concat(Z,"/removeUserLead/").concat(e),a).then(function(e){return e}).catch(function(e){return e.response})},te=function(e,a){return k.a.post("".concat(Z,"/updateLead/").concat(e),a).then(function(e){return e}).catch(function(e){return e.response})},ne=function(e){var a=e.open,t=e.message,n=e.close;return l.a.createElement(p.y,{color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:6e3,onClose:n,ContentProps:{"aria-describedby":"message-id"},message:l.a.createElement("span",{id:"message-id"},t),action:[l.a.createElement(p.p,{key:"close","aria-label":"Close",color:"inherit",onClick:n},l.a.createElement(P.e,null))]})},le=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={value:0,lead:{},leads:[],client:{},clients:[],user:{},page:0,rowsPerPage:10,message:String,open:!1,dialog:!1,dialogNew:!1,loading:!0,drawer:!1},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e},t.getLeads)},t.componentWillUnmount=function(){return t.setState({loading:!0})},t.handleChange=function(e){var a=t.state.lead;if("Origen"===e.target.name)return a.origin=e.target.value,t.setState({lead:a});a[e.target.id]=e.target.value,t.setState({lead:a})},t.handleDateChange=function(e,a){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n){var l=a;if("status"===n.target.name)return l.status=n.target.value,t.setState({lead:l},function(){return t.updateLead(e)});l.meetingDate=n,t.setState({lead:l},function(){return t.updateLead(e)})}},t.getLeads=function(){var e=t.state.user;$(e._id).then(function(e){return t.setState({leads:e.data.leads,loading:!1})}).catch(function(e){return console.log(e)})},t.submitLead=function(){var e=t.state,a=e.user,n=e.lead,l=e.leads,r=void 0===l?[]:l;console.log(r),n.commentPostedBy=a._id,n.prefix="LD",n.seller=a.name[0].toUpperCase()+a.name[1].toUpperCase(),n.number=r.length>0?r[r.length-1].number+1:1,Y(a._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),t.getLeads(a._id),t.setState({dialogNew:!1,open:!0,message:"Lead creado"},t.clearLead)}).catch(function(e){return console.log(e)})},t.updateLead=function(e){var a=t.state.lead;te(e,a).then(function(e){t.setState({dialog:!1,open:!0,message:"Actualizado correctamente"})}).catch(function(e){return console.log(e)})},t.clearLead=function(){var e=t.state.lead;Object.keys(e).map(function(a){return e[a]=""}),t.setState({lead:e})},t.deleteLead=function(e){var a=t.state.user,n={id:e};ee(n).then(function(e){return e}).catch(function(e){return console.log(e)}),ae(a._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),t.getLeads(),t.setState({dialog:!1,open:!0,message:"Lead eliminado"})}).catch(function(e){return console.log(e)})},t.handleTabs=function(e,a){return t.setState({value:a})},t.close=function(){return t.setState({open:!1})},t.openDialog=function(e,a){"update"===a?t.setState({dialog:!0,lead:e}):t.setState({dialogNew:!0,lead:{}})},t.closeDialog=function(){t.setState({dialog:!1,dialogNew:!1},t.getLeads)},t.openDrawer=function(e){return t.setState({drawer:!0,lead:e})},t.closeDrawer=function(){return t.setState({drawer:!1,lead:{}})},t.handleChangePage=function(e,a){return t.setState({page:a})},t.handleChangeRowsPerPage=function(e){return t.setState({rowsPerPage:e.target.value})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.props.classes,a=this.state,t=a.value,n=a.message,r=a.page,o=a.rowsPerPage,c=a.lead,i=a.user,s=a.open,u=a.leads,m=a.dialog,d=a.dialogNew,g=a.client,h=a.clients,E=a.loading,f=a.drawer,C=this.handleTabs,v=this.handleChange,b=this.handleChangePage,w=this.handleChangeRowsPerPage,y=this.close,N=this.submitLead,P=this.getLeads,L=this.clearLead,S=this.deleteLead,D=this.closeDialog,x=this.openDialog,k=this.updateLead,O=this.handleDateChange,j=this.openDrawer,R=this.closeDrawer;return l.a.createElement("div",{className:e.salesMenuRoot},l.a.createElement("h2",{className:"section-title"},"Ventas"),l.a.createElement(p.a,{position:"static",color:"default"},l.a.createElement(p.G,{value:t,onChange:C,indicatorColor:"primary",textColor:"primary"},l.a.createElement(p.z,{onClick:P,label:"Oportunidad de venta"}),l.a.createElement(p.z,{label:"Prospectar clientes"}),l.a.createElement(p.z,{label:"Formalizar cuentas"}),l.a.createElement(p.z,{label:"Supervisar implementaci\xf3n del servicio"}),l.a.createElement(p.z,{label:"Quejas/Sugerencias"}),l.a.createElement(p.z,{label:"Satisfacci\xf3n del cliente"}))),l.a.createElement(Q,{value:t,handleChange:v,handleChangePage:b,handleChangeRowsPerPage:w,page:r,rowsPerPage:o,lead:c,leads:u,user:i,submitLead:N,getLeads:P,clearLead:L,deleteLead:S,dialog:m,openDialog:x,closeDialog:D,dialogNew:d,updateLead:k,handleDateChange:O,client:g,clients:h,loading:E,openDrawer:j,closeDrawer:R,drawer:f}),l.a.createElement(ne,{close:y,message:n,open:s}))}}]),a}(n.Component),re=Object(C.withStyles)(f)(le),oe=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={open:!1,direction:"left",location:"root",user:{},message:String},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e})},t.handleDrawerOpen=function(){return t.setState({open:!0,direction:"left"})},t.handleDrawerClose=function(){return t.setState({open:!1,direction:"right"})},t.handleLocation=function(e){return t.setState({location:e})},t.toHome=function(){return t.setState({location:"root"})},t.updateUser=function(e){H(e._id,e),t.setState({user:e})},t.close=function(){return t.setState({open:!1})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.open,t=e.direction,n=e.location,r=e.user,o=(e.message,this.handleDrawerClose),c=this.handleDrawerOpen,i=this.handleLocation,s=(this.handleChange,this.close,this.updateUser),u=this.toHome,m=this.props.classes;return l.a.createElement("div",null,l.a.createElement("div",{className:"root"},l.a.createElement(p.f,null),l.a.createElement(N,Object.assign({handleDrawerOpen:c,toHome:u,open:a,classes:m},r)),l.a.createElement(L,{handleDrawerClose:o,location:n,open:a,direction:t,classes:m,handleLocation:i}),l.a.createElement("main",{className:m.content},l.a.createElement("div",{className:m.toolbar}),"root"===n?l.a.createElement(p.K,{paragraph:!0},"Dashboard Principal"):"ventas"===n?l.a.createElement(re,null):"profile"===n?l.a.createElement(z,{updateUser:s}):"Not root")))}}]),a}(n.Component),ce=Object(C.withStyles)(f,{withTheme:!0})(oe),ie=(t(234),t(5747),t(101)),se=t.n(ie),ue=t(54),me=t.n(ue),de=t(23),ge=t.n(de),pe=t(39),he=t.n(pe),Ee=t(5749),fe=function(){return l.a.createElement(se.a,{position:"static"},l.a.createElement(me.a,{className:"grow"},l.a.createElement(ge.a,{variant:"h6",color:"inherit"},"FSS"),l.a.createElement(he.a,{color:"inherit"},l.a.createElement(Ee.a,{style:{color:"white"},to:"/login"},"Login"))))},Ce=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={user:{},message:String,open:!1},t.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return t.setState({user:{},isAuth:!1});t.props.history.push("/home")},t.handleChange=function(e){var a=t.state.user;a[e.target.id]=e.target.value,t.setState({user:a})},t.handleSubmit=function(){var e=t.state.user;R(e).then(function(e){return 500===e.status?t.setState({open:!0,message:e.data.message}):404===e.status?t.setState({open:!0,message:"Nombre de usuario o contrase\xf1a incorrectos"}):(localStorage.setItem("user",JSON.stringify(e)),t.setState({open:!0,message:"Inicio de sesi\xf3n correcto, \xa1Bienvenido(a)!"}),void t.props.history.push("/home"))}).catch(function(e){return t.setState({open:!0,message:e})})},t.close=function(){return t.setState({open:!1})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.user,t=e.message,n=e.open,r=this.handleChange,o=this.handleSubmit,c=this.close;return l.a.createElement("div",null,l.a.createElement(fe,null),l.a.createElement(p.w,{className:"paper-signup"},l.a.createElement("h2",null,"Inicio de sesi\xf3n"),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(p.H,{id:"email",label:"Email",value:a.email,onChange:r,margin:"normal"})),l.a.createElement("div",null,l.a.createElement(p.H,{id:"password",label:"Contrase\xf1a",value:a.password,onChange:r,margin:"normal"})),l.a.createElement(p.c,{onClick:o,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Iniciar sesi\xf3n")),l.a.createElement("small",null,"\xbfNo tienes una cuenta? ",l.a.createElement(Ee.a,{to:"/signup"},"Crea una aqu\xed"))),l.a.createElement(ne,{close:c,message:t,open:n}))}}]),a}(n.Component),ve=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={user:{},message:String,open:!1},t.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return t.setState({user:{},isAuth:!1});t.props.history.push("/app")},t.handleChange=function(e){var a=t.state.user;a[e.target.id]=e.target.value,t.setState({user:a})},t.handleSubmit=function(){var e=t.state.user;j(e).then(function(e){if(500===e.status)return t.setState({open:!0,message:e.data.message});localStorage.setItem("user",JSON.stringify(e)),t.setState({open:!0,message:"Registro correcto, \xa1Bienvenido(a)!"}),t.props.history.push("/home")}).catch(function(e){return t.setState({open:!0,message:e})})},t.close=function(){return t.setState({open:!1})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.user,t=e.message,n=e.open,r=this.handleChange,o=this.handleSubmit,c=this.close;return l.a.createElement("div",null,l.a.createElement(fe,null),l.a.createElement(p.w,{className:"paper-signup"},l.a.createElement("h2",null,"Registro de usuario"),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(p.H,{id:"name",label:"Nombre",value:a.name,onChange:r,margin:"normal"})),l.a.createElement("div",null,l.a.createElement(p.H,{id:"email",label:"Email",value:a.email,onChange:r,margin:"normal"})),l.a.createElement("div",null,l.a.createElement(p.H,{id:"password",label:"Contrase\xf1a",value:a.password,onChange:r,margin:"normal"})),l.a.createElement(p.c,{onClick:o,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Registrarme"))),l.a.createElement(ne,{close:c,message:t,open:n}))}}]),a}(n.Component),be=function(){return l.a.createElement(d.a,null,l.a.createElement(g.a,{exact:!0,path:"/",component:Ce}),l.a.createElement(g.a,{path:"/login",component:Ce}),l.a.createElement(g.a,{path:"/home",component:ce}),l.a.createElement(g.a,{path:"/signup",component:ve}))},we=Object(C.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#1976d2"},secondary:{main:"#c62828"}}}),ye=function(e){function a(){return Object(c.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(C.MuiThemeProvider,{theme:we},l.a.createElement("div",{className:"App"},l.a.createElement(be,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=t(5751);o.a.render(l.a.createElement(function(){return l.a.createElement(Ne.a,null,l.a.createElement(ye,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,a,t){}},[[5498,1,2]]]);
//# sourceMappingURL=main.516a5d8c.chunk.js.map