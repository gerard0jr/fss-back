(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,a,t){},259:function(e,a,t){},5518:function(e,a,t){e.exports=t(5812)},5523:function(e,a,t){},5524:function(e,a,t){},5525:function(e,a,t){},5682:function(e,a,t){},5811:function(e,a,t){},5812:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(24),o=t.n(l),c=(t(5523),t(30)),i=t(31),s=t(33),u=t(32),m=t(34),d=(t(5524),t(5816)),g=t(5814),p=t(1),h=t(260),E=function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:10},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,marginLeft:"57px"},bigAvatar:{margin:10,width:60,height:60},flexGrow:{flexGrow:1},salesMenuRoot:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,textAlign:"left"},container:{display:"flex",flexWrap:"wrap"}}},f=t(20),v=t(43),b=t(120),w=t.n(b),C=t(8),y=t.n(C),P=(t(5525),Object(f.withStyles)(E,{withTheme:!0})(function(e){var a=e.classes,t=e.open,n=e.handleDrawerOpen,l=e.photoURL,o=e.role,c=e.toHome;return r.a.createElement(p.a,{position:"fixed",className:y()(a.appBar,Object(v.a)({},a.appBarShift,t))},r.a.createElement(p.K,{className:"navbar-distribution",disableGutters:!t},r.a.createElement("div",{className:"left-items"},r.a.createElement(p.p,{color:"inherit","aria-label":"Open drawer",onClick:n,className:y()(a.menuButton,Object(v.a)({},a.hide,t))},r.a.createElement(w.a,null)),r.a.createElement("img",{onClick:c,style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),r.a.createElement("div",{className:"profile-circled"},r.a.createElement(p.d,{className:"chip-color",clickable:!0,avatar:r.a.createElement(p.b,{alt:"profile-mini-pic",src:l}),label:o}))))})),N=t(19),S=Object(f.withStyles)(E,{withTheme:!0})(function(e){var a,t,n=e.open,l=e.direction,o=e.handleDrawerClose,c=e.classes,i=e.location,s=e.handleLocation;return r.a.createElement(p.l,{variant:"permanent",className:y()(c.drawer,(a={},Object(v.a)(a,c.drawerOpen,n),Object(v.a)(a,c.drawerClose,!n),a)),classes:{paper:y()((t={},Object(v.a)(t,c.drawerOpen,n),Object(v.a)(t,c.drawerClose,!n),t))},open:n},r.a.createElement("div",{className:c.toolbar},r.a.createElement(p.p,{onClick:o},"right"===l?r.a.createElement(N.d,null):r.a.createElement(N.c,null))),r.a.createElement(p.k,null),r.a.createElement(p.t,{component:"nav"},r.a.createElement(p.u,{selected:"root"===i,onClick:function(){return s("root")},button:!0},n?r.a.createElement(p.v,null,r.a.createElement(N.k,null)):r.a.createElement(p.L,{title:"Resumen",placement:"right-start"},r.a.createElement(p.v,null,r.a.createElement(N.k,null))),r.a.createElement(p.w,{primary:"Resumen"})),r.a.createElement(p.u,{selected:"ventas"===i,onClick:function(){return s("ventas")},button:!0},n?r.a.createElement(p.v,null,r.a.createElement(N.a,null)):r.a.createElement(p.L,{title:"Ventas",placement:"right-start"},r.a.createElement(p.v,null,r.a.createElement(N.a,null))),r.a.createElement(p.w,{primary:"Ventas"}))),r.a.createElement(p.k,null),r.a.createElement(p.t,{component:"nav"},r.a.createElement(p.u,{selected:"profile"===i,onClick:function(){return s("profile")},button:!0},n?r.a.createElement(p.v,null,r.a.createElement(N.i,null)):r.a.createElement(p.L,{title:"Perfil",placement:"right-start"},r.a.createElement(p.v,null,r.a.createElement(N.i,null))),r.a.createElement(p.w,{primary:"Perfil"}))))}),L=(t(5682),t(167));L.initializeApp({apiKey:"AIzaSyDiJ--AaTzWP3NdW1j6Zo4wvB17x1Cr2nk",authDomain:"fss-react.firebaseapp.com",databaseURL:"https://fss-react.firebaseio.com",projectId:"fss-react",storageBucket:"fss-react.appspot.com",messagingSenderId:"18829816109"});var D=L,x=t(22),k=t.n(x),O="https://crm-fss.herokuapp.com/auth",j=function(e){return k.a.post("".concat(O,"/signup"),e,{}).then(function(e){return e.data}).catch(function(e){return e.response})},q=function(e){return k.a.post("".concat(O,"/login"),e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return e.response})},I=function(){return k.a.get("".concat(O,"/logout")).then(function(e){return e.data}).catch(function(e){return e.response})},B=function(e,a){return k.a.post("".concat(O,"/updateUser/").concat(e),a,{}).then(function(e){return e.data}).catch(function(e){return e.response})},R=t(5817),J=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={open:!1,direction:"left",location:"root",user:{},message:String,progress:0},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e})},t.handleChange=function(e){var a=t.state.user;switch(e.target.id){case"name":a.name=e.target.value;break;case"email":a.email=e.target.value;break;default:return}t.setState({user:a})},t.uploadPhoto=function(e){var a=t.state.user,n=e.target.files[0],r=D.storage().ref("profilePics/".concat(a.name,"-").concat(a._id)).child(n.name).put(n);r.on("state_changed",function(e){var a=e.bytesTransferred/e.totalBytes*100;a=Math.floor(a),t.setState({progress:a})}),r.then(function(e){return e.ref.getDownloadURL()}).then(function(e){a.photoURL=e,localStorage.setItem("user",JSON.stringify(a)),t.props.updateUser(a),t.setState({user:a,progress:0,open:!0,message:"Foto de perfil actualizada"})})},t.clickInput=function(){document.getElementById("photoUpload").click()},t.closeSession=function(){return I().then(function(e){var a=t.props.history;return localStorage.removeItem("user"),a.push("/login")}).catch(function(e){return e})},t.close=function(){return t.setState({open:!1})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.open,t=e.user,n=e.message,l=e.progress,o=this.handleChange,c=this.close,i=this.uploadPhoto,s=this.clickInput,u=this.closeSession;return r.a.createElement("div",null,r.a.createElement(p.y,{className:"paper-profile"},r.a.createElement("h2",null,"Perfil de ",t.name),t.photoURL?l>0?r.a.createElement(p.e,{variant:"determinate",value:l}):r.a.createElement("div",{onClick:s,style:{backgroundImage:"url(".concat(t.photoURL,")")},className:"profile-picture"},r.a.createElement("span",null,r.a.createElement(N.b,null),r.a.createElement("p",null,"Editar"))):r.a.createElement(p.e,null),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.J,{InputLabelProps:{shrink:!0},disabled:!0,id:"email",label:"Email",value:t.email,onChange:o,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.J,{InputLabelProps:{shrink:!0},id:"name",label:"Nombre",value:t.name,onChange:o,margin:"normal"})),r.a.createElement("input",{onChange:i,type:"file",name:"photoURL",id:"photoUpload",style:{display:"none"},accept:"image/png, image/jpeg"})),r.a.createElement(p.c,{style:{margin:"2rem 0"},onClick:u,variant:"contained",color:"secondary"},"Cerrar sesi\xf3n",r.a.createElement(N.h,{style:{marginLeft:"0.5rem"}}))),r.a.createElement(p.A,{open:a,message:n,close:c}))}}]),a}(n.Component),A=Object(R.a)(J),Q=(t(73),t(26)),U=t(44),_=t(75),z=t(74),T=t.n(z),M=function(e){var a=e.dialog,t=e.closeDialog,n=e.handleChange,l=e.lead,o=e.clearLead,c=e.submitLead,i=e.updateLead,s=e.dialogNew,u=e.closeDrawer;return r.a.createElement(p.g,{open:s||a,onClose:t,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,s?"Nuevo Lead":"Editar ".concat(l.bussinessName)),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.J,{required:!0,className:"text-field",id:"bussinessName",label:"Nombre de la empresa",value:l.bussinessName,onChange:n}),r.a.createElement(p.J,{required:!0,className:"text-field",id:"bussinessRole",label:"Giro de la empresa",value:l.bussinessRole,onChange:n}),r.a.createElement(p.J,{required:!0,className:"text-field",id:"bussinessAddress",label:"Direcci\xf3n",value:l.bussinessAddress,onChange:n})),r.a.createElement("div",null,r.a.createElement(p.J,{required:!0,className:"text-field",id:"industry",label:"Industria",value:l.industry,onChange:n}),r.a.createElement(p.n,{className:"text-field"},r.a.createElement(p.r,{shrink:!0,htmlFor:"origin"},"Origen"),r.a.createElement(p.z,{required:!0,value:l.origin,onChange:n,inputProps:{name:"Origen",id:"origin"}},r.a.createElement(p.x,{value:"",disabled:!0},r.a.createElement("em",null,"Selecciona  ")),r.a.createElement(p.x,{value:"Nacional"},"Nacional"),r.a.createElement(p.x,{value:"Extranjero"},"Extranjero"))),r.a.createElement(p.J,{required:!0,type:"number",className:"text-field",id:"bussinessEmployees",label:"No. de empleados",value:l.bussinessEmployees,onChange:n})),r.a.createElement("div",null,r.a.createElement(p.J,{required:!0,className:"text-field",id:"contactName",label:"Nombre del contacto",value:l.contactName,onChange:n}),r.a.createElement(p.J,{required:!0,className:"text-field",id:"contactPosition",label:"Puesto del contacto",value:l.contactPosition,onChange:n}),r.a.createElement(p.J,{required:!0,className:"text-field",id:"contactPhone",label:"Tel\xe9fono",value:l.contactPhone,onChange:n}),r.a.createElement(p.J,{required:!0,className:"text-field",type:"email",id:"contactEmail",label:"Email",value:l.contactEmail,onChange:n}),r.a.createElement(p.J,{className:"text-field",type:"text",id:"commentText",label:"Comentarios",value:l.commentText,onChange:n})))),s?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:t},"Cancelar"),r.a.createElement(p.c,{onClick:o,variant:"outlined"},"Limpiar"),r.a.createElement(p.c,{onClick:c,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:function(){t(),u()}},"Cancelar"),r.a.createElement(p.c,{onClick:function(){i(l._id)},color:"primary",variant:"contained"},"Actualizar")))},F="https://crm-fss.herokuapp.com/leads",G=function(e){return k.a.get("".concat(F,"/getAll/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})},H=function(e,a){return k.a.post("".concat(F,"/newLead/").concat(e),a,{}).then(function(e){return e}).catch(function(e){return e.response})},W=function(e){var a=e.id;return k.a.post("".concat(F,"/removeLead/").concat(a)).then(function(e){return e}).catch(function(e){return e.response})},V=function(e,a){return k.a.post("".concat(F,"/removeUserLead/").concat(e),a).then(function(e){return e}).catch(function(e){return e.response})},X=function(e,a){return k.a.post("".concat(F,"/updateLead/").concat(e),a).then(function(e){return e}).catch(function(e){return e.response})},Y=function(e){var a=e.lead,t=e.updateLeadState,l=Object(n.useState)(null),o=Object(Q.a)(l,2),c=o[0],i=o[1],s=Object(n.useState)(null),u=Object(Q.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(!1),h=Object(Q.a)(g,2),E=h[0],f=h[1],v=Object(n.useState)(!1),b=Object(Q.a)(v,2),w=b[0],C=b[1],y=Object(n.useState)(!1),P=Object(Q.a)(y,2),S=P[0],L=P[1],x=function(){return C(!w)},O=function(){return L(!S)},j=function(e){return"file0"===e.target.name?i(e.target.files[0]):d(e.target.files[0])},q=function(e){(function(e){return k.a.get("".concat(F,"/deleteFile0/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})})(e).then(function(e){return t(e.data)}).catch(function(e){return e})},I=function(e){(function(e){return k.a.get("".concat(F,"/deleteFile1/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})})(e).then(function(e){return t(e.data)}).catch(function(e){return e})};return r.a.createElement("div",{className:"general-container"},r.a.createElement("div",{className:"file-layout"},r.a.createElement("div",{className:"file-input"},r.a.createElement("p",{className:"small-font"},"Primer archivo"),a.fileURL0?r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:a.fileURL0,className:"success-upload"},a.file0Name),r.a.createElement(p.p,{onClick:x,"aria-label":"Delete"},r.a.createElement(N.f,null))):r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:j,type:"file",name:"file0",id:"first"}),r.a.createElement("button",{id:"file0",onClick:function(){var e;null!==c&&((e=D.storage().ref("documents/".concat(a.prefix,"-").concat(a.seller,"-").concat(a.number,"/firstFile")).child(c.name).put(c)).on("state_changed",function(e){f(!0)}),e.then(function(e){return e.ref.getDownloadURL()}).then(function(e){(function(e,a,t){var n={link:e,name:t};return k.a.post("".concat(F,"/file0Upload/").concat(a),n).then(function(e){return e}).catch(function(e){return e.response})})({link:e},a._id,c.name).then(function(e){t(e.data),f(!1)}).catch(function(e){return e})}))}},"Subir"))),r.a.createElement("div",{className:"file-input"},r.a.createElement("p",{className:"small-font"},"Segundo archivo"),a.fileURL1?r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:a.fileURL1,className:"success-upload"},a.file1Name),r.a.createElement(p.p,{onClick:O,"aria-label":"Delete"},r.a.createElement(N.f,null))):r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:j,type:"file",name:"file1",id:"first"}),r.a.createElement("button",{id:"file1",onClick:function(){var e;null!==m&&((e=D.storage().ref("documents/".concat(a.prefix,"-").concat(a.seller,"-").concat(a.number,"/secondFile")).child(m.name).put(m)).on("state_changed",function(e){f(!0)}),e.then(function(e){return e.ref.getDownloadURL()}).then(function(e){(function(e,a,t){var n={link:e,name:t};return k.a.post("".concat(F,"/file1Upload/").concat(a),n).then(function(e){return e}).catch(function(e){return e.response})})({link:e},a._id,m.name).then(function(e){t(e.data),f(!1)}).catch(function(e){return e})}))}},"Subir")))),r.a.createElement("div",{className:"progress"},E?r.a.createElement(p.s,null):""),r.a.createElement(p.g,{open:w,onClose:x},r.a.createElement(p.j,null,'\xbfDeseas eliminar "Primer archivo"?'),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:x,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){q(a._id),x()},color:"secondary",autoFocus:!0},"Eliminar"))),r.a.createElement(p.g,{open:S,onClose:O},r.a.createElement(p.j,null,'\xbfDeseas eliminar "Segundo archivo"?'),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:O,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){I(a._id),O()},color:"secondary",autoFocus:!0},"Eliminar"))))},Z=function(e){var a=e.drawer,t=e.closeDrawer,l=(e.leads,e.lead),o=e.deleteLead,c=e.handleChange,i=e.handleDateChange,s=(e.loading,e.updateLead),u=e.dialog,m=e.closeDialog,d=e.openDialog,g=e.updateLeadState,h=Object(n.useState)(!1),E=Object(Q.a)(h,2),f=E[0],v=E[1],b=function(){return v(!f)};return r.a.createElement(p.l,{anchor:"right",open:a,onClose:t},r.a.createElement("div",{className:"drawer-layout"},r.a.createElement("h2",null,"Detalles de ",l.bussinessName),r.a.createElement(p.n,null,r.a.createElement(p.z,{className:"drawer-status",value:l.status,onChange:i(l._id,l,l.status),inputProps:{name:"status",id:"status"}},r.a.createElement(p.x,{value:"Propuesta"},"Propuesta"),r.a.createElement(p.x,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),r.a.createElement(p.x,{value:"Confirmaci\xf3n de pedido"},"Confirmaci\xf3n de pedido (Ganada)"),r.a.createElement(p.x,{value:"Perdida"},"Perdida"),r.a.createElement(p.x,{value:"Primer Cobro"},"Primer cobro"))),r.a.createElement(p.k,{variant:"middle"}),r.a.createElement("div",{className:"drawer-two-columns"},r.a.createElement("div",{className:"left-column"},r.a.createElement("p",{className:"small-font"},"Contacto:"),r.a.createElement("p",{className:"blue-font"},l.contactName?l.contactName:"Ninguno",r.a.createElement("small",{style:{color:"gray"}}," (",l.contactPosition?l.contactPosition:"-",")")),r.a.createElement("p",{className:"small-font"},"Tel\xe9fono:"),r.a.createElement("p",{className:"blue-font"},l.contactPhone?l.contactPhone:"-"),r.a.createElement("p",{className:"small-font"},"Email:"),r.a.createElement("p",{className:"blue-font"},l.contactEmail?l.contactEmail:"Sin email"),r.a.createElement("p",{className:"small-font"},"Direcci\xf3n:"),r.a.createElement("p",{className:"blue-font"},l.bussinessAddress?l.bussinessAddress:"Sin direcci\xf3n")),r.a.createElement("div",{className:"right-column"},r.a.createElement("p",{className:"small-font"},"Giro:"),r.a.createElement("p",{className:"blue-font"},l.bussinessRole?l.bussinessRole:"Sin giro"),r.a.createElement("p",{className:"small-font"},"Industria:"),r.a.createElement("p",{className:"blue-font"},l.industry?l.industry:"Sin industria"),r.a.createElement("p",{className:"small-font"},"Origen:"),r.a.createElement("p",{className:"blue-font"},l.origin?l.origin:"Sin origen"),r.a.createElement("p",{className:"small-font"},"Empleados:"),r.a.createElement("p",{className:"blue-font"},l.bussinessEmployees?l.bussinessEmployees:"Sin empleados"))),r.a.createElement(p.k,{variant:"middle"}),r.a.createElement("div",{className:""},r.a.createElement("p",{className:"small-font"},"Comentarios:"),r.a.createElement("p",{className:"blue-font"},l.commentText),"Propuesta"===l.status?r.a.createElement(p.c,{style:{margin:"0.5rem"},variant:"contained"},"Cotizar"):"",r.a.createElement(p.k,null),r.a.createElement("p",{className:"small-font"},"Archivos:"),r.a.createElement(Y,{updateLeadState:g,lead:l})),r.a.createElement("div",{className:"button-container"},r.a.createElement(p.c,{variant:"contained",onClick:t},"Cerrar"),r.a.createElement(p.c,{onClick:b,variant:"contained",color:"secondary"},"Borrar"),r.a.createElement(p.c,{onClick:function(){d(l,"update")},variant:"contained",color:"primary"},"Editar"))),r.a.createElement(p.g,{open:f,onClose:b},r.a.createElement(p.j,null,"Eliminar ",l.bussinessName),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:b,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){o(l._id),b(),t()},color:"secondary",autoFocus:!0},"Eliminar"))),r.a.createElement(M,{closeDrawer:t,dialog:u,closeDialog:m,handleChange:c,lead:l,updateLead:s}))},K=function(e){var a=e.leads,t=e.rowsPerPage,l=e.page,o=e.handleChangePage,c=e.handleChangeRowsPerPage,i=e.deleteLead,s=e.dialog,u=e.closeDialog,m=e.handleChange,d=e.lead,g=e.openDialog,h=e.updateLead,E=e.handleDateChange,f=e.loading,v=e.openDrawer,b=e.closeDrawer,w=e.drawer,C=e.updateLeadState,y=Object(n.useState)(""),P=Object(Q.a)(y,2),S=P[0],L=P[1];return r.a.createElement("div",null,r.a.createElement(p.y,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"Leads"),r.a.createElement(p.L,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.J,{onChange:function(e){return L(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.j,null))))),r.a.createElement(p.C,null,r.a.createElement(p.F,null,r.a.createElement(p.H,null,r.a.createElement(p.E,{style:{width:"40px",padding:"8px"}},"Ver/Editar"),r.a.createElement(p.E,null,"ID"),r.a.createElement(p.E,null,"Empresa"),r.a.createElement(p.E,null,"Contacto"),r.a.createElement(p.E,null,"Tel\xe9fono"),r.a.createElement(p.E,null,"Email"),r.a.createElement(p.E,null,"Estatus"),r.a.createElement(p.E,null,"Reuni\xf3n"),r.a.createElement(p.E,{style:{width:"200px",padding:"0 45px"}}))),r.a.createElement(p.D,null,a.length?a.filter(function(e){return e.prefix.concat("-",e.seller,"-",e.number).includes(S.toUpperCase())||e.bussinessName.toLowerCase().includes(S.toLowerCase())}).map(function(e,a){return a<10*l+10&&a>=10*l?r.a.createElement(p.H,{key:a},r.a.createElement(p.E,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){return v(e)},variant:"extended",color:"primary",size:"small"},r.a.createElement(N.g,{fontSize:"small"}))),r.a.createElement(p.E,{style:{width:"200px",padding:"8px"}},"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),r.a.createElement(p.E,{component:"th",scope:"row"},e.bussinessName),r.a.createElement(p.E,null,e.contactName),r.a.createElement(p.E,null,r.a.createElement("a",{style:{color:"#1976d2"},href:"tel:+".concat(e.contactPhone)},e.contactPhone)),r.a.createElement(p.E,null,r.a.createElement("a",{style:{color:"#1976d2"},href:"mailto:".concat(e.contactEmail)},e.contactEmail)),r.a.createElement(p.E,null,r.a.createElement(p.n,null,r.a.createElement(p.z,{value:e.status,onChange:E(e._id,e,e.status),inputProps:{name:"status",id:"status"}},r.a.createElement(p.x,{value:"Propuesta"},"Propuesta"),r.a.createElement(p.x,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),r.a.createElement(p.x,{value:"Confirmaci\xf3n de pedido"},"Confirmaci\xf3n de pedido (Ganada)"),r.a.createElement(p.x,{value:"Perdida"},"Perdida"),r.a.createElement(p.x,{value:"Primer Cobro"},"Primer cobro")))),r.a.createElement(p.E,{style:{width:"200px",padding:"8px"}},r.a.createElement(U.b,{utils:_.a,locale:T.a,views:["year"]},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(U.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.meetingDate,onChange:E(e._id,e,null),format:"dd/MM/yyyy"})))),r.a.createElement(p.E,{style:{width:"200px",padding:"5px"}},r.a.createElement(U.b,{utils:_.a,locale:T.a},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(U.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.meetingDate,onChange:E(e._id,e,null)}))))):""}):r.a.createElement(p.H,null,r.a.createElement(p.E,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},f?"Cargando...":"No hay leads"),r.a.createElement(p.E,{component:"th",scope:"row"},f?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.G,{rowsPerPageOptions:[5],component:"Table",count:a?a.length:0,rowsPerPage:t,page:l,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:o,onChangeRowsPerPage:c})),r.a.createElement(Z,{drawer:w,closeDrawer:b,leads:a,deleteLead:i,handleChange:m,lead:d,updateLead:h,handleDateChange:E,loading:f,dialog:s,closeDialog:u,openDialog:g,updateLeadState:C}))},$=function(e){var a=e.handleChange,t=e.lead,n=e.leads,l=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.rowsPerPage,i=e.page,s=e.submitLead,u=e.clearLead,m=e.deleteLead,d=e.openDialog,g=e.closeDialog,h=e.dialog,E=e.dialogNew,f=e.updateLead,v=e.handleDateChange,b=e.loading,w=e.openDrawer,C=e.closeDrawer,y=e.drawer,P=e.updateLeadState;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(K,{handleChangePage:l,handleChangeRowsPerPage:o,page:i,rowsPerPage:c,leads:n,deleteLead:m,dialog:h,openDialog:d,closeDialog:g,handleChange:a,lead:t,clearLead:u,submitLead:s,updateLead:f,handleDateChange:v,loading:b,openDrawer:w,closeDrawer:C,drawer:y,updateLeadState:P}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nuevo Lead")),r.a.createElement(M,{dialogNew:E,closeDialog:g,handleChange:a,lead:t,clearLead:u,submitLead:s}))},ee=function(e){var a=e.dialog,t=e.closeDialog,n=e.handleQuotation,l=e.dialogNew,o=e.submitQuotation,c=e.updateQuot,i=e.quotation;return r.a.createElement(p.g,{open:l||a,onClose:t,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,l?"Nueva cotizaci\xf3n":"Editar ".concat(i.quotBussinessName)),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.J,{required:!0,className:"text-field",id:"quotBussinessName",label:"Nombre de la empresa",value:i.quotBussinessName,onChange:n}),r.a.createElement(p.J,{required:!0,className:"text-field",id:"quotBussinessAddr",label:"Direcci\xf3n",value:i.quotBussinessAddress,onChange:n})),r.a.createElement("div",null,r.a.createElement(p.J,{required:!0,className:"text-field",id:"quotContactName",label:"Nombre del contacto",value:i.quotContactName,onChange:n}),r.a.createElement(p.J,{className:"text-field",type:"text",id:"quotCommentText",label:"Comentarios",value:i.quotCommentText,onChange:n})))),l?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:t},"Cancelar"),r.a.createElement(p.c,{variant:"outlined"},"Limpiar"),r.a.createElement(p.c,{onClick:o,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:t},"Cancelar"),r.a.createElement(p.c,{color:"secondary",variant:"contained"},"Borrar"),r.a.createElement(p.c,{onClick:function(){return c(i._id)},color:"primary",variant:"contained"},"Actualizar")))},ae=function(e){var a=e.rowsPerPage,t=e.page,l=e.handleChangePage,o=e.handleChangeRowsPerPage,c=e.dialog,i=e.closeDialog,s=e.handleChange,u=e.quotation,m=e.openDialog,d=e.quotations,g=void 0===d?[]:d,h=e.loading,E=e.handleQuotation,f=e.handleDateChange,v=e.updateQuot,b=Object(n.useState)(""),w=Object(Q.a)(b,2),C=(w[0],w[1]);return r.a.createElement("div",null,r.a.createElement(p.y,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(p.L,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.J,{onChange:function(e){return C(e.target.value)},id:"search-on-table",label:"Folio/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.j,null))))),r.a.createElement(p.C,null,r.a.createElement(p.F,null,r.a.createElement(p.H,null,r.a.createElement(p.E,null,"Folio"),r.a.createElement(p.E,null,"Empresa"),r.a.createElement(p.E,null,"Direcci\xf3n"),r.a.createElement(p.E,null,"Contacto"),r.a.createElement(p.E,null,"Reuni\xf3n"),r.a.createElement(p.E,null),r.a.createElement(p.E,null,"Tipo de requerimiento"),r.a.createElement(p.E,null,"Editar"))),r.a.createElement(p.D,null,g.length?g.map(function(e,a){return a<10*t+10&&a>=10*t?r.a.createElement(p.H,{key:a},r.a.createElement(p.E,null,"Folio"),r.a.createElement(p.E,{component:"th",scope:"row"},e.quotBussinessName),r.a.createElement(p.E,{style:{width:"200px",padding:"8px"}},e.quotBussinessAddr),r.a.createElement(p.E,null,e.quotContactName),r.a.createElement(p.E,{style:{width:"200px",padding:"8px"}},r.a.createElement(U.b,{utils:_.a,locale:T.a,views:["year"]},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(U.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.quotDate,onChange:f(e._id,e,null,"quotation"),format:"dd/MM/yyyy"})))),r.a.createElement(p.E,{style:{width:"200px",padding:"5px"}},r.a.createElement(U.b,{utils:_.a,locale:T.a},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(U.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.quotDate,onChange:f(e._id,e,null,"quotation")})))),r.a.createElement(p.E,null,e.reqType),r.a.createElement(p.E,null,r.a.createElement(N.g,{onClick:function(){return m(e,"updateQuot")},style:{fontSize:"17px",cursor:"pointer"}}))):""}):r.a.createElement(p.H,null,r.a.createElement(p.E,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},h?"Cargando...":"No hay cotizaciones"),r.a.createElement(p.E,{component:"th",scope:"row"},h?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.G,{rowsPerPageOptions:[5],component:"Table",count:g?g.length:0,rowsPerPage:a,page:t,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:l,onChangeRowsPerPage:o})),r.a.createElement(ee,{dialog:c,closeDialog:i,handleChange:s,quotation:u,handleQuotation:E,updateQuot:v}))},te=function(e){var a=e.quotations,t=e.handleChangePage,n=e.handleChangeRowsPerPage,l=e.rowsPerPage,o=e.page,c=e.openDialog,i=e.closeDialog,s=e.dialog,u=e.dialogNew,m=e.loading,d=e.submitQuotation,g=e.handleQuotation,h=e.quotation,E=e.handleDateChange,f=e.updateQuot;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement("h4",null,"Cotizaciones"),r.a.createElement(ae,{handleChangePage:t,handleChangeRowsPerPage:n,page:o,rowsPerPage:l,quotations:a,quotation:h,dialog:s,openDialog:c,closeDialog:i,loading:m,handleDateChange:E,updateQuot:f,handleQuotation:g}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return c({},"new")},variant:"contained",color:"primary"},"Nueva cotizaci\xf3n")),r.a.createElement(ee,{dialogNew:u,closeDialog:i,quotation:h,handleQuotation:g,submitQuotation:d}))},ne=function(e){var a=e.value,t=e.handleChange,n=e.lead,l=e.leads,o=e.handleChangePage,c=e.handleChangeRowsPerPage,i=e.handleClose,s=e.rowsPerPage,u=e.page,m=e.submitLead,d=e.getLeads,g=e.clearLead,p=e.deleteLead,h=e.openDialog,E=e.closeDialog,f=e.dialog,v=e.updateLead,b=e.dialogNew,w=e.handleDateChange,C=e.quotations,y=e.quotation,P=e.loading,N=e.openDrawer,S=e.closeDrawer,L=e.drawer,D=e.updateLeadState,x=e.submitQuotation,k=e.handleQuotation,O=e.updateQuot;return r.a.createElement("div",{className:"tab-content"},0===a?r.a.createElement($,{handleChange:t,handleChangePage:o,handleChangeRowsPerPage:c,page:u,rowsPerPage:s,lead:n,leads:l,handleClose:i,submitLead:m,getLeads:d,clearLead:g,deleteLead:p,openDialog:h,closeDialog:E,dialog:f,dialogNew:b,updateLead:v,handleDateChange:w,loading:P,openDrawer:N,closeDrawer:S,drawer:L,updateLeadState:D}):1===a?r.a.createElement(te,{handleChange:t,handleChangePage:o,handleChangeRowsPerPage:c,page:u,rowsPerPage:s,quotation:y,quotations:C,handleClose:i,submitLead:m,getLeads:d,clearLead:g,deleteLead:p,openDialog:h,closeDialog:E,dialog:f,dialogNew:b,updateLead:v,handleDateChange:w,loading:P,submitQuotation:x,handleQuotation:k,updateQuot:O}):"otro")},re="https://crm-fss.herokuapp.com/quotations",le=function(e){return k.a.get("".concat(re,"/getQuotations/").concat(e)).then(function(e){return e}).catch(function(e){return e})},oe=function(e,a){return k.a.post("".concat(re,"/submitQuotation/").concat(a),e).then(function(e){return e}).catch(function(e){return e})},ce=function(e,a){return k.a.post("".concat(re,"/updateQuot/").concat(e),a).then(function(e){return e}).catch(function(e){return e})},ie=function(e){var a=e.open,t=e.message,n=e.close;return r.a.createElement(p.A,{color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:6e3,onClose:n,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},t),action:[r.a.createElement(p.p,{key:"close","aria-label":"Close",color:"inherit",onClick:n},r.a.createElement(N.e,null))]})},se=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={value:0,lead:{},leads:[],quotation:{},quotations:[],user:{},page:0,rowsPerPage:10,message:String,open:!1,dialog:!1,dialogNew:!1,loading:!0,drawer:!1},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e},function(){t.getLeads(),t.getQuotations()})},t.componentWillUnmount=function(){return t.setState({loading:!0})},t.handleChange=function(e){var a=t.state.lead;if("Origen"===e.target.name)return a.origin=e.target.value,t.setState({lead:a});a[e.target.id]=e.target.value,t.setState({lead:a})},t.handleDateChange=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(l){var o=a;if(null!==r){var c=a;return c.quotDate=l,t.setState({quotation:c},function(){return t.updateQuot(e)})}return null===n?(o.meetingDate=l,t.setState({lead:o},function(){return t.updateLead(e)})):"status"===l.target.name?(o.status=l.target.value,t.setState({lead:o},function(){return t.updateLead(e)})):void 0}},t.handleQuotation=function(e){var a=t.state.quotation;a[e.target.id]=e.target.value,t.setState({quotation:a})},t.getLeads=function(){var e=t.state.user;G(e._id).then(function(e){return t.setState({leads:e.data.leads.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},t.getQuotations=function(){var e=t.state.user;le(e._id).then(function(e){return t.setState({quotations:e.data.quotations,loading:!1})}).catch(function(e){return console.log(e)})},t.submitLead=function(){var e=t.state,a=e.user,n=e.lead,r=e.leads,l=void 0===r?[]:r;n.commentPostedBy=a._id,n.prefix="LD",n.seller=a.name[0].toUpperCase()+a.name[1].toUpperCase(),n.number=l.length>0?l[0].number+1:1,H(a._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),t.getLeads(a._id),t.setState({dialogNew:!1,open:!0,message:"Lead creado"},t.clearLead)}).catch(function(e){return console.log(e)})},t.submitQuotation=function(){var e=t.state,a=e.user,n=e.quotation,r=e.quotations,l=void 0===r?[]:r;n.createdBy=a._id,n.quotPrefix="COT",n.quotSeller=a.name[0].toUpperCase()+a.name[1].toUpperCase(),n.number=l.length>0?l[0].number+1:1,oe(n,a._id).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),t.getLeads(a._id),t.setState({dialogNew:!1,open:!0,message:"Cotizaci\xf3n creada"},t.clearLead)}).catch(function(e){return console.log(e)})},t.updateLead=function(e){var a=t.state.lead;X(e,a).then(function(e){t.setState({dialog:!1,open:!0,message:"Actualizado correctamente"})}).catch(function(e){return console.log(e)})},t.updateQuot=function(e){var a=t.state.quotation;ce(e,a).then(function(e){t.setState({dialog:!1,open:!0,message:"Actualizado correctamente"})}).catch(function(e){return console.log(e)})},t.clearLead=function(){var e=t.state.lead;Object.keys(e).map(function(a){return e[a]=""}),t.setState({lead:e})},t.deleteLead=function(e){var a=t.state.user,n={id:e};W(n).then(function(e){return e}).catch(function(e){return console.log(e)}),V(a._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),t.getLeads(),t.setState({dialog:!1,open:!0,message:"Lead eliminado"})}).catch(function(e){return console.log(e)})},t.handleTabs=function(e,a){return t.setState({value:a})},t.close=function(){return t.setState({open:!1})},t.openDialog=function(e,a){"update"===a?t.setState({dialog:!0,lead:e}):"updateQuot"===a?t.setState({dialog:!0,quotation:e}):t.setState({dialogNew:!0,lead:{}})},t.closeDialog=function(){t.setState({dialog:!1,dialogNew:!1},t.getLeads)},t.openDrawer=function(e){return t.setState({drawer:!0,lead:e})},t.closeDrawer=function(){return t.setState({drawer:!1,lead:{}})},t.handleChangePage=function(e,a){return t.setState({page:a})},t.handleChangeRowsPerPage=function(e){return t.setState({rowsPerPage:e.target.value})},t.updateLeadState=function(e){t.setState({lead:e},function(){return t.getLeads()})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.props.classes,a=this.state,t=a.value,n=a.message,l=a.page,o=a.rowsPerPage,c=a.lead,i=a.user,s=a.open,u=a.leads,m=a.dialog,d=a.dialogNew,g=a.client,h=a.quotations,E=a.loading,f=a.drawer,v=a.quotation,b=this.handleTabs,w=this.handleChange,C=this.handleChangePage,y=this.handleChangeRowsPerPage,P=this.close,N=this.submitLead,S=this.getLeads,L=this.clearLead,D=this.deleteLead,x=this.closeDialog,k=this.openDialog,O=this.updateLead,j=this.handleDateChange,q=this.openDrawer,I=this.closeDrawer,B=this.updateLeadState,R=this.submitQuotation,J=this.handleQuotation,A=this.updateQuot;return r.a.createElement("div",{className:e.salesMenuRoot},r.a.createElement(p.a,{position:"static",color:"default"},r.a.createElement(p.I,{value:t,onChange:b,indicatorColor:"primary",textColor:"primary"},r.a.createElement(p.B,{onClick:S,label:"Oportunidad de venta"}),r.a.createElement(p.B,{label:"Prospectar clientes"}),r.a.createElement(p.B,{label:"Formalizar cuentas"}),r.a.createElement(p.B,{label:"Supervisar implementaci\xf3n del servicio"}),r.a.createElement(p.B,{label:"Quejas/Sugerencias"}))),r.a.createElement(ne,{value:t,handleChange:w,handleChangePage:C,handleChangeRowsPerPage:y,page:l,rowsPerPage:o,lead:c,leads:u,user:i,submitLead:N,getLeads:S,clearLead:L,deleteLead:D,dialog:m,openDialog:k,closeDialog:x,dialogNew:d,updateLead:O,handleDateChange:j,client:g,quotations:h,quotation:v,loading:E,openDrawer:q,closeDrawer:I,drawer:f,updateLeadState:B,submitQuotation:R,handleQuotation:J,updateQuot:A}),r.a.createElement(ie,{close:P,message:n,open:s}))}}]),a}(n.Component),ue=Object(f.withStyles)(E)(se),me=(t(111),t(93)),de=t.n(me);t(5769);var ge=function(e){var a=e.leads,t=e.page,l=e.rowsPerPage,o=e.handleChangePage,c=e.loading,i=e.orderById,s=Object(n.useState)([]),u=Object(Q.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(""),h=Object(Q.a)(g,2),E=h[0],f=h[1];return Object(n.useEffect)(function(){d(a)}),r.a.createElement("div",{style:{marginTop:"1em"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(p.L,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.J,{onChange:function(e){return f(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.j,null))))),r.a.createElement(p.C,null,r.a.createElement(p.F,null,r.a.createElement(p.H,null,r.a.createElement(p.E,null," ",r.a.createElement("span",{className:"order-cell",onClick:i},"ID")),r.a.createElement(p.E,null,"Empresa"),r.a.createElement(p.E,null,"Estatus"),r.a.createElement(p.E,null,"Reuni\xf3n"))),r.a.createElement(p.D,null,m.length?m.filter(function(e){return e.prefix.concat("-",e.seller,"-",e.number).includes(E.toUpperCase())||e.bussinessName.toLowerCase().includes(E.toLowerCase())}).map(function(e,a){return a<5*t+5&&a>=5*t?r.a.createElement(p.H,{key:a},r.a.createElement(p.E,null,"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),r.a.createElement(p.E,null,e.bussinessName),r.a.createElement(p.E,null,e.status),r.a.createElement(p.L,{disableFocusListener:!0,title:de()(e.meetingDate).format("d/MMMM/Y h:m a"),placement:"right"},r.a.createElement(p.E,null,de()(e.meetingDate).fromNow()))):""}):r.a.createElement(p.H,null,r.a.createElement(p.E,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},c?"Cargando...":"No hay leads"),r.a.createElement(p.E,{component:"th",scope:"row"},c?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):"")))),r.a.createElement(p.G,{rowsPerPageOptions:[5],component:"Table",count:a?a.length:0,rowsPerPage:l,page:t,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:o}))},pe=t(169),he=t(265),Ee=t.n(he);pe.b.addAdapter(Ee.a);var fe=function(e){var a=e.propuesta,t=e.negociacion,n=e.confirmacion,l=e.perdida,o=e.ganada;return r.a.createElement("div",null,r.a.createElement(pe.a,{data:[["Propuesta",a],["Negociaci\xf3n",t],["Confirmaci\xf3n de pedido (Ganada)",n],["Perdida",l],["Primer cobro",o]],messages:{empty:"No hay datos"}}))},ve=function(e){var a=e.leads,t=e.page,n=e.rowsPerPage,l=e.handleChangePage,o=e.loading,c=e.orderById,i=e.summaryData;return r.a.createElement("div",{className:"cards"},r.a.createElement(p.y,{className:"card"},r.a.createElement("h4",null,"Leads"),r.a.createElement(ge,{leads:a,loading:o,page:t,rowsPerPage:n,handleChangePage:l,orderById:c})),r.a.createElement(p.y,{className:"card"},r.a.createElement("h4",null,"General"),r.a.createElement("div",{className:"general-info"},r.a.createElement(fe,i))))},be=function(){return k.a.get("".concat("https://crm-fss.herokuapp.com/general","/getSellers")).then(function(e){return e}).catch(function(e){return e})},we=function(e){var a=e.sellers;return r.a.createElement("div",{className:"cards employees-resume"},r.a.createElement(p.y,{className:"card"},r.a.createElement("h4",null,"Vendedores"),r.a.createElement(p.t,{className:"employees-detail"},a?a.map(function(e,a){return r.a.createElement(p.u,{key:a},r.a.createElement(p.b,{alt:"profile-mini-pic",src:e.photoURL}),r.a.createElement(p.w,{primary:e.name,secondary:"Leads:".concat(e.leads.length," , Cotizaciones: 0")}))}):r.a.createElement("div",{className:"employees-detail"},"No hay vendedores"))))},Ce=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={user:{},loading:!0,leads:[],page:0,rowsPerPage:5,summaryData:{},sellers:[]},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e},function(){t.getLeads(),t.getEmployees()})},t.componentWillUnmount=function(){return t.setState({loading:!0})},t.getSummaryData=function(){var e=t.state.leads,a={propuesta:e.reduce(function(e,a){return"Propuesta"===a.status&&e++,e},0),negociacion:e.reduce(function(e,a){return"Negociaci\xf3n"===a.status&&e++,e},0),confirmacion:e.reduce(function(e,a){return"Confirmaci\xf3n de pedido"===a.status&&e++,e},0),perdida:e.reduce(function(e,a){return"Perdida"===a.status&&e++,e},0),ganada:e.reduce(function(e,a){return"Primer Cobro"===a.status&&e++,e},0)};t.setState({summaryData:a})},t.getLeads=function(){var e=t.state.user;G(e._id).then(function(e){return t.setState({leads:e.data.leads,loading:!1},t.getSummaryData)}).catch(function(e){return console.log(e)})},t.getEmployees=function(){be().then(function(e){return t.setState({sellers:e.data})}).catch(function(e){return console.log(e)})},t.handleChangePage=function(e,a){return t.setState({page:a})},t.orderById=function(){var e=t.state.leads;e=e.reverse(),t.setState({leads:e})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.loading,t=e.leads,n=e.page,l=e.rowsPerPage,o=e.summaryData,c=e.sellers,i=this.handleChangePage,s=this.orderById;return r.a.createElement("div",{className:"dashboard-layout"},r.a.createElement(ve,{leads:t,loading:a,page:n,rowsPerPage:l,handleChangePage:i,orderById:s,summaryData:o}),r.a.createElement(p.k,{style:{marginTop:"1rem"}}),r.a.createElement("small",null,"Administraci\xf3n"),r.a.createElement(we,{sellers:c}))}}]),a}(n.Component),ye=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={open:!1,direction:"left",location:"root",user:{},message:String},t.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return t.props.history.push("/login");t.setState({user:e})},t.handleDrawerOpen=function(){return t.setState({open:!0,direction:"left"})},t.handleDrawerClose=function(){return t.setState({open:!1,direction:"right"})},t.handleLocation=function(e){return t.setState({location:e})},t.toHome=function(){return t.setState({location:"root"})},t.updateUser=function(e){B(e._id,e),t.setState({user:e})},t.close=function(){return t.setState({open:!1})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.open,t=e.direction,n=e.location,l=e.user,o=this.handleDrawerClose,c=this.handleDrawerOpen,i=this.handleLocation,s=this.updateUser,u=this.toHome,m=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:"root"},r.a.createElement(p.f,null),r.a.createElement(P,Object.assign({handleDrawerOpen:c,toHome:u,open:a,classes:m},l)),r.a.createElement(S,{handleDrawerClose:o,location:n,open:a,direction:t,classes:m,handleLocation:i}),r.a.createElement("main",{onClick:o,className:m.content},r.a.createElement("div",{className:m.toolbar}),"root"===n?r.a.createElement(Ce,null):"ventas"===n?r.a.createElement(ue,null):"profile"===n?r.a.createElement(A,{updateUser:s}):"Not root")))}}]),a}(n.Component),Pe=Object(f.withStyles)(E,{withTheme:!0})(ye),Ne=(t(259),t(5811),t(113)),Se=t.n(Ne),Le=t(60),De=t.n(Le),xe=t(42),ke=t.n(xe),Oe=t(5813),je=function(){return r.a.createElement(Se.a,{position:"static"},r.a.createElement(De.a,{className:"grow"},r.a.createElement(Oe.a,{to:"/login"},r.a.createElement("img",{style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),r.a.createElement(ke.a,{color:"inherit"},r.a.createElement(Oe.a,{style:{color:"white"},to:"/login"},"Iniciar sesi\xf3n"))))},qe=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={user:{},message:String,open:!1,showPassword:!1},t.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return t.setState({user:{},isAuth:!1});t.props.history.push("/home")},t.handleChange=function(e){var a=t.state.user;a[e.target.id]=e.target.value,t.setState({user:a})},t.handleSubmit=function(){var e=t.state.user;q(e).then(function(e){return 500===e.status?t.setState({open:!0,message:e.data.message}):404===e.status?t.setState({open:!0,message:"Nombre de usuario o contrase\xf1a incorrectos"}):(localStorage.setItem("user",JSON.stringify(e)),t.setState({open:!0,message:"Inicio de sesi\xf3n correcto, \xa1Bienvenido(a)!"}),void t.props.history.push("/home"))}).catch(function(e){return t.setState({open:!0,message:e})})},t.close=function(){return t.setState({open:!1})},t.togglePassword=function(){return t.setState({showPassword:!t.state.showPassword})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.user,t=e.message,n=e.open,l=e.showPassword,o=this.handleChange,c=this.handleSubmit,i=this.close,s=this.togglePassword;return r.a.createElement("div",null,r.a.createElement(je,null),r.a.createElement("div",{className:"landing-image"}),r.a.createElement(p.y,{className:"paper-signup"},r.a.createElement("h2",null,"Ingresa a tu cuenta"),r.a.createElement("img",{style:{filter:"invert(100%)",width:"200px"},src:"/logo.png",alt:"fss-logo"}),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.J,{id:"email",label:"Email",value:a.email,onChange:o,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.J,{id:"password",type:l?"text":"password",label:"Contrase\xf1a",value:a.password,onChange:o,margin:"normal",InputProps:{endAdornment:r.a.createElement(p.q,{position:"end"},r.a.createElement(p.p,{"aria-label":"Toggle password visibility",onClick:s},l?r.a.createElement(N.m,null):r.a.createElement(N.l,null)))}})),r.a.createElement(p.c,{onClick:c,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Iniciar sesi\xf3n")),r.a.createElement("small",null,"\xbfNo tienes una cuenta? ",r.a.createElement(Oe.a,{to:"/signup"},"Crea una aqu\xed"))),r.a.createElement(ie,{close:i,message:t,open:n}))}}]),a}(n.Component),Ie=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={user:{},message:String,open:!1,error:!1,errorPass:!1,disabledMail:!0,disabledPass:!0,showPassword:!1},t.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return t.setState({user:{},isAuth:!1});t.props.history.push("/app")},t.handleChange=function(e){var a=t.state.user;a[e.target.id]=e.target.value,t.setState({user:a})},t.handleSubmit=function(){if(document.getElementById("password").value.length<6)return t.setState({disabledPass:!0,open:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});var e=t.state.user;j(e).then(function(e){if(500===e.status)return t.setState({open:!0,message:"Ya existe un usuario con este correo"});localStorage.setItem("user",JSON.stringify(e)),t.setState({open:!0,message:"Registro correcto, \xa1Bienvenido(a)!"}),t.props.history.push("/home")}).catch(function(e){return t.setState({open:!0,message:e})})},t.close=function(){return t.setState({open:!1})},t.checkPassword=function(e){return function(e){return t.state.user.password===e.target.value?t.setState({disabledPass:!1,errorPass:!1}):(t.setState({disabledPass:!0,errorPass:!0}),!1)}},t.checkEmail=function(e){return function(e){if(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.target.value).toLowerCase()))return t.setState({disabledMail:!1,error:!1});t.setState({disabledMail:!0,error:!0})}},t.togglePassword=function(){return t.setState({showPassword:!t.state.showPassword})},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state,a=e.user,t=e.message,n=e.open,l=e.error,o=e.disabledMail,c=e.disabledPass,i=e.errorPass,s=e.showPassword,u=this.handleChange,m=this.handleSubmit,d=this.close,g=this.checkEmail,h=this.checkPassword,E=this.togglePassword;return r.a.createElement("div",null,r.a.createElement(je,null),r.a.createElement("div",{className:"landing-image"}),r.a.createElement(p.y,{className:"paper-signup"},r.a.createElement("h2",null,"Registro de usuario"),r.a.createElement("img",{style:{filter:"invert(100%)",width:"200px"},src:"/logo.png",alt:"fss-logo"}),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.J,{id:"name",label:"Nombre",value:a.name,onChange:u,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.J,{id:"email",label:"Email",value:a.email,onChange:u,onBlur:g(),margin:"normal"})),r.a.createElement("div",null,l?r.a.createElement("small",{style:{color:"red"}},"Ingresa un correo v\xe1lido"):""),r.a.createElement("div",null,r.a.createElement(p.J,{id:"password",type:s?"text":"password",label:"Contrase\xf1a",value:a.password,onChange:u,margin:"normal",InputProps:{endAdornment:r.a.createElement(p.q,{position:"end"},r.a.createElement(p.p,{"aria-label":"Toggle password visibility",onClick:E},s?r.a.createElement(N.m,null):r.a.createElement(N.l,null)))}})," ",r.a.createElement("br",null),r.a.createElement("small",{style:{fontSize:"0.7rem",color:"rgb(0, 82, 136)",marginTop:"-5px;"}},"M\xednimo 6 caracteres")),r.a.createElement("div",null,r.a.createElement(p.J,{id:"repeat-password",label:"Repite tu contrase\xf1a",type:s?"text":"password",onChange:h(),onBlur:h(),margin:"normal"})),r.a.createElement("div",null,i?r.a.createElement("small",{style:{color:"red"}},"La contrase\xf1a no coincide"):""),r.a.createElement(p.c,{disabled:o||c,onClick:m,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Registrarme")),r.a.createElement("small",null,"\xbfYa tienes una cuenta? ",r.a.createElement(Oe.a,{to:"login"},"Inicia sesi\xf3n"))),r.a.createElement(ie,{close:d,message:t,open:n}))}}]),a}(n.Component),Be=function(){return r.a.createElement(d.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:qe}),r.a.createElement(g.a,{path:"/login",component:qe}),r.a.createElement(g.a,{path:"/home",component:Pe}),r.a.createElement(g.a,{path:"/signup",component:Ie}))},Re=Object(f.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#1976d2"},secondary:{main:"#c62828"}}}),Je=function(e){function a(){return Object(c.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(f.MuiThemeProvider,{theme:Re},r.a.createElement("div",{className:"App"},r.a.createElement(Be,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=t(5815);o.a.render(r.a.createElement(function(){return r.a.createElement(Ae.a,null,r.a.createElement(Je,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},73:function(e,a,t){}},[[5518,1,2]]]);
//# sourceMappingURL=main.2e3033a0.chunk.js.map