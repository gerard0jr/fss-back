(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{267:function(e,t,a){},41:function(e,t,a){},5523:function(e,t,a){e.exports=a(5817)},5528:function(e,t,a){},5529:function(e,t,a){},5530:function(e,t,a){},5686:function(e,t,a){},5816:function(e,t,a){},5817:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=(a(5528),a(24)),i=a(25),s=a(27),u=a(26),m=a(28),d=(a(5529),a(5823)),g=a(5819),p=a(1),h=a(268),E=function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:10},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,marginLeft:"57px"},bigAvatar:{margin:10,width:60,height:60},flexGrow:{flexGrow:1},salesMenuRoot:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,textAlign:"left"},container:{display:"flex",flexWrap:"wrap"}}},f=a(22),b=a(44),v=a(13),C=a(126),y=a.n(C),w=a(8),P=a.n(w),N=(a(5530),a(12)),S=Object(f.withStyles)(E,{withTheme:!0})(function(e){var t=e.classes,a=e.open,l=e.handleDrawerOpen,c=e.photoURL,o=e.role,i=e.toHome,s=e.handleLocation,u=e.closeSession,m=Object(n.useState)(null),d=Object(v.a)(m,2),g=d[0],h=d[1],E=function(){return h(null)};return r.a.createElement(p.a,{position:"fixed",className:P()(t.appBar,Object(b.a)({},t.appBarShift,a))},r.a.createElement(p.M,{className:"navbar-distribution",disableGutters:!a},r.a.createElement("div",{className:"left-items"},r.a.createElement(p.p,{color:"inherit","aria-label":"Open drawer",onClick:l,className:P()(t.menuButton,Object(b.a)({},t.hide,a))},r.a.createElement(y.a,null)),r.a.createElement("img",{onClick:i,style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),r.a.createElement("div",{onClick:function(e){return h(e.currentTarget)},className:"profile-circled"},r.a.createElement(p.d,{className:"chip-color",clickable:!0,avatar:r.a.createElement(p.b,{alt:"profile-mini-pic",src:c}),label:o}))),r.a.createElement(p.y,{anchorEl:g,open:Boolean(g),onClose:E},r.a.createElement(p.z,{onClick:function(){E(),s("profile")}},r.a.createElement(p.p,null,r.a.createElement(N.a,null)),"Perfil"),r.a.createElement(p.z,{onClick:function(){E(),u()}},r.a.createElement(p.p,null,r.a.createElement(N.i,null)),"Cerrar sesi\xf3n")))}),O=Object(f.withStyles)(E,{withTheme:!0})(function(e){var t,a,n=e.open,l=e.direction,c=e.handleDrawerClose,o=e.classes,i=e.location,s=e.handleLocation;return r.a.createElement(p.l,{variant:"permanent",className:P()(o.drawer,(t={},Object(b.a)(t,o.drawerOpen,n),Object(b.a)(t,o.drawerClose,!n),t)),classes:{paper:P()((a={},Object(b.a)(a,o.drawerOpen,n),Object(b.a)(a,o.drawerClose,!n),a))},open:n},r.a.createElement("div",{className:o.toolbar},r.a.createElement(p.p,{onClick:c},"right"===l?r.a.createElement(N.e,null):r.a.createElement(N.d,null))),r.a.createElement(p.k,null),r.a.createElement(p.u,{component:"nav"},r.a.createElement(p.v,{selected:"root"===i,onClick:function(){return s("root")},button:!0},n?r.a.createElement(p.w,null,r.a.createElement(N.l,null)):r.a.createElement(p.N,{title:"Resumen",placement:"right-start"},r.a.createElement(p.w,null,r.a.createElement(N.l,null))),r.a.createElement(p.x,{primary:"Resumen"})),r.a.createElement(p.v,{selected:"ventas"===i,onClick:function(){return s("ventas")},button:!0},n?r.a.createElement(p.w,null,r.a.createElement(N.b,null)):r.a.createElement(p.N,{title:"Ventas",placement:"right-start"},r.a.createElement(p.w,null,r.a.createElement(N.b,null))),r.a.createElement(p.x,{primary:"Ventas"}))),r.a.createElement(p.k,null),r.a.createElement(p.u,{component:"nav"},r.a.createElement(p.v,{selected:"profile"===i,onClick:function(){return s("profile")},button:!0},n?r.a.createElement(p.w,null,r.a.createElement(N.j,null)):r.a.createElement(p.N,{title:"Perfil",placement:"right-start"},r.a.createElement(p.w,null,r.a.createElement(N.j,null))),r.a.createElement(p.x,{primary:"Perfil"}))))}),x=(a(5686),a(173));x.initializeApp({apiKey:"AIzaSyDiJ--AaTzWP3NdW1j6Zo4wvB17x1Cr2nk",authDomain:"fss-react.firebaseapp.com",databaseURL:"https://fss-react.firebaseio.com",projectId:"fss-react",storageBucket:"fss-react.appspot.com",messagingSenderId:"18829816109"});var D=x,k=a(17),L=a.n(k),j="https://crm-fss.herokuapp.com/auth",G=function(e){return L.a.post("".concat(j,"/signup"),e,{}).then(function(e){return e.data}).catch(function(e){return e.response})},B=function(e){return L.a.post("".concat(j,"/login"),e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return e.response})},I=function(){return L.a.get("".concat(j,"/logout")).then(function(e){return e.data}).catch(function(e){return e.response})},A=function(e,t){return L.a.post("".concat(j,"/updateUser/").concat(e),t,{}).then(function(e){return e.data}).catch(function(e){return e.response})},z=a(5822),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,direction:"left",location:"root",user:{},message:String,progress:0},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e})},a.handleChange=function(e){var t=a.state.user;switch(e.target.id){case"name":t.name=e.target.value;break;case"email":t.email=e.target.value;break;default:return}a.setState({user:t})},a.uploadPhoto=function(e){var t=a.state.user,n=e.target.files[0],r=D.storage().ref("profilePics/".concat(t.name,"-").concat(t._id)).child(n.name).put(n);r.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;t=Math.floor(t),a.setState({progress:t})}),r.then(function(e){return e.ref.getDownloadURL()}).then(function(e){t.photoURL=e,localStorage.setItem("user",JSON.stringify(t)),a.props.updateUser(t),a.setState({user:t,progress:0,open:!0,message:"Foto de perfil actualizada"})})},a.clickInput=function(){document.getElementById("photoUpload").click()},a.closeSession=function(){return I().then(function(e){var t=a.props.history;return localStorage.removeItem("user"),t.push("/login")}).catch(function(e){return e})},a.close=function(){return a.setState({open:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,a=e.user,n=e.message,l=e.progress,c=this.handleChange,o=this.close,i=this.uploadPhoto,s=this.clickInput,u=this.closeSession;return r.a.createElement("div",null,r.a.createElement(p.A,{className:"paper-profile"},r.a.createElement("h2",null,"Perfil de ",a.name),a.photoURL?l>0?r.a.createElement(p.e,{variant:"determinate",value:l}):r.a.createElement("div",{onClick:s,style:{backgroundImage:"url(".concat(a.photoURL,")")},className:"profile-picture"},r.a.createElement("span",null,r.a.createElement(N.c,null),r.a.createElement("p",null,"Editar"))):r.a.createElement(p.e,null),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.L,{InputLabelProps:{shrink:!0},disabled:!0,id:"email",label:"Email",value:a.email,onChange:c,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.L,{InputLabelProps:{shrink:!0},id:"name",label:"Nombre",value:a.name,onChange:c,margin:"normal"})),r.a.createElement("input",{onChange:i,type:"file",name:"photoURL",id:"photoUpload",style:{display:"none"},accept:"image/png, image/jpeg"})),r.a.createElement(p.c,{style:{margin:"2rem 0"},onClick:u,variant:"contained",color:"secondary"},"Cerrar sesi\xf3n",r.a.createElement(N.i,{style:{marginLeft:"0.5rem"}}))),r.a.createElement(p.C,{open:t,message:n,close:o}))}}]),t}(n.Component),q=Object(z.a)(F),R=(a(41),a(51)),_=a(99),J=a(98),M=a.n(J),U=a(49),T=a.n(U),W=a(80),V="https://crm-fss.herokuapp.com/clients",H=function(e){return L.a.post("".concat(V,"/updateClient/").concat(e._id),e).then(function(e){return e}).catch(function(e){return e})},Q=function(e){return L.a.post("".concat(V,"/newClient"),e).then(function(e){return e}).catch(function(e){return e})},X=function(){return L.a.get("".concat(V,"/allClients")).then(function(e){return e}).catch(function(e){return e})},$=function(e){return L.a.post("".concat(V,"/deleteClient/").concat(e)).then(function(e){return e}).catch(function(e){return e})},Y=function(e){var t=e.dialog,a=e.closeDialog,l=e.handleChange,c=e.lead,o=e.clearLead,i=e.submitLead,s=e.updateLead,u=e.dialogNew,m=e.closeDrawer,d=Object(n.useState)([]),g=Object(v.a)(d,2),h=g[0],E=g[1];return Object(n.useEffect)(function(){!function(){var e=Object(W.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().then(function(e){return e.data.sort(function(e,t){return e.bussinessName.localeCompare(t.bussinessName)})}).catch(function(e){return e});case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement(p.g,{open:u||t,onClose:a,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,u?"Nuevo Deal":"Editar deal ".concat(c.prefix,"-").concat(c.seller,"-").concat(c.number," de ").concat(c.clientName?c.clientName.bussinessName:"")),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,u?r.a.createElement(p.n,{className:"text-field"},r.a.createElement(p.s,{shrink:!0},"Cliente"),r.a.createElement(p.B,{required:!0,onChange:l,value:c.clientName,inputProps:{name:"clientName",id:"clientName"}},r.a.createElement(p.z,{value:"",disabled:!0},r.a.createElement("em",null,"Clientes")),h.length?h.filter(function(e){return!0===e.active}).map(function(e,t){return r.a.createElement(p.z,{key:t,value:e._id},e.bussinessName)}):r.a.createElement(p.z,null,"No hay clientes"))):"",r.a.createElement(p.L,{required:!0,className:"text-field",id:"contactName",name:"contactName",label:"Nombre del contacto",defaultValue:c.contactName,onBlur:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"contactPosition",name:"contactPosition",label:"Puesto del contacto",defaultValue:c.contactPosition,onBlur:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"contactPhone",name:"contactPhone",label:"Tel\xe9fono",defaultValue:c.contactPhone,onBlur:l}),r.a.createElement(p.L,{required:!0,className:"text-field",type:"email",id:"contactEmail",name:"contactEmail",label:"Email",defaultValue:c.contactEmail,onBlur:l}),r.a.createElement(p.L,{className:"text-field",type:"text",id:"commentText",name:"commentText",label:"Comentarios",defaultValue:c.commentText,onBlur:l})))),u?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:o,variant:"outlined"},"Limpiar"),r.a.createElement(p.c,{disabled:!c.clientName,onClick:i,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:function(){a(),m()}},"Cancelar"),r.a.createElement(p.c,{onClick:function(){s(c._id)},color:"primary",variant:"contained"},"Actualizar")))},Z="https://crm-fss.herokuapp.com/leads",K=function(e){return L.a.get("".concat(Z,"/getAll/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})},ee=function(e,t){return L.a.post("".concat(Z,"/newLead/").concat(e),t,{}).then(function(e){return e}).catch(function(e){return e.response})},te=function(e){var t=e.id;return L.a.post("".concat(Z,"/removeLead/").concat(t)).then(function(e){return e}).catch(function(e){return e.response})},ae=function(e,t){return L.a.post("".concat(Z,"/removeUserLead/").concat(e),t).then(function(e){return e}).catch(function(e){return e.response})},ne=function(e,t){return L.a.post("".concat(Z,"/updateLead/").concat(e),t).then(function(e){return e}).catch(function(e){return e.response})},re=function(e){var t=e.lead,a=e.updateLeadState,l=Object(n.useState)(null),c=Object(v.a)(l,2),o=c[0],i=c[1],s=Object(n.useState)(null),u=Object(v.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(!1),h=Object(v.a)(g,2),E=h[0],f=h[1],b=Object(n.useState)(!1),C=Object(v.a)(b,2),y=C[0],w=C[1],P=Object(n.useState)(!1),S=Object(v.a)(P,2),O=S[0],x=S[1],k=function(){return w(!y)},j=function(){return x(!O)},G=function(e){return"file0"===e.target.name?i(e.target.files[0]):d(e.target.files[0])},B=function(e){(function(e){return L.a.get("".concat(Z,"/deleteFile0/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})})(e).then(function(e){return a(e.data)}).catch(function(e){return e})},I=function(e){(function(e){return L.a.get("".concat(Z,"/deleteFile1/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})})(e).then(function(e){return a(e.data)}).catch(function(e){return e})};return r.a.createElement("div",{className:"general-container"},r.a.createElement("div",{className:"file-layout"},r.a.createElement("div",{className:"file-input"},r.a.createElement("p",{className:"small-font"},"Primer archivo"),t.fileURL0?r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.fileURL0,className:"success-upload"},t.file0Name),r.a.createElement(p.p,{onClick:k,"aria-label":"Delete"},r.a.createElement(N.g,null))):r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:G,type:"file",name:"file0",id:"first"}),r.a.createElement("button",{id:"file0",onClick:function(){var e;null!==o&&((e=D.storage().ref("documents/".concat(t.prefix,"-").concat(t.seller,"-").concat(t.number,"/firstFile")).child(o.name).put(o)).on("state_changed",function(e){f(!0)}),e.then(function(e){return e.ref.getDownloadURL()}).then(function(e){(function(e,t,a){var n={link:e,name:a};return L.a.post("".concat(Z,"/file0Upload/").concat(t),n).then(function(e){return e}).catch(function(e){return e.response})})({link:e},t._id,o.name).then(function(e){a(e.data),f(!1)}).catch(function(e){return e})}))}},"Subir"))),r.a.createElement("div",{className:"file-input"},r.a.createElement("p",{className:"small-font"},"Segundo archivo"),t.fileURL1?r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.fileURL1,className:"success-upload"},t.file1Name),r.a.createElement(p.p,{onClick:j,"aria-label":"Delete"},r.a.createElement(N.g,null))):r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:G,type:"file",name:"file1",id:"first"}),r.a.createElement("button",{id:"file1",onClick:function(){var e;null!==m&&((e=D.storage().ref("documents/".concat(t.prefix,"-").concat(t.seller,"-").concat(t.number,"/secondFile")).child(m.name).put(m)).on("state_changed",function(e){f(!0)}),e.then(function(e){return e.ref.getDownloadURL()}).then(function(e){(function(e,t,a){var n={link:e,name:a};return L.a.post("".concat(Z,"/file1Upload/").concat(t),n).then(function(e){return e}).catch(function(e){return e.response})})({link:e},t._id,m.name).then(function(e){a(e.data),f(!1)}).catch(function(e){return e})}))}},"Subir")))),r.a.createElement("div",{className:"progress"},E?r.a.createElement(p.t,null):""),r.a.createElement(p.g,{open:y,onClose:k},r.a.createElement(p.j,null,'\xbfDeseas eliminar "Primer archivo"?'),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:k,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){B(t._id),k()},color:"secondary",autoFocus:!0},"Eliminar"))),r.a.createElement(p.g,{open:O,onClose:j},r.a.createElement(p.j,null,'\xbfDeseas eliminar "Segundo archivo"?'),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:j,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){I(t._id),j()},color:"secondary",autoFocus:!0},"Eliminar"))))},le="https://crm-fss.herokuapp.com/quotations",ce=function(e){var t=e.open,a=e.message,n=e.close;return r.a.createElement(p.C,{color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:6e3,onClose:n,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},a),action:[r.a.createElement(p.p,{key:"close","aria-label":"Close",color:"inherit",onClick:n},r.a.createElement(N.f,null))]})},oe=a(271),ie=a.n(oe),se=a(67),ue=a.n(se);a(117);var me=function(e){var t=e.drawer,a=e.closeDrawer,l=(e.leads,e.lead),c=e.deleteLead,o=e.handleChange,i=e.quotations,s=e.getQuotations,u=e.handleDateChange,m=(e.loading,e.updateLead),d=e.dialog,g=e.closeDialog,h=e.openDialog,E=e.updateLeadState,f=Object(n.useState)(!1),b=Object(v.a)(f,2),C=b[0],y=b[1],w=function(){return y(!C)},P=Object(n.useState)(!1),S=Object(v.a)(P,2),O=S[0],x=S[1],D=function(){return x(!O)},k=Object(n.useState)(!1),j=Object(v.a)(k,2),G=j[0],B=j[1],I=function(e){if(G)return B(!G);B(!G),q(e)},A=Object(n.useState)({}),z=Object(v.a)(A,2),F=z[0],q=z[1],R=function(e){F[e.target.name]=e.target.value,q(F)},_=function(e){F.quotCounter=i.length?i[i.length-1].quotCounter+1:1,function(e,t){return L.a.post("".concat(le,"/submitQuotation/").concat(e),t).then(function(e){return e}).catch(function(e){return e})}(e,F).then(function(t){Z("Cotizaci\xf3n creada"),s(e)}).catch(function(e){return e})},J=function(e,t){return function(e){return L.a.post("".concat(le,"/delQuot/").concat(e)).then(function(e){return e}).catch(function(e){return e})}(e).then(function(e){Z("Cotizaci\xf3n eliminada"),s(t)}).catch(function(e){return e})},M=function(e,t,a){return function(e,t){return L.a.post("".concat(le,"/updateQuot/").concat(e),t).then(function(e){return e}).catch(function(e){return e})}(e,t).then(function(e){Z("Cotizaci\xf3n actualizada"),s(a)}).catch(function(e){return e})},U=Object(n.useState)(!1),T=Object(v.a)(U,2),W=T[0],V=T[1],H=Object(n.useState)(""),Q=Object(v.a)(H,2),X=Q[0],$=Q[1],Z=function(e){$(e),V(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.l,{anchor:"right",open:t,onClose:a},r.a.createElement("div",{className:"drawer-layout"},r.a.createElement("h2",null,"Deal ","".concat(l.prefix,"-").concat(l.seller,"-").concat(l.number)),r.a.createElement(p.n,null,r.a.createElement(p.B,{className:"drawer-status",value:l.status,onChange:u(l._id,l,l.status),inputProps:{name:"status",id:"status"}},r.a.createElement(p.z,{value:"Propuesta"},"Propuesta"),r.a.createElement(p.z,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),r.a.createElement(p.z,{value:"Confirmaci\xf3n de pedido"},"Confirmaci\xf3n de pedido (Ganada)"),r.a.createElement(p.z,{value:"Perdida"},"Perdida"),r.a.createElement(p.z,{value:"Primer Cobro"},"Primer cobro"))),r.a.createElement(p.k,{variant:"middle"}),r.a.createElement("h3",{style:{color:"rgb(115, 115, 115)"}},l.clientName?l.clientName.bussinessName:""),r.a.createElement("div",{className:"drawer-two-columns"},r.a.createElement("div",{className:"left-column"},r.a.createElement("p",{className:"small-font"},"Contacto:"),r.a.createElement("p",{className:"blue-font"},l.contactName?l.contactName:"Ninguno",r.a.createElement("small",{style:{color:"gray"}}," (",l.contactPosition?l.contactPosition:"-",")")),r.a.createElement("p",{className:"small-font"},"Tel\xe9fono:"),r.a.createElement("p",{className:"blue-font"},l.contactPhone?l.contactPhone:"-"),r.a.createElement("p",{className:"small-font"},"Email:"),r.a.createElement("p",{className:"blue-font"},l.contactEmail?l.contactEmail:"Sin email"),r.a.createElement("p",{className:"small-font"},"Direcci\xf3n:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.bussinessAddress?l.clientName.bussinessAddress:"Sin direcci\xf3n"):"Sin direcci\xf3n"),r.a.createElement("div",{className:"right-column"},r.a.createElement("p",{className:"small-font"},"Giro:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.bussinessRole?l.clientName.bussinessRole:"Sin giro"):"Sin giro",r.a.createElement("p",{className:"small-font"},"Industria:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.industry?l.clientName.industry:"Sin industria"):"Sin industria",r.a.createElement("p",{className:"small-font"},"Origen:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.origin?l.clientName.origin:"Sin origen"):"Sin origen",r.a.createElement("p",{className:"small-font"},"Empleados:"),l.clientName?r.a.createElement("p",{className:"blue-font"},l.clientName.bussinessEmployees?l.clientName.bussinessEmployees:"Sin empleados"):"Sin empleados")),r.a.createElement(p.k,{variant:"middle"}),r.a.createElement("div",{className:""},r.a.createElement("p",{className:"small-font"},"Comentarios"),r.a.createElement("p",{className:"blue-font"},l.commentText),r.a.createElement(p.k,null),r.a.createElement("p",{className:"small-font"},"Cotizaciones"),r.a.createElement(p.A,{style:{maxWidth:"800px"}},r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,null,"ID"),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},"Fecha"),r.a.createElement(p.G,null,"Descripci\xf3n"),r.a.createElement(p.G,null,"Monto mensual"),r.a.createElement(p.G,{style:{width:"200px",padding:"0px"}},"Acciones"))),r.a.createElement(p.F,null,i.length?i.filter(function(e){return!0===e.active}).map(function(e){return r.a.createElement(p.J,{key:e._id},r.a.createElement(p.G,{component:"th",scope:"row"},l.clientName?e.quotPrefix+"-"+l.clientName.bussinessID+"-"+e.quotCounter:""),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},ue()(e.createdAt).format("d/MMMM/Y")),r.a.createElement(p.G,null,e.quotDescription?e.quotDescription:"Sin descripci\xf3n"),r.a.createElement(p.G,null,e.quotAmount?r.a.createElement(ie.a,{quantity:e.quotAmount}):"$0"),r.a.createElement(p.G,{style:{width:"200px",padding:"0px"}},r.a.createElement(p.N,{title:"Editar",placement:"right"},r.a.createElement(p.p,{onClick:function(){return I(e)},"aria-label":"Delete"},r.a.createElement(N.h,{fontSize:"small"}))),r.a.createElement(p.N,{title:"Eliminar",placement:"right"},r.a.createElement(p.p,{onClick:function(){J(e._id,l._id),s()},"aria-label":"Delete"},r.a.createElement(N.g,{fontSize:"small"})))))}):r.a.createElement(p.J,null,r.a.createElement(p.G,{component:"th",scope:"row"},"Sin cotizaciones"))))),r.a.createElement(p.c,{onClick:D,style:{margin:"1rem"},variant:"contained"},"Crear cotizaci\xf3n"),r.a.createElement(p.k,null),r.a.createElement("p",{className:"small-font"},"Archivos"),r.a.createElement(re,{updateLeadState:E,lead:l})),r.a.createElement("div",{className:"button-container"},r.a.createElement(p.c,{variant:"contained",onClick:a},"Cerrar"),r.a.createElement(p.c,{onClick:w,variant:"contained",color:"secondary"},"Borrar"),r.a.createElement(p.c,{onClick:function(){h(l,"update")},variant:"contained",color:"primary"},"Editar"))),r.a.createElement(p.g,{open:C,onClose:w},r.a.createElement(p.j,null,"Eliminar ","".concat(l.prefix,"-").concat(l.seller,"-").concat(l.number)),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:w,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){c(l._id),w(),a()},color:"secondary",autoFocus:!0},"Eliminar"))),r.a.createElement(Y,{closeDrawer:a,dialog:d,closeDialog:g,handleChange:o,lead:l,updateLead:m}),r.a.createElement(p.g,{open:O,onClose:D},r.a.createElement(p.j,null,"Nueva cotizaci\xf3n para ","".concat(l.prefix,"-").concat(l.seller,"-").concat(l.number)," ",r.a.createElement("small",{style:{color:"rgb(115, 115, 115)"}},"(",l.clientName?l.clientName.bussinessName:"",")")),r.a.createElement(p.i,null,r.a.createElement(p.L,{autoFocus:!0,margin:"dense",id:"quotBill",name:"quotBill",label:"Factura",type:"number",onChange:R,fullWidth:!0}),r.a.createElement(p.L,{autoFocus:!0,margin:"dense",id:"quotDescription",name:"quotDescription",label:"Descripci\xf3n",type:"text",onChange:R,fullWidth:!0}),r.a.createElement(p.n,{style:{marginTop:"1rem"}},r.a.createElement(p.s,{htmlFor:"adornment-amount"},"Monto mensual"),r.a.createElement(p.q,{type:"number",id:"quotAmount",name:"quotAmount",onChange:R,startAdornment:r.a.createElement(p.r,{position:"start"},"$")}))),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:D,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){D(),_(l._id)},color:"primary",autoFocus:!0},"Crear"))),r.a.createElement(p.g,{open:G,onClose:I},r.a.createElement(p.j,null,"Editar cotizaci\xf3n ",F.quotPrefix?F.quotPrefix:""," ",r.a.createElement("small",{style:{color:"rgb(115, 115, 115)"}},"(",l.clientName?l.clientName.bussinessName:"",")")),r.a.createElement(p.i,null,r.a.createElement(p.L,{autoFocus:!0,margin:"dense",name:"quotPO",label:"Orden de compra",type:"number",defaultValue:F.quotPO,onChange:R,fullWidth:!0}),r.a.createElement(p.L,{autoFocus:!0,margin:"dense",name:"quotBill",label:"Factura",type:"number",defaultValue:F.quotBill,onChange:R,fullWidth:!0}),r.a.createElement(p.L,{autoFocus:!0,margin:"dense",name:"quotDescription",label:"Descripci\xf3n",type:"text",defaultValue:F.quotDescription,onChange:R,fullWidth:!0}),r.a.createElement(p.n,{style:{marginTop:"1rem"}},r.a.createElement(p.s,{htmlFor:"adornment-amount"},"Monto mensual"),r.a.createElement(p.q,{type:"number",name:"quotAmount",defaultValue:F.quotAmount,onChange:R,startAdornment:r.a.createElement(p.r,{position:"start"},"$")}))),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:I,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){M(F._id,F,l._id),I()},color:"primary",autoFocus:!0},"Actualizar")))),r.a.createElement(ce,{close:function(){return V(!1)},message:X,open:W}))},de=function(e){var t=e.leads,a=e.rowsPerPage,l=e.page,c=e.handleChangePage,o=e.handleChangeRowsPerPage,i=e.deleteLead,s=e.dialog,u=e.closeDialog,m=e.handleChange,d=e.lead,g=e.openDialog,h=e.updateLead,E=e.handleDateChange,f=e.loading,b=e.openDrawer,C=e.closeDrawer,y=e.drawer,w=e.updateLeadState,P=Object(n.useState)(""),S=Object(v.a)(P,2),O=S[0],x=S[1],D=Object(n.useState)([]),k=Object(v.a)(D,2),j=k[0],G=k[1],B=Object(n.useState)(!1),I=Object(v.a)(B,2),A=I[0],z=I[1],F=function(e){(function(e){return L.a.get("".concat(le,"/getQuotations/").concat(e)).then(function(e){return e}).catch(function(e){return e})})(e).then(function(e){return G(e.data.quotations)}).catch(function(e){return e})};return r.a.createElement("div",null,r.a.createElement(p.A,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"Deals"),r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return x(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Ver/Editar"),r.a.createElement(p.G,null,"ID"),r.a.createElement(p.G,null,"Empresa"),r.a.createElement(p.G,null,"Contacto"),r.a.createElement(p.G,null,"Tel\xe9fono"),r.a.createElement(p.G,null,"Email"),r.a.createElement(p.G,null,"Estatus"),r.a.createElement(p.G,null,"Reuni\xf3n"))),r.a.createElement(p.F,null,t.length?t.filter(function(e){return e.clientName?e.prefix.concat("-",e.seller,"-",e.number).includes(O.toUpperCase())||e.clientName.bussinessName.toLowerCase().includes(O.toLowerCase()):[]}).map(function(e,t){return t<10*l+10&&t>=10*l?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.J,{key:t},r.a.createElement(p.G,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){b(e),F(e._id)},variant:"extended",color:"primary",size:"small"},r.a.createElement(N.h,{fontSize:"small"}))),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),r.a.createElement(p.G,{component:"th",scope:"row"},e.clientName?e.clientName.bussinessID:null),r.a.createElement(p.G,null,e.contactName),r.a.createElement(p.G,null,r.a.createElement("a",{style:{color:"#1976d2"},href:"tel:+".concat(e.contactPhone)},e.contactPhone)),r.a.createElement(p.G,null,r.a.createElement("a",{style:{color:"#1976d2"},href:"mailto:".concat(e.contactEmail)},e.contactEmail)),r.a.createElement(p.G,null,r.a.createElement(p.n,null,r.a.createElement(p.B,{value:e.status,onChange:E(e._id,e,e.status),inputProps:{name:"status",id:"status"}},r.a.createElement(p.z,{value:"Propuesta"},"Propuesta"),r.a.createElement(p.z,{value:"Negociaci\xf3n"},"Negociaci\xf3n"),r.a.createElement(p.z,{value:"Confirmaci\xf3n de pedido"},"Confirmado/Ganado"),r.a.createElement(p.z,{value:"Perdida"},"Perdida"),r.a.createElement(p.z,{value:"Primer Cobro"},"Primer cobro")))),e.meetingDate?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},r.a.createElement(R.b,{utils:_.a,locale:M.a,views:["year"]},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(R.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.meetingDate,onChange:E(e._id,e,null),format:"dd/MM/yyyy"})))),r.a.createElement(p.G,{style:{width:"200px",padding:"5px"}},r.a.createElement(R.b,{utils:_.a,locale:M.a},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(R.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.meetingDate,onChange:E(e._id,e,null)}))))):r.a.createElement(p.G,null,r.a.createElement(p.c,{onClick:function(){return z(!0)}},"Agendar"))),r.a.createElement(p.l,{anchor:"right",open:A},r.a.createElement("div",{className:"drawer-layout"},r.a.createElement("h2",null,"Agendar reuni\xf3n ",e.contactName?"con ".concat(e.contactName):""),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},r.a.createElement(R.b,{utils:_.a,locale:M.a,views:["year"]},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(R.a,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Fecha",value:e.meetingDate,onChange:E(e._id,e,null),format:"dd/MM/yyyy"})))),r.a.createElement(p.G,{style:{width:"200px",padding:"5px"}},r.a.createElement(R.b,{utils:_.a,locale:M.a},r.a.createElement(p.o,{container:!0,justify:"space-around"},r.a.createElement(R.c,{okLabel:"Guardar",cancelLabel:"Cancelar",label:"Hora",value:e.meetingDate,onChange:E(e._id,e,null)})))),r.a.createElement("div",{className:"button-container"},r.a.createElement(p.c,{variant:"contained",onClick:function(){return z(!1)}},"Cerrar"))))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},f?"Cargando...":"No hay leads"),r.a.createElement(p.G,{component:"th",scope:"row"},f?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:t?t.length:0,rowsPerPage:a,page:l,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:c,onChangeRowsPerPage:o})),r.a.createElement(me,{drawer:y,closeDrawer:C,leads:t,deleteLead:i,handleChange:m,lead:d,updateLead:h,handleDateChange:E,loading:f,dialog:s,closeDialog:u,openDialog:g,updateLeadState:w,quotations:j,getQuotations:F}))},ge=function(e){var t=e.handleChange,a=e.lead,n=e.leads,l=e.handleChangePage,c=e.handleChangeRowsPerPage,o=e.rowsPerPage,i=e.page,s=e.submitLead,u=e.clearLead,m=e.deleteLead,d=e.openDialog,g=e.closeDialog,h=e.dialog,E=e.dialogNew,f=e.updateLead,b=e.handleDateChange,v=e.loading,C=e.openDrawer,y=e.closeDrawer,w=e.drawer,P=e.updateLeadState;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(de,{handleChangePage:l,handleChangeRowsPerPage:c,page:i,rowsPerPage:o,leads:n,deleteLead:m,dialog:h,openDialog:d,closeDialog:g,handleChange:t,lead:a,clearLead:u,submitLead:s,updateLead:f,handleDateChange:b,loading:v,openDrawer:C,closeDrawer:y,drawer:w,updateLeadState:P}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nuevo Deal")),r.a.createElement(Y,{dialogNew:E,closeDialog:g,handleChange:t,lead:a,clearLead:u,submitLead:s}))},pe=function(e){var t=e.dialog,a=e.closeDialog,l=e.handleChange,c=e.dialogNew,o=e.client,i=void 0===o?{}:o,s=e.submitClient,u=e.deleteClient,m=Object(n.useState)(!1),d=Object(v.a)(m,2),g=d[0],h=d[1],E=function(){return h(!g)};return r.a.createElement(p.g,{open:c||t,onClose:a,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,c?"Agregar cliente":"Editar ".concat(i.bussinessName)),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessName",label:"Nombre de la empresa",value:i.bussinessName,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessID",label:"Abreviaci\xf3n",value:i.bussinessID,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessAddress",label:"Direcci\xf3n",value:i.bussinessAddress,onChange:l})),r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"bussinessRole",label:"Giro",value:i.bussinessRole,onChange:l}),r.a.createElement(p.L,{className:"text-field",type:"text",id:"industry",label:"Industria",value:i.industry,onChange:l}),r.a.createElement(p.n,{className:"text-field"},r.a.createElement(p.s,{shrink:!0,htmlFor:"origin"},"Origen"),r.a.createElement(p.B,{required:!0,value:i.origin,onChange:l,inputProps:{name:"Origen",id:"origin"}},r.a.createElement(p.z,{value:"",disabled:!0},r.a.createElement("em",null,"Selecciona  ")),r.a.createElement(p.z,{value:"Nacional"},"Nacional"),r.a.createElement(p.z,{value:"Extranjero"},"Extranjero"))),r.a.createElement(p.L,{required:!0,type:"number",className:"text-field",id:"bussinessEmployees",label:"No. de empleados",value:i.bussinessEmployees,onChange:l})))),c?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:s,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:function(){return E(i._id)},color:"secondary",variant:"contained"},"Borrar"),r.a.createElement(p.c,{onClick:function(){return s("update")},color:"primary",variant:"contained"},"Actualizar")),r.a.createElement(p.g,{open:g,onClose:E},r.a.createElement(p.j,null,"Eliminar ","".concat(i.bussinessName)),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:E,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){u(i._id),E()},color:"secondary",autoFocus:!0},"Eliminar"))))},he=function(e){var t=e.rowsPerPage,a=e.page,l=e.handleChangePage,c=e.handleChangeRowsPerPage,o=e.dialog,i=e.closeDialog,s=e.handleChange,u=e.openDialog,m=e.loading,d=e.client,g=e.clients,h=void 0===g?[]:g,E=e.submitClient,f=e.deleteClient,b=Object(n.useState)(""),C=Object(v.a)(b,2),y=C[0],w=C[1];return r.a.createElement("div",null,r.a.createElement(p.A,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"Clientes"),r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return w(e.target.value)},value:y,id:"search-on-table",label:"ID/Nombre"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Editar"),r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"ID"),r.a.createElement(p.G,null,"Nombre"),r.a.createElement(p.G,null,"Direcci\xf3n"),r.a.createElement(p.G,null,"Giro"),r.a.createElement(p.G,null,"Industria"),r.a.createElement(p.G,null,"Origen"),r.a.createElement(p.G,null,"Empleados"))),r.a.createElement(p.F,null,h.length?h.filter(function(e){return e.bussinessName.toLowerCase().includes(y.toLowerCase())}).map(function(e,t){return t<10*a+10&&t>=10*a&&e.active?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){return u(e,"update")},variant:"extended",color:"primary",size:"small"},r.a.createElement(N.h,{fontSize:"small"}))),r.a.createElement(p.G,{style:{width:"50px",padding:"8px"}},e.bussinessID),r.a.createElement(p.G,{component:"th",scope:"row"},e.bussinessName),r.a.createElement(p.G,{style:{width:"200px",padding:"8px"}},e.bussinessAddress),r.a.createElement(p.G,null,e.bussinessRole),r.a.createElement(p.G,null,e.industry),r.a.createElement(p.G,null,e.origin),r.a.createElement(p.G,null,e.bussinessEmployees)):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},m?"Cargando...":"No hay clientes"),r.a.createElement(p.G,{component:"th",scope:"row"},m?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:h?h.filter(function(e){return!0===e.active}).length:0,rowsPerPage:t,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:l,onChangeRowsPerPage:c})),r.a.createElement(pe,{dialog:o,closeDialog:i,handleChange:s,client:d,submitClient:E,deleteClient:f}))},Ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},client:{},clients:[],loading:!0,page:0,rowsPerPage:10,message:String,dialog:!1,dialogNew:!1,open:!1},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){return a.getClients()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.handleChange=function(e){var t=a.state.client;if("Origen"===e.target.name)return t.origin=e.target.value,a.setState({client:t});t[e.target.id]=e.target.value,a.setState({client:t})},a.getClients=function(){return X().then(function(e){return a.setState({clients:e.data.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},a.submitClient=function(e){var t=a.state.client;if("update"===e)return H(t).then(function(e){return a.setState({dialog:!1,open:!0,message:"Cliente actualizado"},a.getClients)}).catch(function(e){return console.log(e)});Q(t).then(function(e){return a.setState({dialogNew:!1,open:!0,message:"Cliente agregado"},a.getClients)}).catch(function(e){return console.log(e)})},a.deleteClient=function(e){$(e).then(function(e){return a.setState({dialog:!1,open:!0,message:"Cliente eliminado"},a.getClients)}).catch(function(e){return e})},a.close=function(){return a.setState({open:!1})},a.openDialog=function(e,t){"update"===t?a.setState({dialog:!0,client:e}):a.setState({dialogNew:!0,client:{}})},a.closeDialog=function(){return a.setState({dialog:!1,dialogNew:!1},a.getClients)},a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({rowsPerPage:e.target.value})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.page,n=e.rowsPerPage,l=e.message,c=e.dialog,o=e.dialogNew,i=e.open,s=e.clients,u=e.client,m=this.close,d=this.openDialog,g=this.closeDialog,h=this.handleChangePage,E=this.handleChangeRowsPerPage,f=this.submitClient,b=this.handleChange,v=this.deleteClient;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(he,{handleChangePage:h,handleChangeRowsPerPage:E,page:a,rowsPerPage:n,dialog:c,loading:t,clients:s,client:u,handleChange:b,submitClient:f,openDialog:d,closeDialog:g,deleteClient:v}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nuevo cliente")),r.a.createElement(pe,{client:u,dialogNew:o,closeDialog:g,handleChange:b,submitClient:f}),r.a.createElement(ce,{close:m,message:l,open:i}))}}]),t}(n.Component),fe="http://localhost:3000/orders",be=function(e,t){return L.a.post("".concat(fe,"/updateOrder/").concat(t),e).then(function(e){return e}).catch(function(e){return e})},ve=function(e,t){return L.a.post("".concat(fe,"/newOrder/").concat(t),e).then(function(e){return e}).catch(function(e){return e})},Ce=function(e){return L.a.get("".concat(fe,"/allOrders/").concat(e)).then(function(e){return e}).catch(function(e){return e})},ye=function(e){return L.a.post("".concat(fe,"/removeOrder/").concat(e)).then(function(e){return e}).catch(function(e){return e})},we=function(e){var t=e.dialog,a=e.closeDialog,l=e.handleChange,c=e.dialogNew,o=e.order,i=void 0===o?{}:o,s=e.submitOrder,u=e.deleteOrder,m=Object(n.useState)(!1),d=Object(v.a)(m,2),g=d[0],h=d[1],E=function(){return h(!g)},f=Object(n.useState)([]),b=Object(v.a)(f,2),C=b[0],y=b[1];return Object(n.useEffect)(function(){!function(){var e=Object(W.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().then(function(e){return e.data.sort(function(e,t){return e.bussinessName.localeCompare(t.bussinessName)})}).catch(function(e){return e});case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement(p.g,{open:c||t,onClose:a,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,c?"Nueva orden de compra":"Editar orden ".concat(i.id)),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"id",label:"No. de orden",value:i.id,onChange:l}),r.a.createElement(p.n,{className:"text-field"},r.a.createElement(p.s,{shrink:!0},"Cliente"),r.a.createElement(p.B,{required:!0,onChange:l,value:i.client?i.client._id?i.client._id:i.client:"",id:"client",inputProps:{name:"client"}},r.a.createElement(p.z,{value:"",disabled:!0},r.a.createElement("em",null,"Clientes")),C.length?C.filter(function(e){return!0===e.active}).map(function(e,t){return r.a.createElement(p.z,{key:t,value:e._id},e.bussinessName)}):r.a.createElement(p.z,null,"No hay clientes"))),r.a.createElement(p.L,{required:!0,className:"text-field",id:"area",label:"Area/Departamento",value:i.area,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"contact",label:"Contacto del cliente",value:i.contact,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"responsible",label:"Responsable del seguimiento",value:i.responsible,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"seller",label:"Vendedor",value:i.seller,onChange:l})))),c?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:s,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:function(){return E()},color:"secondary",variant:"contained"},"Borrar"),r.a.createElement(p.c,{onClick:function(){return s("update")},color:"primary",variant:"contained"},"Actualizar")),r.a.createElement(p.g,{open:g,onClose:E},r.a.createElement(p.j,null,"Eliminar orden ","".concat(i.id)),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:E,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){u(i._id),E()},color:"secondary",autoFocus:!0},"Eliminar"))))},Pe=function(e){var t=e.rowsPerPage,a=e.page,l=e.handleChangePage,c=e.handleChangeRowsPerPage,o=e.dialog,i=e.closeDialog,s=e.handleChange,u=e.openDialog,m=e.loading,d=e.order,g=e.orders,h=void 0===g?[]:g,E=e.submitOrder,f=e.deleteOrder,b=e.handleStatus,C=Object(n.useState)(""),y=Object(v.a)(C,2),w=y[0],P=y[1];return r.a.createElement("div",null,r.a.createElement(p.A,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"\xd3rdenes de compra"),r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{style:{maxWidth:"50px"},onChange:function(e){return P(e.target.value)},value:w,id:"search-on-table",label:"ID"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Editar"),r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Orden"),r.a.createElement(p.G,null,"Cliente"),r.a.createElement(p.G,null,"\xc1rea/Depart."),r.a.createElement(p.G,null,"Contacto"),r.a.createElement(p.G,null,"Responsable"),r.a.createElement(p.G,null,"Vendedor"),r.a.createElement(p.G,null,"Estado"))),r.a.createElement(p.F,null,h.length?h.filter(function(e){return e.id.includes(w)}).map(function(e,t){return t<10*a+10&&t>=10*a&&e.active?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){return u(e,"update")},variant:"extended",color:"primary",size:"small"},r.a.createElement(N.h,{fontSize:"small"}))),r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},e.id),r.a.createElement(p.G,{component:"th",scope:"row"},e.client?e.client.bussinessID:null),r.a.createElement(p.G,null,e.area),r.a.createElement(p.G,null,e.contact),r.a.createElement(p.G,null,e.responsible),r.a.createElement(p.G,null,e.seller),r.a.createElement(p.G,null,r.a.createElement(p.L,{select:!0,value:e.status,onChange:b(e),name:"status",id:"status",InputProps:{startAdornment:r.a.createElement(p.r,{position:"start"},r.a.createElement("div",{style:"Generada"===e.status?{backgroundColor:"#f3f300"}:"Enviada"===e.status?{backgroundColor:"#6E6EFF"}:{backgroundColor:"#00CC2C"},className:"circle"}))}},r.a.createElement(p.z,{value:"Generada"},"Generada"),r.a.createElement(p.z,{value:"Enviada"},"Enviada"),r.a.createElement(p.z,{value:"Facturada"},"Facturada")))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},m?"Cargando...":"No hay \xf3rdenes de compra"),r.a.createElement(p.G,{component:"th",scope:"row"},m?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:h?h.filter(function(e){return!0===e.active}).length:0,rowsPerPage:t,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:l,onChangeRowsPerPage:c})),r.a.createElement(we,{dialog:o,closeDialog:i,handleChange:s,order:d,submitOrder:E,deleteOrder:f}))},Ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},order:{},orders:[],loading:!0,page:0,rowsPerPage:10,message:String,dialog:!1,dialogNew:!1,open:!1},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){return a.getOrders()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.handleChange=function(e){var t=a.state.order;if("client"===e.target.name)return t.client=e.target.value,a.setState({order:t});t[e.target.id]=e.target.value,a.setState({order:t})},a.getOrders=function(){var e=a.state.user;Ce(e._id).then(function(e){return a.setState({orders:e.data.orders.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},a.submitOrder=function(e){var t=a.state,n=t.order,r=t.user;if("update"===e)return be(n,n._id).then(function(e){return a.setState({dialog:!1,open:!0,message:"Orden actualizada"},a.getOrders)}).catch(function(e){return console.log(e)});ve(n,r._id).then(function(e){return a.setState({dialogNew:!1,open:!0,message:"Orden agregada"},a.getOrders)}).catch(function(e){return console.log(e)})},a.deleteOrder=function(e){ye(e).then(function(e){return a.setState({dialog:!1,open:!0,message:"Orden eliminada"},a.getOrders)}).catch(function(e){return e})},a.handleStatus=function(e){return function(t){e[t.target.name]=t.target.value,be(e,e._id).then(function(e){return a.setState({dialog:!1,open:!0,message:"Orden actualizada"},a.getOrders)}).catch(function(e){return console.log(e)})}},a.close=function(){return a.setState({open:!1})},a.openDialog=function(e,t){"update"===t?a.setState({dialog:!0,order:e}):a.setState({dialogNew:!0,order:{}})},a.closeDialog=function(){return a.setState({dialog:!1,dialogNew:!1},a.getOrders)},a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({rowsPerPage:e.target.value})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.page,n=e.rowsPerPage,l=e.message,c=e.dialog,o=e.dialogNew,i=e.open,s=e.orders,u=e.order,m=this.close,d=this.openDialog,g=this.closeDialog,h=this.handleChangePage,E=this.handleChangeRowsPerPage,f=this.submitOrder,b=this.handleChange,v=this.deleteOrder,C=this.handleStatus;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(Pe,{handleChangePage:h,handleChangeRowsPerPage:E,page:a,rowsPerPage:n,dialog:c,loading:t,orders:s,order:u,handleChange:b,submitOrder:f,openDialog:d,closeDialog:g,deleteOrder:v,handleStatus:C}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nueva Orden de compra")),r.a.createElement(we,{order:u,dialogNew:o,closeDialog:g,handleChange:b,submitOrder:f}),r.a.createElement(ce,{close:m,message:l,open:i}))}}]),t}(n.Component),Se="http://localhost:3000/bills",Oe=function(e,t){return L.a.post("".concat(Se,"/updateBill/").concat(t),e).then(function(e){return e}).catch(function(e){return e})},xe=function(e,t){return L.a.post("".concat(Se,"/newBill/").concat(t),e).then(function(e){return e}).catch(function(e){return e})},De=function(e){return L.a.get("".concat(Se,"/allBills/").concat(e)).then(function(e){return e}).catch(function(e){return e})},ke=function(e){return L.a.post("".concat(Se,"/removeBill/").concat(e)).then(function(e){return e}).catch(function(e){return e})},Le=function(e){var t=e.dialog,a=e.closeDialog,l=e.handleChange,c=e.dialogNew,o=e.bill,i=void 0===o?{}:o,s=e.submitBill,u=e.deleteBill,m=Object(n.useState)(!1),d=Object(v.a)(m,2),g=d[0],h=d[1],E=function(){return h(!g)},f=Object(n.useState)([]),b=Object(v.a)(f,2),C=b[0],y=b[1];return Object(n.useEffect)(function(){!function(){var e=Object(W.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().then(function(e){return e.data.sort(function(e,t){return e.bussinessName.localeCompare(t.bussinessName)})}).catch(function(e){return e});case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement(p.g,{open:c||t,onClose:a,"aria-labelledby":"new-form"},r.a.createElement(p.j,null,c?"Nueva Factura":"Editar factura ".concat(i.id)),r.a.createElement(p.i,null,r.a.createElement("form",{className:"sales-oportunity-fields",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(p.L,{required:!0,className:"text-field",id:"id",label:"No. de factura",value:i.id,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"order",label:"Orden de compra",value:i.order,onChange:l}),r.a.createElement(p.n,{className:"text-field"},r.a.createElement(p.s,{shrink:!0},"Cliente"),r.a.createElement(p.B,{required:!0,onChange:l,value:i.client?i.client._id?i.client._id:i.client:"",id:"client",inputProps:{name:"client"}},r.a.createElement(p.z,{value:"",disabled:!0},r.a.createElement("em",null,"Clientes")),C.length?C.filter(function(e){return!0===e.active}).map(function(e,t){return r.a.createElement(p.z,{key:t,value:e._id},e.bussinessName)}):r.a.createElement(p.z,null,"No hay clientes"))),r.a.createElement(p.L,{required:!0,className:"text-field",id:"contact",label:"Contacto del cliente",value:i.contact,onChange:l}),r.a.createElement(p.L,{required:!0,className:"text-field",id:"responsible",label:"Responsable del seguimiento",value:i.responsible,onChange:l})))),c?r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:s,color:"primary",variant:"contained"},"Agregar")):r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:a},"Cancelar"),r.a.createElement(p.c,{onClick:function(){return E()},color:"secondary",variant:"contained"},"Borrar"),r.a.createElement(p.c,{onClick:function(){return s("update")},color:"primary",variant:"contained"},"Actualizar")),r.a.createElement(p.g,{open:g,onClose:E},r.a.createElement(p.j,null,"Eliminar factura ","".concat(i.id)),r.a.createElement(p.h,null,r.a.createElement(p.c,{onClick:E,color:"primary"},"Cancelar"),r.a.createElement(p.c,{onClick:function(){u(i._id),E()},color:"secondary",autoFocus:!0},"Eliminar"))))},je=function(e){var t=e.rowsPerPage,a=e.page,l=e.handleChangePage,c=e.handleChangeRowsPerPage,o=e.dialog,i=e.closeDialog,s=e.handleChange,u=e.openDialog,m=e.loading,d=e.bill,g=e.bills,h=void 0===g?[]:g,E=e.submitBill,f=e.deleteBill,b=e.handleStatus,C=Object(n.useState)(""),y=Object(v.a)(C,2),w=y[0],P=y[1];return r.a.createElement("div",null,r.a.createElement(p.A,{id:"tablas",style:{width:"100%",margin:"1em auto",padding:"1em"}},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",{style:{textAlign:"left",marginLeft:"1rem"}},"Facturas"),r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{style:{maxWidth:"50px"},onChange:function(e){return P(e.target.value)},value:w,id:"search-on-table",label:"ID"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Editar"),r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},"Factura"),r.a.createElement(p.G,null,"OC"),r.a.createElement(p.G,null,"Cliente"),r.a.createElement(p.G,null,"Contacto"),r.a.createElement(p.G,null,"Responsable"),r.a.createElement(p.G,null,"Estado"))),r.a.createElement(p.F,null,h.length?h.filter(function(e){return e.id.includes(w)}).map(function(e,t){return t<10*a+10&&t>=10*a&&e.active?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,{style:{width:"40px",padding:"8px",textAlign:"center"}},r.a.createElement(p.m,{onClick:function(){return u(e,"update")},variant:"extended",color:"primary",size:"small"},r.a.createElement(N.h,{fontSize:"small"}))),r.a.createElement(p.G,{style:{width:"40px",padding:"8px"}},e.id),r.a.createElement(p.G,null,e.order),r.a.createElement(p.G,{component:"th",scope:"row"},e.client?e.client.bussinessID:null),r.a.createElement(p.G,null,e.contact),r.a.createElement(p.G,null,e.responsible),r.a.createElement(p.G,null,r.a.createElement(p.L,{select:!0,value:e.status,onChange:b(e),name:"status",id:"status",InputProps:{startAdornment:r.a.createElement(p.r,{position:"start"},r.a.createElement("div",{style:"Generada"===e.status?{backgroundColor:"#f3f300"}:"Enviada"===e.status?{backgroundColor:"#6E6EFF"}:{backgroundColor:"#00CC2C"},className:"circle"}))}},r.a.createElement(p.z,{value:"Generada"},"Generada"),r.a.createElement(p.z,{value:"Enviada"},"Enviada"),r.a.createElement(p.z,{value:"Pagada"},"Pagada")))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},m?"Cargando...":"No hay facturas"),r.a.createElement(p.G,{component:"th",scope:"row"},m?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):""))))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:h?h.filter(function(e){return!0===e.active}).length:0,rowsPerPage:t,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:l,onChangeRowsPerPage:c})),r.a.createElement(Le,{dialog:o,closeDialog:i,handleChange:s,bill:d,submitBill:E,deleteBill:f}))},Ge=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},bill:{},bills:[],loading:!0,page:0,rowsPerPage:10,message:String,dialog:!1,dialogNew:!1,open:!1},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){return a.getBills()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.handleChange=function(e){var t=a.state.bill;if("client"===e.target.name)return t.client=e.target.value,a.setState({bill:t});t[e.target.id]=e.target.value,a.setState({bill:t})},a.getBills=function(){var e=a.state.user;De(e._id).then(function(e){return a.setState({bills:e.data.bills.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},a.submitBill=function(e){var t=a.state,n=t.bill,r=t.user;if("update"===e)return Oe(n,n._id).then(function(e){return a.setState({dialog:!1,open:!0,message:"Factura actualizada"},a.getBills)}).catch(function(e){return console.log(e)});xe(n,r._id).then(function(e){return a.setState({dialogNew:!1,open:!0,message:"Factura agregada"},a.getBills)}).catch(function(e){return console.log(e)})},a.deleteBill=function(e){ke(e).then(function(e){return a.setState({dialog:!1,open:!0,message:"Factura eliminada"},a.getBills)}).catch(function(e){return e})},a.handleStatus=function(e){return function(t){e[t.target.name]=t.target.value,Oe(e,e._id).then(function(e){return a.setState({dialog:!1,open:!0,message:"Factura actualizada"},a.getBills)}).catch(function(e){return console.log(e)})}},a.close=function(){return a.setState({open:!1})},a.openDialog=function(e,t){"update"===t?a.setState({dialog:!0,bill:e}):a.setState({dialogNew:!0,bill:{}})},a.closeDialog=function(){return a.setState({dialog:!1,dialogNew:!1},a.getBills)},a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({rowsPerPage:e.target.value})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.page,n=e.rowsPerPage,l=e.message,c=e.dialog,o=e.dialogNew,i=e.open,s=e.bills,u=e.bill,m=this.close,d=this.openDialog,g=this.closeDialog,h=this.handleChangePage,E=this.handleChangeRowsPerPage,f=this.submitBill,b=this.handleChange,v=this.deleteBill,C=this.handleStatus;return r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(je,{handleChangePage:h,handleChangeRowsPerPage:E,page:a,rowsPerPage:n,dialog:c,loading:t,bills:s,bill:u,handleChange:b,submitBill:f,openDialog:d,closeDialog:g,deleteBill:v,handleStatus:C}),r.a.createElement("div",null,r.a.createElement(p.c,{onClick:function(){return d({},"new")},variant:"contained",color:"primary"},"Nueva Factura")),r.a.createElement(Le,{bill:u,dialogNew:o,closeDialog:g,handleChange:b,submitBill:f}),r.a.createElement(ce,{close:m,message:l,open:i}))}}]),t}(n.Component),Be=function(e){var t=e.value,a=e.handleChange,n=e.lead,l=e.leads,c=e.handleChangePage,o=e.handleChangeRowsPerPage,i=e.handleClose,s=e.rowsPerPage,u=e.page,m=e.submitLead,d=e.getLeads,g=e.clearLead,p=e.deleteLead,h=e.openDialog,E=e.closeDialog,f=e.dialog,b=e.updateLead,v=e.dialogNew,C=e.handleDateChange,y=(e.quotations,e.quotation,e.loading),w=e.openDrawer,P=e.closeDrawer,N=e.drawer,S=e.updateLeadState;return r.a.createElement("div",{className:"tab-content"},0===t?r.a.createElement(ge,{handleChange:a,handleChangePage:c,handleChangeRowsPerPage:o,page:u,rowsPerPage:s,lead:n,leads:l,handleClose:i,submitLead:m,getLeads:d,clearLead:g,deleteLead:p,openDialog:h,closeDialog:E,dialog:f,dialogNew:v,updateLead:b,handleDateChange:C,loading:y,openDrawer:w,closeDrawer:P,drawer:N,updateLeadState:S}):1===t?r.a.createElement(Ne,null):2===t?r.a.createElement(Ge,null):3===t?r.a.createElement(Ee,null):"otro")},Ie=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,lead:{},leads:[],quotation:{},quotations:[],user:{},page:0,rowsPerPage:10,message:String,open:!1,dialog:!1,dialogNew:!1,loading:!0,drawer:!1},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e},function(){return a.getLeads()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.handleChange=function(e){var t=a.state.lead;return"Origen"===e.target.name?(t.origin=e.target.value,a.setState({lead:t})):"clientName"===e.target.name?(t.clientName=e.target.value,a.setState({lead:t})):(t[e.target.name]=e.target.value,a.setState({lead:t}),void console.log(t))},a.handleDateChange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(l){var c=t;if(null!==r){var o=t;return o.quotDate=l,a.setState({quotation:o},function(){return a.updateQuot(e)})}return null===n?(c.meetingDate=l,a.setState({lead:c},function(){return a.updateLead(e)})):"status"===l.target.name?(c.status=l.target.value,a.setState({lead:c},function(){a.updateLead(e)})):void 0}},a.getLeads=function(){var e=a.state.user;K(e._id).then(function(e){return a.setState({leads:e.data.leads.reverse(),loading:!1})}).catch(function(e){return console.log(e)})},a.submitLead=function(){var e=a.state,t=e.user,n=e.lead,r=e.leads,l=void 0===r?[]:r;n.commentPostedBy=t._id,n.prefix="DL",n.seller=t.name[0].toUpperCase()+t.name[1].toUpperCase(),n.number=l.length>0?l[0].number+1:1,ee(t._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),a.getLeads(t._id),a.setState({dialogNew:!1,open:!0,message:"Lead creado"},a.clearLead)}).catch(function(e){return console.log(e)})},a.updateLead=function(e){var t=a.state.lead;ne(e,t).then(function(e){a.setState({dialog:!1,open:!0,message:"Actualizado correctamente"}),a.getLeads()}).catch(function(e){return console.log(e)})},a.clearLead=function(){var e=a.state.lead;Object.keys(e).map(function(t){return e[t]=""}),a.setState({lead:e})},a.deleteLead=function(e){var t=a.state.user,n={id:e};te(n).then(function(e){return e}).catch(function(e){return console.log(e)}),ae(t._id,n).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),a.getLeads(),a.setState({dialog:!1,open:!0,message:"Lead eliminado"})}).catch(function(e){return console.log(e)})},a.handleTabs=function(e,t){return a.setState({value:t})},a.close=function(){return a.setState({open:!1})},a.openDialog=function(e,t){"update"===t?a.setState({dialog:!0,lead:e}):"updateQuot"===t?a.setState({dialog:!0,quotation:e}):a.setState({dialogNew:!0,lead:{}})},a.closeDialog=function(){a.setState({dialog:!1,dialogNew:!1},a.getLeads)},a.openDrawer=function(e){return a.setState({drawer:!0,lead:e})},a.closeDrawer=function(){return a.setState({drawer:!1,lead:{}},function(){return a.getLeads()})},a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({rowsPerPage:e.target.value})},a.updateLeadState=function(e){a.setState({lead:e},function(){return a.getLeads()})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.value,n=t.message,l=t.page,c=t.rowsPerPage,o=t.lead,i=t.user,s=t.open,u=t.leads,m=t.dialog,d=t.dialogNew,g=t.client,h=t.quotations,E=t.loading,f=t.drawer,b=t.quotation,v=this.handleTabs,C=this.handleChange,y=this.handleChangePage,w=this.handleChangeRowsPerPage,P=this.close,N=this.submitLead,S=this.getLeads,O=this.clearLead,x=this.deleteLead,D=this.closeDialog,k=this.openDialog,L=this.updateLead,j=this.handleDateChange,G=this.openDrawer,B=this.closeDrawer,I=this.updateLeadState;return r.a.createElement("div",{className:e.salesMenuRoot},r.a.createElement(p.a,{position:"static",color:"default"},r.a.createElement(p.K,{value:a,onChange:v,indicatorColor:"primary",textColor:"primary"},r.a.createElement(p.D,{onClick:S,label:"Oportunidad de venta"}),r.a.createElement(p.D,{label:"\xd3rdenes de compra"}),r.a.createElement(p.D,{label:"Facturaci\xf3n"}),r.a.createElement(p.D,{label:"Administrar clientes"}))),r.a.createElement(Be,{value:a,handleChange:C,handleChangePage:y,handleChangeRowsPerPage:w,page:l,rowsPerPage:c,lead:o,leads:u,user:i,submitLead:N,getLeads:S,clearLead:O,deleteLead:x,dialog:m,openDialog:k,closeDialog:D,dialogNew:d,updateLead:L,handleDateChange:j,client:g,quotations:h,quotation:b,loading:E,openDrawer:G,closeDrawer:B,drawer:f,updateLeadState:I}),r.a.createElement(ce,{close:P,message:n,open:s}))}}]),t}(n.Component),Ae=Object(z.a)(Object(f.withStyles)(E)(Ie));a(79);a(117);var ze=function(e){var t=e.leads,a=e.page,l=e.rowsPerPage,c=e.handleChangePage,o=e.loading,i=e.orderById,s=Object(n.useState)(""),u=Object(v.a)(s,2),m=u[0],d=u[1];return r.a.createElement("div",{style:{marginTop:"1em"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return d(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,null," ",r.a.createElement("span",{className:"order-cell",onClick:i},"ID")),r.a.createElement(p.G,null,"Empresa"),r.a.createElement(p.G,null,"Estatus"),r.a.createElement(p.G,null,"Reuni\xf3n"))),r.a.createElement(p.F,null,t.length?t.filter(function(e){return e.clientName?e.prefix.concat("-",e.seller,"-",e.number).includes(m.toUpperCase())||e.clientName.bussinessName.toLowerCase().includes(m.toLowerCase()):[]}).map(function(e,t){return t<5*a+5&&t>=5*a?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,null,"".concat(e.prefix,"-").concat(e.seller,"-").concat(e.number)),r.a.createElement(p.G,null,e.clientName?e.clientName.bussinessName:null),r.a.createElement(p.G,null,e.status),r.a.createElement(p.N,{disableFocusListener:!0,title:ue()(e.meetingDate).format("d/MMMM/Y h:m a"),placement:"right"},r.a.createElement(p.G,null,e.meetingDate?ue()(e.meetingDate).fromNow():"No agendada"))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},o?"Cargando...":"No hay deals"),r.a.createElement(p.G,{component:"th",scope:"row"},o?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):"")))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:t?t.length:0,rowsPerPage:l,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:c}))};a(117);var Fe=function(e){var t=e.orders,a=e.page,l=e.rowsPerPage,c=e.handleChangePage,o=e.loading,i=e.orderById,s=e.getOrders,u=Object(n.useState)(""),m=Object(v.a)(u,2),d=m[0],g=m[1],h=Object(n.useState)(!1),E=Object(v.a)(h,2),f=E[0],b=E[1],C=Object(n.useState)("Orden de compra actualizada"),y=Object(v.a)(C,2),w=y[0],P=y[1],S=function(e){return function(t){e[t.target.name]=t.target.value,be(e,e._id).then(function(e){b(!0),s()}).catch(function(e){P("Ocurri\xf3 un error al actualizar"),b(!0)})}};return r.a.createElement("div",{style:{marginTop:"1em"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return g(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,null," ",r.a.createElement("span",{className:"order-cell",onClick:i},"ID")),r.a.createElement(p.G,null,"Cliente"),r.a.createElement(p.G,null,"Contacto"),r.a.createElement(p.G,null,"Estatus"))),r.a.createElement(p.F,null,t.length?t.filter(function(e){return e.client?e.id.includes(d.toUpperCase())||e.client.bussinessName.toLowerCase().includes(d.toLowerCase()):[]}).map(function(e,t){return t<5*a+5&&t>=5*a&&e.active?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,null,e.id),r.a.createElement(p.G,null,e.client?e.client.bussinessName:null),r.a.createElement(p.G,null,e.contact),r.a.createElement(p.G,null,r.a.createElement(p.L,{select:!0,value:e.status,onChange:S(e),name:"status",id:"status",InputProps:{startAdornment:r.a.createElement(p.r,{position:"start"},r.a.createElement("div",{style:"Generada"===e.status?{backgroundColor:"#f3f300"}:"Enviada"===e.status?{backgroundColor:"#6E6EFF"}:{backgroundColor:"#00CC2C"},className:"circle"}))}},r.a.createElement(p.z,{value:"Generada"},"Generada"),r.a.createElement(p.z,{value:"Enviada"},"Enviada"),r.a.createElement(p.z,{value:"Facturada"},"Facturada")))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},o?"Cargando...":"No hay \xf3rdenes"),r.a.createElement(p.G,{component:"th",scope:"row"},o?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):"")))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:t?t.filter(function(e){return e.active}).length:0,rowsPerPage:l,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:c}),r.a.createElement(ce,{close:function(){return b(!1)},message:w,open:f}))};a(117);var qe=function(e){var t=e.bills,a=e.page,l=e.rowsPerPage,c=e.handleChangePage,o=e.loading,i=e.orderById,s=e.getBills,u=Object(n.useState)(""),m=Object(v.a)(u,2),d=m[0],g=m[1],h=Object(n.useState)(!1),E=Object(v.a)(h,2),f=E[0],b=E[1],C=Object(n.useState)("Factura actualizada"),y=Object(v.a)(C,2),w=y[0],P=y[1],S=function(e){return function(t){e[t.target.name]=t.target.value,Oe(e,e._id).then(function(e){b(!0),s()}).catch(function(e){P("Ocurri\xf3 un error al actualizar"),b(!0)})}};return r.a.createElement("div",{style:{marginTop:"1em"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(p.N,{title:"Filtrar lista",placement:"bottom"},r.a.createElement(p.o,{style:{width:"auto"},container:!0,alignItems:"flex-end"},r.a.createElement(p.o,{item:!0},r.a.createElement(p.L,{onChange:function(e){return g(e.target.value)},id:"search-on-table",label:"ID/Empresa"})),r.a.createElement(p.o,{item:!0},r.a.createElement(N.k,null))))),r.a.createElement(p.E,null,r.a.createElement(p.H,null,r.a.createElement(p.J,null,r.a.createElement(p.G,null," ",r.a.createElement("span",{className:"order-cell",onClick:i},"ID")),r.a.createElement(p.G,null,"OC"),r.a.createElement(p.G,null,"Cliente"),r.a.createElement(p.G,null,"Contacto"),r.a.createElement(p.G,null,"Estatus"))),r.a.createElement(p.F,null,t.length?t.filter(function(e){return e.client?e.id.includes(d.toUpperCase())||e.client.bussinessName.toLowerCase().includes(d.toLowerCase()):[]}).map(function(e,t){return t<5*a+5&&t>=5*a&&e.active?r.a.createElement(p.J,{key:t},r.a.createElement(p.G,null,e.id),r.a.createElement(p.G,null,e.order),r.a.createElement(p.G,null,e.client?e.client.bussinessName:null),r.a.createElement(p.G,null,e.contact),r.a.createElement(p.G,null,r.a.createElement(p.L,{select:!0,value:e.status,onChange:S(e),name:"status",id:"status",InputProps:{startAdornment:r.a.createElement(p.r,{position:"start"},r.a.createElement("div",{style:"Generada"===e.status?{backgroundColor:"#f3f300"}:"Enviada"===e.status?{backgroundColor:"#6E6EFF"}:{backgroundColor:"#00CC2C"},className:"circle"}))}},r.a.createElement(p.z,{value:"Generada"},"Generada"),r.a.createElement(p.z,{value:"Enviada"},"Enviada"),r.a.createElement(p.z,{value:"Pagada"},"Pagada")))):""}):r.a.createElement(p.J,null,r.a.createElement(p.G,{style:{width:"200px",padding:"5px"},component:"th",scope:"row"},o?"Cargando...":"No hay facturas"),r.a.createElement(p.G,{component:"th",scope:"row"},o?r.a.createElement(p.e,{color:"secondary",style:{margin:"1em"}}):"")))),r.a.createElement(p.I,{rowsPerPageOptions:[5],component:"Table",count:t?t.filter(function(e){return e.active}).length:0,rowsPerPage:l,page:a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:c}),r.a.createElement(ce,{close:function(){return b(!1)},message:w,open:f}))},Re=a(50),_e=a(81),Je=a.n(_e);Re.b.addAdapter(Je.a);var Me=function(e){var t=e.propuesta,a=e.negociacion,n=e.confirmacion,l=e.perdida,c=e.ganada;return r.a.createElement(Re.a,{data:{Propuesta:t,"Negociaci\xf3n":a,"Confirmaci\xf3n de pedido (Ganada)":n,Perdida:l,"Primer cobro":c}})};Re.b.addAdapter(Je.a);var Ue=function(e){var t=e.generada,a=e.enviada,n=e.facturada;return r.a.createElement(Re.a,{colors:["#f3f300","#6E6EFF","#00CC2C"],data:{Generada:t,Enviada:a,Facturada:n}})};Re.b.addAdapter(Je.a);var Te=function(e){var t=e.generada,a=e.enviada,n=e.pagada;return r.a.createElement(Re.a,{colors:["#f3f300","#6E6EFF","#00CC2C"],data:{Generada:t,Enviada:a,Pagada:n}})},We=function(e){var t=e.leads,a=e.orders,l=e.bills,c=e.page,o=e.pageOrd,i=e.pageBill,s=e.rowsPerPage,u=e.handleChangePage,m=e.rowsPerPageOrd,d=e.handleChangePageOrd,g=e.rowsPerPageBill,h=e.handleChangePageBill,E=e.loading,f=e.loadingOrders,b=e.loadingBills,C=e.orderById,y=e.orderByIdOrders,w=e.orderByIdBills,P=e.summaryData,N=e.summaryDataOrders,S=e.summaryDataBills,O=e.getOrders,x=e.getBills,D=Object(n.useState)(!1),k=Object(v.a)(D,2),L=k[0],j=k[1];return Object(n.useEffect)(function(){var e=Object.values(P).every(function(e){return 0===e});j(!e)},[P]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cards"},r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Deals"),r.a.createElement(ze,{leads:t,loading:E,page:c,rowsPerPage:s,handleChangePage:u,orderById:C})),r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Resumen de Deals"),r.a.createElement("div",{className:"general-info"},L?r.a.createElement(Me,P):r.a.createElement("small",null,"No hay datos")))),r.a.createElement("div",{className:"cards"},r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"\xd3rdenes de compra"),r.a.createElement(Fe,{orders:a,loading:f,page:o,rowsPerPage:m,handleChangePage:d,orderById:y,getOrders:O})),r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Resumen \xd3rdenes de Compra"),r.a.createElement("div",{className:"general-info"},L?r.a.createElement(Ue,N):r.a.createElement("small",null,"No hay datos")))),r.a.createElement("div",{className:"cards"},r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Facturas"),r.a.createElement(qe,{bills:l,loading:b,page:i,rowsPerPage:g,handleChangePage:h,orderById:w,getBills:x})),r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Resumen de Facturas"),r.a.createElement("div",{className:"general-info"},L?r.a.createElement(Te,S):r.a.createElement("small",null,"No hay datos")))))},Ve=function(){return L.a.get("".concat("https://crm-fss.herokuapp.com/general","/getSellers")).then(function(e){return e}).catch(function(e){return e})},He=function(e){var t=e.sellers;return r.a.createElement("div",{className:"cards employees-resume"},r.a.createElement(p.A,{className:"card"},r.a.createElement("h4",null,"Vendedores"),r.a.createElement(p.u,{className:"employees-detail"},t?t.map(function(e,t){return r.a.createElement(p.v,{className:"list",key:t},r.a.createElement(p.b,{alt:"profile-mini-pic",src:e.photoURL}),r.a.createElement(p.x,{primary:e.name,secondary:r.a.createElement(r.a.Fragment,null,"Deals: ",r.a.createElement("b",null,e.leads.length," "),r.a.createElement("br",null),"Cotizaciones: ",r.a.createElement("b",null,e.leads.length?e.leads.reduce(function(e,t){return e+t.quotations.length},0):0," "),r.a.createElement("br",null),"\xd3rdenes de compra: ",r.a.createElement("b",null,e.orders?e.orders.length:0," "),r.a.createElement("br",null),"Facturas: ",r.a.createElement("b",null,e.bills?e.bills.length:0," "))}))}):r.a.createElement("div",{className:"employees-detail"},"No hay vendedores"))))},Qe=a(5821),Xe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={user:{},loading:!0,loadingOrders:!0,loadingBills:!0,leads:[],orders:[],bills:[],summaryData:{},summaryDataOrders:{},summaryDataBills:{},page:0,pageOrd:0,pageBill:0,rowsPerPage:5,rowsPerPageOrd:5,rowsPerPageBill:5,sellers:[]},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return r.a.createElement(Qe.a,{to:"/login"});a.setState({user:e},function(){a.getLeads(),a.getOrders(),a.getBills(),a.getEmployees()})},a.componentWillUnmount=function(){return a.setState({loading:!0})},a.getSummaryData=function(){var e=a.state,t=e.leads,n=e.orders,r=e.bills,l={propuesta:t.reduce(function(e,t){return"Propuesta"===t.status&&e++,e},0),negociacion:t.reduce(function(e,t){return"Negociaci\xf3n"===t.status&&e++,e},0),confirmacion:t.reduce(function(e,t){return"Confirmaci\xf3n de pedido"===t.status&&e++,e},0),perdida:t.reduce(function(e,t){return"Perdida"===t.status&&e++,e},0),ganada:t.reduce(function(e,t){return"Primer Cobro"===t.status&&e++,e},0)},c={generada:n.reduce(function(e,t){return"Generada"===t.status&&t.active&&e++,e},0),enviada:n.reduce(function(e,t){return"Enviada"===t.status&&t.active&&e++,e},0),facturada:n.reduce(function(e,t){return"Facturada"===t.status&&t.active&&e++,e},0)},o={generada:r.reduce(function(e,t){return"Generada"===t.status&&t.active&&e++,e},0),enviada:r.reduce(function(e,t){return"Enviada"===t.status&&t.active&&e++,e},0),pagada:r.reduce(function(e,t){return"Pagada"===t.status&&t.active&&e++,e},0)};a.setState({summaryData:l,summaryDataOrders:c,summaryDataBills:o})},a.getLeads=function(){var e=a.state.user;K(e._id).then(function(e){return a.setState({leads:e.data.leads.reverse(),loading:!1},a.getSummaryData)}).catch(function(e){return console.log(e)})},a.getOrders=function(){var e=a.state.user;Ce(e._id).then(function(e){return a.setState({orders:e.data.orders.reverse(),loading:!1},a.getSummaryData)}).catch(function(e){return console.log(e)})},a.getBills=function(){var e=a.state.user;De(e._id).then(function(e){return a.setState({bills:e.data.bills.reverse(),loading:!1},a.getSummaryData)}).catch(function(e){return console.log(e)})},a.getEmployees=function(){Ve().then(function(e){return a.setState({sellers:e.data})}).catch(function(e){return console.log(e)})},a.handleChangePage=function(e,t){return a.setState({page:t})},a.orderById=function(){var e=a.state.leads;e=e.reverse(),a.setState({leads:e})},a.orderByIdOrders=function(){var e=a.state.orders;e=e.reverse(),a.setState({orders:e})},a.orderByIdBills=function(){var e=a.state.bills;e=e.reverse(),a.setState({bills:e})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.loadingOrders,n=e.loadingBills,l=e.leads,c=e.page,o=e.rowsPerPage,i=e.pageOrd,s=e.rowsPerPageOrd,u=e.pageBill,m=e.rowsPerPageBill,d=e.summaryData,g=e.summaryDataOrders,p=e.summaryDataBills,h=e.sellers,E=e.orders,f=e.bills,b=this.handleChangePage,v=this.handleChangePageOrd,C=this.handleChangePageBill,y=this.orderById,w=this.orderByIdOrders,P=this.orderByIdBills,N=this.getOrders,S=this.getBills;return r.a.createElement("div",{className:"dashboard-layout"},r.a.createElement(We,{leads:l,orders:E,bills:f,loading:t,loadingOrders:a,loadingBills:n,orderById:y,orderByIdOrders:w,orderByIdBills:P,summaryData:d,summaryDataOrders:g,summaryDataBills:p,handleChangePage:b,page:c,rowsPerPage:o,handleChangePageOrd:v,pageOrd:i,rowsPerPageOrd:s,handleChangePageBill:C,pageBill:u,rowsPerPageBill:m,getOrders:N,getBills:S}),r.a.createElement(He,{sellers:h}))}}]),t}(n.Component),$e=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,direction:"left",location:"root",user:{},message:String},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return a.props.history.push("/login");a.setState({user:e})},a.handleDrawerOpen=function(){return a.setState({open:!0,direction:"left"})},a.handleDrawerClose=function(){return a.setState({open:!1,direction:"right"})},a.handleLocation=function(e){return a.setState({location:e})},a.toHome=function(){return a.setState({location:"root"})},a.updateUser=function(e){A(e._id,e),a.setState({user:e})},a.closeSession=function(){return I().then(function(e){var t=a.props.history;return localStorage.removeItem("user"),t.push("/login")}).catch(function(e){return e})},a.close=function(){return a.setState({open:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,a=e.direction,n=e.location,l=e.user,c=this.handleDrawerClose,o=this.handleDrawerOpen,i=this.handleLocation,s=this.updateUser,u=this.toHome,m=this.closeSession,d=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:"root"},r.a.createElement(p.f,null),r.a.createElement(S,Object.assign({handleDrawerOpen:o,toHome:u,open:t,classes:d,closeSession:m,handleLocation:i},l)),r.a.createElement(O,{handleDrawerClose:c,location:n,open:t,direction:a,classes:d,handleLocation:i}),r.a.createElement("main",{onClick:c,className:d.content},r.a.createElement("div",{className:d.toolbar}),"root"===n?r.a.createElement(Xe,null):"ventas"===n?r.a.createElement(Ae,null):"profile"===n?r.a.createElement(q,{updateUser:s}):"Not root")))}}]),t}(n.Component),Ye=Object(f.withStyles)(E,{withTheme:!0})($e),Ze=(a(267),a(5816),a(119)),Ke=a.n(Ze),et=a(65),tt=a.n(et),at=a(43),nt=a.n(at),rt=a(5818),lt=function(){return r.a.createElement(Ke.a,{position:"static"},r.a.createElement(tt.a,{className:"grow"},r.a.createElement(rt.a,{to:"/login"},r.a.createElement("img",{style:{width:"100px",cursor:"pointer"},src:"/logo.png",alt:"fss-logo"})),r.a.createElement(nt.a,{color:"inherit"},r.a.createElement(rt.a,{style:{color:"white"},to:"/login"},"Iniciar sesi\xf3n"))))},ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},message:String,open:!1,showPassword:!1},a.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return a.setState({user:{},isAuth:!1});a.props.history.push("/home")},a.handleChange=function(e){var t=a.state.user;t[e.target.id]=e.target.value,a.setState({user:t})},a.handleSubmit=function(){var e=a.state.user;B(e).then(function(e){return 500===e.status?a.setState({open:!0,message:e.data.message}):404===e.status?a.setState({open:!0,message:"Nombre de usuario o contrase\xf1a incorrectos"}):(localStorage.setItem("user",JSON.stringify(e)),a.setState({open:!0,message:"Inicio de sesi\xf3n correcto, \xa1Bienvenido(a)!"}),void a.props.history.push("/home"))}).catch(function(e){return a.setState({open:!0,message:e})})},a.close=function(){return a.setState({open:!1})},a.togglePassword=function(){return a.setState({showPassword:!a.state.showPassword})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.message,n=e.open,l=e.showPassword,c=this.handleChange,o=this.handleSubmit,i=this.close,s=this.togglePassword;return r.a.createElement("div",null,r.a.createElement(lt,null),r.a.createElement("div",{className:"landing-image"}),r.a.createElement(p.A,{className:"paper-signup"},r.a.createElement("h2",null,"Ingresa a tu cuenta"),r.a.createElement("img",{style:{filter:"invert(100%)",width:"200px"},src:"/logo.png",alt:"fss-logo"}),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.L,{id:"email",label:"Email",value:t.email,onChange:c,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.L,{id:"password",type:l?"text":"password",label:"Contrase\xf1a",value:t.password,onChange:c,margin:"normal",InputProps:{endAdornment:r.a.createElement(p.r,{position:"end"},r.a.createElement(p.p,{"aria-label":"Toggle password visibility",onClick:s},l?r.a.createElement(N.n,null):r.a.createElement(N.m,null)))}})),r.a.createElement(p.c,{onClick:o,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Iniciar sesi\xf3n")),r.a.createElement("small",null,"\xbfNo tienes una cuenta? ",r.a.createElement(rt.a,{to:"/signup"},"Crea una aqu\xed"))),r.a.createElement(ce,{close:i,message:a,open:n}))}}]),t}(n.Component),ot=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},message:String,open:!1,error:!1,errorPass:!1,disabledMail:!0,disabledPass:!0,showPassword:!1},a.componentDidMount=function(){if(!JSON.parse(localStorage.getItem("user")))return a.setState({user:{},isAuth:!1});a.props.history.push("/app")},a.handleChange=function(e){var t=a.state.user;t[e.target.id]=e.target.value,a.setState({user:t})},a.handleSubmit=function(){if(document.getElementById("password").value.length<6)return a.setState({disabledPass:!0,open:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});var e=a.state.user;G(e).then(function(e){if(500===e.status)return a.setState({open:!0,message:"Ya existe un usuario con este correo"});localStorage.setItem("user",JSON.stringify(e)),a.setState({open:!0,message:"Registro correcto, \xa1Bienvenido(a)!"}),a.props.history.push("/home")}).catch(function(e){return a.setState({open:!0,message:e})})},a.close=function(){return a.setState({open:!1})},a.checkPassword=function(e){return function(e){return a.state.user.password===e.target.value?a.setState({disabledPass:!1,errorPass:!1}):(a.setState({disabledPass:!0,errorPass:!0}),!1)}},a.checkEmail=function(e){return function(e){if(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.target.value).toLowerCase()))return a.setState({disabledMail:!1,error:!1});a.setState({disabledMail:!0,error:!0})}},a.togglePassword=function(){return a.setState({showPassword:!a.state.showPassword})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.message,n=e.open,l=e.error,c=e.disabledMail,o=e.disabledPass,i=e.errorPass,s=e.showPassword,u=this.handleChange,m=this.handleSubmit,d=this.close,g=this.checkEmail,h=this.checkPassword,E=this.togglePassword;return r.a.createElement("div",null,r.a.createElement(lt,null),r.a.createElement("div",{className:"landing-image"}),r.a.createElement(p.A,{className:"paper-signup"},r.a.createElement("h2",null,"Registro de usuario"),r.a.createElement("img",{style:{filter:"invert(100%)",width:"200px"},src:"/logo.png",alt:"fss-logo"}),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(p.L,{id:"name",label:"Nombre",value:t.name,onChange:u,margin:"normal"})),r.a.createElement("div",null,r.a.createElement(p.L,{id:"email",label:"Email",value:t.email,onChange:u,onBlur:g(),margin:"normal"})),r.a.createElement("div",null,l?r.a.createElement("small",{style:{color:"red"}},"Ingresa un correo v\xe1lido"):""),r.a.createElement("div",null,r.a.createElement(p.L,{id:"password",type:s?"text":"password",label:"Contrase\xf1a",value:t.password,onChange:u,margin:"normal",InputProps:{endAdornment:r.a.createElement(p.r,{position:"end"},r.a.createElement(p.p,{"aria-label":"Toggle password visibility",onClick:E},s?r.a.createElement(N.n,null):r.a.createElement(N.m,null)))}})," ",r.a.createElement("br",null),r.a.createElement("small",{style:{fontSize:"0.7rem",color:"rgb(0, 82, 136)",marginTop:"-5px;"}},"M\xednimo 6 caracteres")),r.a.createElement("div",null,r.a.createElement(p.L,{id:"repeat-password",label:"Repite tu contrase\xf1a",type:s?"text":"password",onChange:h(),onBlur:h(),margin:"normal"})),r.a.createElement("div",null,i?r.a.createElement("small",{style:{color:"red"}},"La contrase\xf1a no coincide"):""),r.a.createElement(p.c,{disabled:c||o,onClick:m,style:{margin:"1rem 0"},variant:"contained",color:"primary"},"Registrarme")),r.a.createElement("small",null,"\xbfYa tienes una cuenta? ",r.a.createElement(rt.a,{to:"login"},"Inicia sesi\xf3n"))),r.a.createElement(ce,{close:d,message:a,open:n}))}}]),t}(n.Component),it=function(){return r.a.createElement(d.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:ct}),r.a.createElement(g.a,{path:"/login",component:ct}),r.a.createElement(g.a,{path:"/home",component:Ye}),r.a.createElement(g.a,{path:"/signup",component:ot}))},st=Object(f.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#1976d2"},secondary:{main:"#c62828"}}}),ut=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(f.MuiThemeProvider,{theme:st},r.a.createElement("div",{className:"App"},r.a.createElement(it,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mt=a(5820);c.a.render(r.a.createElement(function(){return r.a.createElement(mt.a,null,r.a.createElement(ut,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){}},[[5523,1,2]]]);
//# sourceMappingURL=main.e2eae0c3.chunk.js.map